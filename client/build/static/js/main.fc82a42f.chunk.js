(this["webpackJsonpdonnys-list-client"]=this["webpackJsonpdonnys-list-client"]||[]).push([[0],{1073:function(e,t,s){"use strict";s.r(t);var a={};s.r(a),s.d(a,"socket",(function(){return Vt})),s.d(a,"fetchConversations",(function(){return Jt})),s.d(a,"fetchConversation",(function(){return Gt})),s.d(a,"startConversation",(function(){return Kt})),s.d(a,"fetchRecipients",(function(){return Zt})),s.d(a,"sendReply",(function(){return Xt})),s.d(a,"FetchExpertConversation",(function(){return Qt})),s.d(a,"ExpertSessionUserDisconnected",(function(){return es})),s.d(a,"ExpertSendReply",(function(){return ts}));var r={};s.r(r),s.d(r,"createCustomer",(function(){return Pa})),s.d(r,"fetchCustomer",(function(){return Ba})),s.d(r,"cancelSubscription",(function(){return $a})),s.d(r,"updateSubscription",(function(){return za})),s.d(r,"updateBilling",(function(){return qa}));var i=s(1),n=s.n(i),c=s(34),o=s.n(c),l=s(1080),d=s(19),u=s(10),h=s(6),m=s(1078),p=s(36),j=s(472),b=s(473),x=s(471),g=s(3),f="auth_user",O="unauth_user",v="auth_error",y="forgot_password_request",N="reset_password_request",w="protected_test",S="expert_signup_link_request",_="fetch_user",k="fetch_conversations",C="fetch_recipients",R="start_conversation",M="fetch_single_conversation",L="fetch_expert_single_conversation",U="chat_error",E="send_reply",I="send_contact_form",A="create_customer",T="fetch_customer",D="cancel_subscription",F="update_billing",P="billing_error",B="change_subscription",$="send_expert_email",z="create_expert",q={error:"",message:"",content:"",authenticated:!1};var H={profile:{},message:"",error:""};var Y={conversations:[],message:"",messages:[],recipients:[],error:""};var W={message:"",error:"",customer:{}};var V={message:"",error:"",customer:{}};var J={pagename:""};var G={searchval:[]};var K=Object(p.combineReducers)({form:x.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(g.a)(Object(g.a)({},e),{},{error:"",message:"",authenticated:!0});case O:return Object(g.a)(Object(g.a)({},e),{},{authenticated:!1,error:t.payload});case v:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload});case y:case N:return Object(g.a)(Object(g.a)({},e),{},{message:t.payload.message});case w:return Object(g.a)(Object(g.a)({},e),{},{content:t.payload.message});case S:return Object(g.a)(Object(g.a)({},e),{},{content:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(g.a)(Object(g.a)({},e),{},{profile:t.payload.user});default:return e}},communication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(g.a)(Object(g.a)({},e),{},{conversations:t.payload.conversations});case M:case L:return Object(g.a)(Object(g.a)({},e),{},{messages:t.payload.conversation});case C:return Object(g.a)(Object(g.a)({},e),{},{recipients:t.payload.recipients});case R:case E:return Object(g.a)(Object(g.a)({},e),{},{message:t.payload.message});case I:return Object(g.a)(Object(g.a)({},e),{},{message:t.payload});case U:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload});default:return e}},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(g.a)(Object(g.a)({},e),{},{message:t.payload.message});case T:return Object(g.a)(Object(g.a)({},e),{},{customer:t.payload.customer});case D:case B:case F:return Object(g.a)(Object(g.a)({},e),{},{message:t.payload.message});case P:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload});default:return e}},expert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return console.log("in reducer SEND_EXPERT_EMAIL "+JSON.stringify(t)),Object(g.a)(Object(g.a)({},e),{},{message:t.payload.message});case z:return console.log("in reducer CREATE_EXPERT "+JSON.stringify(t)),Object(g.a)(Object(g.a)({},e),{},{message:t.payload.message});case w:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload.message});default:return e}},pageroute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE":return Object.assign({},e,{pagename:t.data});default:return e}},searchvalue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE":return Object.assign({},e,{searchval:t.payload});default:return e}}}),Z=Object(p.applyMiddleware)(b.a),X=Object(p.createStore)(K,Object(j.composeWithDevTools)(Z)),Q=s(28),ee=s(4),te=s(5),se=s(9),ae=s(8),re=s(0),ie=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("div",{id:"experts-list",className:"experts-list",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("h1",{children:"404 - Page Not Found"}),Object(re.jsx)("p",{children:"I'm sorry, the page you were looking for cannot be found!"})]})})})})}}]),s}(i.Component),ne=function(e){var t=Object(i.useState)({expert:"mohit-rv",email:"2@2.co",expertEmail:"mohit-rv@rvtechnologies.co.in"}),s=Object(d.a)(t,1)[0];return Object(re.jsx)("div",{className:"comment",children:Object(re.jsxs)("h1",{children:["TEST",s.expert]})})},ce=s(7),oe=s.n(ce),le=s(199),de=s.n(le),ue=s(1075),he="45801242",me="https://donnieslist.com",pe="https://api.donnieslist.com",je="https://images.donnieslist.com/";function be(e){return{type:"UPDATE",data:e}}var xe={transitionDuration:0},ge=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).state={category:"",posts:[],loading:!0,error:null,searchval:!1,displaysearch:!1,currentUser:r.props.cookies.get("user")},r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.setPage("HOME"),oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){var s=t.data.map((function(e){return e}));e.setState({posts:s,loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))}},{key:"getStars",value:function(e){var t=16*Math.max(0,Math.min(5,e));return Object.assign({width:t})}},{key:"selectVideoSessionMinutes",value:function(e,t){this.setState({selectedExpertSlug:e.slug}),window.$(".notification-modal").trigger("click")}},{key:"redirectToLogin",value:function(e){e.preventDefault(),this.props.history.push("/login"),this.props.cookies.set("requiredLogin_for_session","Please login to start video session",{path:"/"})}},{key:"getOnlineStatus",value:function(e){return"ONLINE"===e}},{key:"getsearchitem",value:function(){var e=this,t={background:"#ffffff",padding:15};return Object(re.jsx)("div",{id:"experts-list",className:"experts-list",children:Object(re.jsx)("div",{className:"expertise-tab-wrap",children:Object(re.jsx)("div",{className:"expertise-inner",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"expertise-all-detail-wrap",children:this.props.searchvalue.map((function(s,a){return Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:"expertise-detail-only",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-8",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-2",style:t,children:Object(re.jsxs)("div",{className:"img-exper",children:[""!==s.profileImage?Object(re.jsx)("img",{width:"100",src:"".concat(je).concat(s.profileImage),alt:""}):Object(re.jsx)("img",{src:"/img/pro1.png",alt:""}),e.getOnlineStatus(s.onlineStatus)&&Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online-o fa fa-circle","aria-hidden":"true"})]})}),Object(re.jsxs)("div",{className:"person-per-info",children:[Object(re.jsxs)("p",{children:["University: ",s.university]}),Object(re.jsxs)("p",{children:["Area of Expertise: ",s.expertCategories]}),Object(re.jsxs)("p",{children:["Focus of Expertise: ",s.expertFocusExpertise]}),Object(re.jsxs)("p",{children:["Years of Expertise: ",s.yearsexpertise]}),Object(re.jsxs)("p",{children:["Rating:",s.expertRating&&null!=s.expertRating&&void 0!==s.expertRating&&""!==s.expertRating?s.expertRating:"No Ratings Available Yet",s.expertRating&&""!==s.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]})]})}),Object(re.jsxs)("div",{className:"col-sm-4",children:[Object(re.jsx)("div",{className:"stars-review",children:Object(re.jsx)("span",{className:"stars right",children:Object(re.jsx)("span",{style:e.getStars(s.expertRating)})})}),e.state.currentUser?Object(re.jsx)(h.b,{"data-toggle":"modal",title:"Start Video Session","data-target":"#notificationModal",to:"#!",onClick:e.selectVideoSessionMinutes.bind(e,s),"data-slug":s.slug,className:"Start-Session btn-strt-session btn btn-primary pull-right",children:"Connect"}):Object(re.jsx)("div",{children:Object(re.jsx)(h.b,{title:"Start Video Session",to:"#",onClick:e.redirectToLogin.bind(e),className:"Start-Session btn-strt-session btn btn-primary pull-right",children:"Connect"})})]})]})})},"SEARCH_VAL_".concat(a))}))})})})})})}},{key:"renderLoading",value:function(){return Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:""})}},{key:"renderError",value:function(){return Object(re.jsxs)("div",{className:"error-message",children:["AAAA oh: ",this.state.error.message]})}},{key:"getClassName",value:function(e){return"col-md-3 cat-visible"}},{key:"getCategoryLink",value:function(e,t,s){return"forum"===e?Object(re.jsxs)(h.b,{to:"/".concat(t),children:[t," ",s>0?"("+s+")":""]}):Object(re.jsxs)(h.b,{to:"/list/".concat(e),children:[t," ",s>0?"("+s+")":""]})}},{key:"renderPosts",value:function(){var e=this;if(this.state.error)return this.renderError();return Object(re.jsx)("div",{id:"experts-list",className:"experts-list",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsx)(de.a,{className:"my-gallery-class",elementType:"div",options:xe,disableImagesLoaded:!1,updateOnEachImageLoad:!1,imagesLoadedOptions:{background:".my-bg-image-el"},children:this.state.posts.map((function(t,s){return Object(re.jsxs)("div",{className:e.getClassName(t.name),children:[Object(re.jsxs)("h4",{className:"center_h4",children:[Object(re.jsx)("a",{children:t.name}),Object(re.jsx)("span",{className:"long-dash"}),Object(re.jsx)("span",{className:"short-dash"}),Object(re.jsx)("span",{className:"short-dash"})]}),Object(re.jsx)("h4",{className:"community-news-parent",children:Object(re.jsx)(h.b,{to:"community-news/"+t.slug,className:"community-news-link",children:"Community"})}),Object(re.jsx)("ul",{className:"topics",children:t.subcategories.map((function(t,s){return Object(re.jsx)("li",{children:e.getCategoryLink(t.slug,t.name,{})},"SUB_CAT_".concat(s))}))})]},"POST_".concat(s))}))})})})})})}},{key:"render",value:function(){var e=0;try{e=this.props.searchvalue[0].slug.length}catch(t){e=0}return e>0?this.getsearchitem():this.state.loading?this.renderLoading():this.renderPosts()}}]),s}(i.Component);var fe=Object(u.b)((function(e){return{searchvalue:e.searchvalue.searchval}}),{setPage:be})(Object(Q.g)(Object(ue.a)(ge))),Oe=s(215),ve={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Seattle",state:"Washington",image:"https://upload.wikimedia.org/wikipedia/commons/3/36/SeattleI5Skyline.jpg",message:"Foo",iconSize:[35,35]},geometry:{type:"Point",coordinates:[-122.3320708,47.6062095]}},{type:"Feature",properties:{title:"Los Angeles",state:"California",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/5/57/LA_Skyline_Mountains2.jpg/240px-LA_Skyline_Mountains2.jpg",message:"Bar",iconSize:[35,35]},geometry:{type:"Point",coordinates:[-118.4108,34.0194]}},{type:"Feature",properties:{title:"Chicago",state:"Illinois",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/8/85/2008-06-10_3000x1000_chicago_skyline.jpg/240px-2008-06-10_3000x1000_chicago_skyline.jpg",message:"Baz",iconSize:[35,35]},geometry:{type:"Point",coordinates:[-87.6818,41.8376]}},{type:"Feature",properties:{title:"San Francisco",state:"California",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/San_Francisco_skyline_from_Coit_Tower.jpg/240px-San_Francisco_skyline_from_Coit_Tower.jpg",message:"Baz",iconSize:[35,35]},geometry:{type:"Point",coordinates:[-122.4193,37.7751]}},{type:"Feature",properties:{title:"Charlotte",state:"North Carolina",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Charlotte_skyline45647.jpg/222px-Charlotte_skyline45647.jpg",message:"Baz",iconSize:[35,35]},geometry:{type:"Point",coordinates:[-80.8307,35.2087]}}]};function ye(){var e=Object(i.useState)({latitude:37.773972,longitude:-122.431297,width:"100%",height:"100vh",zoom:3}),t=Object(d.a)(e,2),s=t[0],a=t[1],r=Object(i.useState)(null),n=Object(d.a)(r,2),c=n[0],o=n[1];return Object(i.useEffect)((function(){var e=function(e){"Escape"===e.key&&o(null)};return"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){a({longitude:e.coords.longitude,latitude:e.coords.latitude,width:"100%",height:"100vh",zoom:13})})):navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state||"prompt"===e.state?console.log(e.state):"denied"===e.state&&console.log("denied"),e.onchange=function(){console.log(e.state)}})),function(){window.removeEventListener("keydown",e)}}),[]),Object(re.jsx)("div",{children:Object(re.jsxs)(Oe.c,Object(g.a)(Object(g.a)({},s),{},{mapboxApiAccessToken:"pk.eyJ1IjoiZG9ubnlkZXkiLCJhIjoiY2pvcDU2eHMyMHU0cDN3bXNsZXp4NmFzdCJ9.wFzZqhxa1-_fRLOWQjyLxg",mapStyle:"mapbox://styles/donnydey/cjt3u70n00a0v1fmwq7scm1wv",onViewportChange:function(e){a(e)},children:[ve.features.map((function(e,t){return Object(re.jsx)(Oe.a,{latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0],children:Object(re.jsx)("img",{onClick:function(t){t.preventDefault(),o(e)},src:e.properties.image,width:e.properties.iconSize[0],height:e.properties.iconSize[1],style:{borderRadius:"100px",objectFit:"cover"}})},t)})),c?Object(re.jsx)(Oe.b,{latitude:c.geometry.coordinates[1],longitude:c.geometry.coordinates[0],onClose:function(){o(null)},children:Object(re.jsxs)("div",{children:[Object(re.jsx)("img",{width:"100px",src:c.properties.image}),Object(re.jsx)("h2",{children:c.properties.title}),Object(re.jsx)("p",{children:c.properties.state})]})}):null]}))})}var Ne=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("div",{id:"map",children:Object(re.jsx)(ye,{})})}}]),s}(n.a.Component),we=s(12),Se=s(469),_e=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).state={category:"",posts:[],loading:!0,error:null,showClickButton:!1,profileImage:"",RelatedImages1:[]},r.onDrop=r.onDrop.bind(Object(we.a)(r)),r.uploadImage=r.uploadImage.bind(Object(we.a)(r)),r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){this.setState({loading:!1,error:null})}},{key:"renderLoading",value:function(){return Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:""})}},{key:"renderError",value:function(){return Object(re.jsxs)("div",{className:"error-message",children:["Uh oh: ",this.state.error.message]})}},{key:"handleFormSubmit",value:function(e){}},{key:"uploadImage",value:function(){var e=this,t=new FormData;return console.log("formData:",t),fetch("".concat(pe,"/user/update/profile"),{method:"POST",body:t}).then((function(e){return e.json()}),(function(e){console.log("ERR")})).then((function(t){if(t&&null!=t&&void 0!==t&&t.SuccessMessage&&null!==t.SuccessMessage&&void 0!==t.SuccessMessage&&""!==t.SuccessMessage){e.setState({successMessage:"Successfully Uploaded Profile Image",RelatedImages1:"",showClickButton:!1});var s=e.props.cookies.get("user");if(s&&null!==s&&void 0!==s&&""!==s){var a=s._id;e.props.fetchMyProfile(a).then((function(t){e.setState({profileImage:t.data.user.profileImage})}),(function(t){e.setState({errorMessage:"Sorry Couldn't get Information"})}))}}else t&&null!=t&&void 0!==t&&t.errorMessage&&e.setState({errorMessage:t.errorMessage})}))}},{key:"onDrop",value:function(e){console.log("acceptedFiles: ",e),this.setState({RelatedImages1:e,showClickButton:!0})}},{key:"renderPosts",value:function(){var e=this,t=this.props.handleSubmit;return this.state.error?this.renderError():Object(re.jsx)("div",{id:"experts-list",className:"experts-list",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsx)("div",{className:"text-center text-choose",children:"Choose your subject"})})}),Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsxs)("form",{id:"expert_signup_form",onSubmit:t(this.handleFormSubmit.bind(this)),children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseMsg}}),Object(re.jsxs)("div",{className:"row pad15",children:[Object(re.jsxs)("div",{className:"col-md-6",children:[Object(re.jsx)("label",{className:"label-align",children:"Choose Profile Picture"}),this.state.profileImage&&null!==this.state.profileImage&&""!==this.state.profileImage?Object(re.jsx)("div",{children:Object(re.jsx)("img",{height:"120",width:"160",src:"".concat(je)+this.state.profileImage,alt:""})}):"",this.state.RelatedImages1.length>0?Object(re.jsx)("div",{className:"inline-block brdr img_preview_main",children:this.state.RelatedImages1.map((function(e,t){return Object(re.jsx)("div",{className:"img_preview",children:Object(re.jsx)("img",{src:e.preview,alt:"Preview Not Available",width:160,height:90})},t)}))}):null,Object(re.jsx)(Se,{className:"inline-block icon",accept:"image/*",multiple:"false",ref:function(t){e.dropzone=t},onDrop:this.onDrop,children:Object(re.jsx)("i",{className:"fa fa-camera"})}),!0===this.state.showClickButton&&Object(re.jsx)("div",{className:"inline-block Upload-button",children:Object(re.jsxs)("button",{onClick:this.uploadImage,className:"btn Btn_common",style:{"padding-top":"15px","padding-bottom":"15px"},children:[Object(re.jsx)("i",{className:"fa fa-paper-plane-o","aria-hidden":"true"}),"Update Photo"]})})]}),Object(re.jsxs)("div",{className:"col-md-6",children:[Object(re.jsx)("label",{className:"label-align",children:"Upload Resume"}),Object(re.jsx)(Se,{className:"inline-block icon",accept:"application/*",multiple:"false",ref:function(t){e.dropzone=t},onDrop:this.onDropResume,children:Object(re.jsx)("i",{className:"fa fa-file"})})]})]})]})})]})})})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:this.state.loading?this.renderLoading():this.renderPosts()})}}]),s}(i.Component),ke=Object(ue.a)(_e),Ce=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),r=t.call(this,e,a),function(){var e=document,t=e.createElement("script");t.src="https://donnieslist.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}(),r}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("div",{id:"experts-list",className:"experts-list",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("div",{id:"disqus_thread"}),Object(re.jsxs)("noscript",{children:["Please enable JavaScript to view the",Object(re.jsx)("a",{href:"https://disqus.com/?ref_noscript",children:"comments powered by Disqus."})]})]})})})})}}]),s}(i.Component),Re=s(479),Me=s.n(Re),Le=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).state={loading:!0,error:null},r}return Object(te.a)(s,[{key:"responseFacebook",value:function(e){console.log("^^^^^ response ^^^^^^: ",e)}},{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"renderLoading",value:function(){return Object(re.jsx)("img",{className:"loader-center",src:"https://www.donnieslist.com/img/ajax-loader.gif",alt:""})}},{key:"renderError",value:function(){return Object(re.jsxs)("div",{className:"error-message",children:["Uh oh: ",this.state.error.message]})}},{key:"renderPosts",value:function(){return this.state.error?this.renderError():Object(re.jsx)("div",{id:"how-it-works-wrapper",className:"how-it-works-wrapper",children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"Privacy Policy"})}),Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)(Me.a,{appId:"979601722141411",autoLoad:!0,fields:"name,email,picture",scope:"public_profile,user_friends",callback:this.responseFacebook})})})})]})})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:this.state.loading?this.renderLoading():this.renderPosts()})}}]),s}(i.Component),Ue=s(468),Ee=s(467),Ie=s(480),Ae=s(475),Te=new Ae.a;function De(e){return function(t){var s=Te.get("user")._id;oe.a.get("".concat(pe,"/auth/logout/").concat(s)),t({type:O,payload:e||""}),Te.remove("token",{path:"/"}),Te.remove("user",{path:"/"}),Te.remove("token",{path:"/"}),window.location.href="".concat(me,"/login")}}function Fe(){return function(e){oe.a.get("".concat(pe,"/protected"),{headers:{Authorization:Te.get("token")}}).then((function(t){e({type:w,payload:t.data.content})})).catch((function(t){$e(e,t.response,v)}))}}var Pe=Ie.io.connect(pe),Be=new Ae.a;function $e(e,t,s){var a,r=t.response?t.response.data:t;if(401===(null===t||void 0===t?void 0:t.status)||401===(null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.status))return e(De(r="You are not authorized to do this."));e({type:s,payload:r})}function ze(e,t,s,a,r,i){var n=Be.get("token"),c=pe+a,o={};return s&&(o={headers:{Authorization:n}}),oe.a.post(c,i,o).then((function(t){return r({type:e,payload:t.data}),t})).catch((function(e){$e(r,e.response,t)}))}function qe(e,t,s,a,r){var i=pe+a,n=Be.get("token"),c={};return s&&(c={headers:{Authorization:n}}),oe.a.get(i,c).then((function(t){return r({type:e,payload:t.data}),t})).catch((function(e){$e(r,e.response,t)}))}function He(e,t,s,a,r,i){var n=pe+a,c=Be.get("token"),o={};return s&&(o={headers:{Authorization:c}}),oe.a.put(n,i,o).then((function(t){return r({type:e,payload:t.data}),t})).catch((function(e){$e(r,e.response,t)}))}var Ye=Object(Ue.a)({form:"contact-form"}),We=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"text",required:!0,placeholder:"Your input here",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Ve=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"email",required:!0,placeholder:"Your email here",className:"form-control emailField"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Je=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("textarea",Object(g.a)({required:!0,rows:"3",placeholder:"Your message here",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Ge=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"handleFormSubmit",value:function(e){var t=e.firstName,s=e.lastName,a=e.emailAddress,r=e.subject,i=e.message;this.props.sendContactForm({firstName:t,lastName:s,emailAddress:a,subject:r,message:i})}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("strong",{children:"Oops!"})," ",this.props.errorMessage]})}},{key:"renderMessage",value:function(){if(this.props.message)return Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Success!"})," ",this.props.message]})}},{key:"render",value:function(){var e=this.props.handleSubmit;return Object(re.jsx)("div",{id:"how-it-works-wrapper",className:"how-it-works-wrapper",children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"Contact Us"})}),Object(re.jsx)("div",{className:"col-xs-12 col-sm-12 col-lg-4",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-xs-12 col-sm-12 col-lg-12",children:Object(re.jsxs)("div",{className:"box",children:[Object(re.jsx)("div",{className:"icon",children:Object(re.jsxs)("div",{className:"info",children:[Object(re.jsxs)("div",{className:"sec-user-info",children:[Object(re.jsx)("div",{className:"text-left",children:Object(re.jsx)("h3",{className:"title-user-info",children:"Patrick H."})}),Object(re.jsxs)("div",{className:"text-left",children:[Object(re.jsx)("i",{className:"fa fa-mobile fa-cs-mobile","aria-hidden":"true"}),"\xa0 +1 (209) 568-7870"]}),Object(re.jsxs)("div",{className:"text-left",children:[Object(re.jsx)("i",{className:"fa fa-envelope fa-cs-env","aria-hidden":"true"}),"\xa0",Object(re.jsx)("a",{href:"mailto:patrickhaledonnieslist@gmail.com",children:"patrickhaledonnieslist@gmail.com"})]})]}),Object(re.jsxs)("div",{className:"sec-user-info",children:[Object(re.jsx)("div",{className:"text-left",children:Object(re.jsx)("h3",{className:"title-user-info",children:"Donny D."})}),Object(re.jsxs)("div",{className:"text-left",children:[Object(re.jsx)("i",{className:"fa fa-mobile fa-cs-mobile","aria-hidden":"true"}),"\xa0 +1 (423) 316-9050"]}),Object(re.jsxs)("div",{className:"text-left",children:[Object(re.jsx)("i",{className:"fa fa-envelope fa-cs-env","aria-hidden":"true"}),"\xa0",Object(re.jsx)("a",{href:"mailto:donnydey@gmail.com",children:"donnydey@gmail.com"})]})]})]})}),Object(re.jsx)("div",{className:"space"})]})})})}),Object(re.jsx)("div",{className:"col-xs-12 col-sm-12 col-lg-8",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-xs-12 col-sm-12 col-lg-12",children:Object(re.jsx)("div",{className:"box",children:Object(re.jsx)("div",{className:"icon",children:Object(re.jsx)("div",{className:"info",children:Object(re.jsxs)("form",{onSubmit:e(this.handleFormSubmit.bind(this)),children:[this.renderMessage(),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"First Name"}),Object(re.jsx)(Ee.a,{name:"firstName",component:We,type:"text"})]})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"Last Name"}),Object(re.jsx)(Ee.a,{name:"lastName",component:We,type:"text"})]})})]}),Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"Email Address"}),Object(re.jsx)(Ee.a,{name:"emailAddress",component:Ve,type:"email"})]})})}),Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"Subject"}),Object(re.jsx)(Ee.a,{name:"subject",component:We,type:"text"})]})})}),Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"Message"}),Object(re.jsx)(Ee.a,{name:"message",rows:"3",component:Je,type:"text"})]})})}),this.renderAlert(),Object(re.jsx)("button",{action:"submit",className:"btn btn-primary",children:"Send"})]})})})})})})})]})})}}]),s}(i.Component);var Ke=Object(u.b)((function(e){return{errorMessage:e.communication.error,message:e.communication.message,authenticated:e.auth.authenticated}}),{sendContactForm:function(e){var t=e.firstName,s=e.lastName,a=e.emailAddress,r=e.subject,i=e.message;return function(e){oe.a.post("".concat(pe,"/communication/contact"),{firstName:t,lastName:s,emailAddress:a,subject:r,message:i}).then((function(t){e({type:I,payload:t.data.message})})).catch((function(t){$e(e,t.response,"static_error")}))}}})(Ye(Ge)),Ze=new Ae.a,Xe=function(e){var t=e.email,s=e.message,a=e.expertemail;return function(e){if(a="mohit@rvtechnologies.co.in",console.log(s,t),void 0!==s&&void 0!==t)return oe.a.post("".concat(pe,"/sendEmailMessageToExpert"),{email:t,message:s,expertemail:a}).then((function(t){return e({type:$,payload:t.data}),t.data})).catch((function(t){$e(e,t.response,v)}))}};function Qe(e){var t=e.text_email,s=e.text_message,a=e.text_expert_email;return function(e){if(void 0!==t&&void 0!==s&&void 0!==a)return oe.a.post("".concat(pe,"/sendTextMessageToExpert"),{text_email:t,text_message:s,text_expert_email:a}).then((function(t){return e({type:"send_expert_text_message",payload:t.data}),t.data})).catch((function(t){$e(e,t.response,v)}));console.log("^^^^^^^ NO EMAIL")}}function et(e){var t=e.firstName,s=e.lastName,a=e.email,r=e.password,i=e.userBio,n=e.expertContact,c=e.expertContactCC,o=e.expertRates,l=e.expertCategories,d=e.expertRating,u=e.expertFocusExpertise,h=e.yearsexpertise,m=e.facebookLink,p=e.twitterLink,j=e.instagramLink,b=e.linkedinLink,x=e.snapchatLink,g=e.expertUniversity;return function(e){return oe.a.post("".concat(pe,"/createExpert"),{firstName:t,lastName:s,email:a,password:r,expertContact:n,expertContactCC:c,userBio:i,expertRates:o,expertCategories:l,expertRating:d,expertFocusExpertise:u,yearsexpertise:h,facebookLink:m,twitterLink:p,instagramLink:j,linkedinLink:b,snapchatLink:x,expertUniversity:g}).then((function(t){return e({type:z,payload:t.data}),t.data})).catch((function(t){$e(e,t.response,v)}))}}function tt(e){var t=e.expertEmail,s=e.userEmail;return function(e){return oe.a.post("".concat(pe,"/videosession/check-before-session-start"),{expertEmail:t,userEmail:s}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}function st(e){return function(t){if(console.log(e),void 0!==e.expertEmail&&void 0!==e.userEmail)return oe.a.post("".concat(pe,"/createVideoSession"),e).then((function(e){return e.data})).catch((function(e){$e(t,e.message,v)}))}}function at(e){return function(t){if(void 0!==e.expertEmail&&void 0!==e.userEmail)return oe.a.get("".concat(pe,"/getVideoSession/").concat(e.expertEmail,"/").concat(e.userEmail)).then((function(e){return e.data})).catch((function(e){$e(t,e.message,v)}))}}function rt(e){var t=e.stripeToken,s=e.expertSlug,a=e.userEmail,r=e.amount;return function(e){return oe.a.post("".concat(pe,"/videosession/recharge-video-session"),{stripeToken:t,userEmail:a,amount:r}).then((function(e){"succeeded"===e.data.response.stripePaymentStatus?window.location.href="".concat(me,"/mysession/")+s:console.log("in else "+s)})).catch((function(e){console.log("err: "+e)}))}}function it(e){var t=e.expertEmail,s=e.userEmail,a=e.archiveSessionId;return function(e){return oe.a.post("".concat(pe,"/start_recording"),{expertEmail:t,userEmail:s,archiveSessionId:a}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}function nt(e){var t=e.expertEmail,s=e.userEmail,a=e.archiveID;return function(e){return oe.a.get("".concat(pe,"/stop_recording/").concat(t,"/").concat(s,"/").concat(a)).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}function ct(e){var t=e.expertSlug;return function(e){return oe.a.get("".concat(pe,"/getExpertReviews/").concat(t)).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}var ot=s(492),lt=(s(701),s(17)),dt={weekday:"long",year:"numeric",month:"long",day:"numeric"},ut=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).onCalendarChange=function(e){return r.setState({date:new Date(e)})},r.state={responseTextMsg:"",currentUser:r.props.cookies.get("user"),selectMins:0,disableAddToWalletBtn:!1,walletSuccess:!1,walletError:!1,walletMessage:r.props.modalMessage,walletDefault:!0,date:new Date},r.addMoneyToWallet=r.addMoneyToWallet.bind(Object(we.a)(r)),r.selectMins=r.selectMins.bind(Object(we.a)(r)),r.startNowSession=r.startNowSession.bind(Object(we.a)(r)),r.sendSessionRequest=r.sendSessionRequest.bind(Object(we.a)(r)),r}return Object(te.a)(s,[{key:"startNowSession",value:function(){window.jQuery(".scheduleSuccess").show(),window.jQuery(".scheduleDiv").hide()}},{key:"selectMins",value:function(e){this.setState({selectMins:parseInt(e.target.value)})}},{key:"sendSessionRequest",value:function(){var e=this,t=this.state.currentUser?this.state.currentUser.email:"",s={requestedMinutes:this.state.selectMins,requestedDate:this.state.date,userEmail:t,expertEmail:this.props.expert.email,sessionCompletionStatus:"UNCOMPLETED"};this.props.createAudioSession(s).then((function(t){console.log(t),t.success&&(e.props.toggleCallLinks(),window.jQuery(".scheduleSuccess").show(),window.jQuery(".scheduleDiv").hide())}))}},{key:"addMoneyToWallet",value:function(e){var t=this;e.preventDefault(),this.setState({disableAddToWalletBtn:!0});try{var s=this.state.selectMins,a=this.props.userEmail,r=this.props.expertSlug,i=this.state.currentUser?this.state.currentUser.customerId:"";this.props.addMoneyToWallet({customer_id:i,expertSlug:r,userEmail:a,amount:s}).then((function(e){1===e.status?t.setState({walletSuccess:!0,walletDefault:!1,walletError:!1,walletMessage:e.message}):t.setState({walletError:!0,walletDefault:!1,disableAddToWalletBtn:!1,walletMessage:e.message})}),(function(e){return e.response.json().then((function(t){t.errors;console.log("err: "+JSON.stringify(e))}))}))}catch(e){}}},{key:"onToken",value:function(e){try{var t=this.state.selectMins,s=this.props.userEmail,a=this.props.expertSlug;this.props.addMoneyToWallet({stripeToken:e,expertSlug:a,userEmail:s,amount:t}).then((function(e){console.log("response: "+JSON.stringify(e))}),(function(e){return e.response.json().then((function(t){t.errors;console.log("err: "+JSON.stringify(e))}))}))}catch(r){}}},{key:"render",value:function(){var e=lt({"alert alert-success":this.state.walletSuccess,"alert alert-danger":this.state.walletError});return Object(re.jsx)("div",{id:this.props.modalId,className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header text-center",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Message"})]}),Object(re.jsxs)("div",{className:"modal-body text-center",children:[Object(re.jsx)("div",{className:e,children:this.state.walletMessage}),Object(re.jsx)("div",{className:"scheduleDiv",style:{marginBottom:"10px"},children:"Please select date from the calendar you want to spend with expert"}),Object(re.jsxs)("div",{className:"form-group row",children:[Object(re.jsx)("div",{style:{display:"none"},className:"col-md-12 scheduleSuccess",children:Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Video Session Scheduled Successfully ! "}),"You Will Get Notified By Email Once Experts Confirms."]})}),Object(re.jsxs)("div",{className:"col-md-12 scheduleDiv",children:[Object(re.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(re.jsx)(ot.a,{onChange:this.onCalendarChange,value:this.state.date})}),this.state.date&&Object(re.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(re.jsxs)("p",{children:["Selected Date:",Object(re.jsx)("span",{style:{fontWeight:"bold"},children:this.state.date.toLocaleDateString("en-US",dt)})]})})]})]}),Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseTextMsg}})]}),Object(re.jsx)("div",{className:"modal-footer scheduleDiv",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsx)("button",{onClick:this.startNowSession,className:"btn btn-primary",children:"Start Now"})})})})]})})})}}]),s}(i.Component);var ht=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message}}),{rechargeVideoSession:rt,addMoneyToWallet:function(e){var t=e.customer_id,s=(e.expertSlug,e.userEmail),a=e.amount;return function(e){return oe.a.post("".concat(pe,"/videosession/add-money-to-wallet"),{customer_id:t,userEmail:s,amount:a}).then((function(e){return e.data})).catch((function(e){console.log("err: "+e)}))}},createAudioSession:st})(Object(ue.a)(ut)),mt=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).addEndorsements=function(e){var t=r.props.cookies.get("user");if(t){var s=t.slug;t.myFavorite.push(e),r.props.cookies.set("user",t,{path:"/"});var a={toSlug:e,fromSlug:s};oe.a.post("".concat(pe,"/addEndorsements/"),a).then((function(t){r.props.history.push("/expert/"+r.props.match.params.category+"/"+e)})).catch((function(t){r.props.history.push("/expert/"+r.props.match.params.category+"/"+e)}))}else r.props.history.push("/login")},r.state={category:"",responseMsg:"",isUserLoggedIn:"",posts:[],topRated:[],myFavorite:[],error:null,selectedExpertSlug:""},window.$(document).ready((function(){window.$(document).on("click",".show_message_form",(function(){window.$("#msg-form").toggleClass("displayNone")}))})),r}return Object(te.a)(s,[{key:"handleFormSubmit",value:function(e){var t=this;this.props.sendEmail(e).then((function(e){t.setState({responseMsg:e.message})}),(function(e){return e.response.json().then((function(e){var s=e.errors;t.setState({responseMsg:s})}))}))}},{key:"componentDidMount",value:function(){var e=this;this.props.setPage("0");var t=this.props.match.params.category;oe.a.get("".concat(pe,"/getExpertsListing/").concat(t)).then((function(t){var s=t.data,a=t.data.name;e.setState({posts:s,category:a,error:null})})).catch((function(t){e.setState({category:"",error:t})})),oe.a.get("".concat(pe,"/getExpertsListing/topRated/").concat(t)).then((function(t){var s=t.data;e.setState({topRated:s,error:null})})).catch((function(t){e.setState({category:"",error:t})}));var s=this.props.cookies.get("user");if(s){var a=s.myFavorite;oe.a.post("".concat(pe,"/getMyExpertsListing/"),{slug:a,category:t}).then((function(t){e.setState({myFavorite:t.data,loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))}}},{key:"renderImage",value:function(){return Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:""})}},{key:"renderError",value:function(){return void 0===this.state.posts?Object(re.jsx)("div",{className:"alert-danger alert",children:"Alas, No expert found in this category!"}):Object(re.jsxs)("div",{className:"alert-danger alert",children:["Uh oh: ",this.state.error.message]})}},{key:"getStars",value:function(e){var t=16*Math.max(0,Math.min(5,e));return Object.assign({width:t})}},{key:"getOnlineStatus",value:function(e){return"ONLINE"===e}},{key:"getOnlineStatusTitle",value:function(e){return"ONLINE"===e?"Online":"Offline"}},{key:"selectVideoSessionMinutes",value:function(e,t){this.setState({selectedExpertSlug:e.slug}),window.$(".notification-modal").trigger("click")}},{key:"redirectToLogin",value:function(e){e.preventDefault(),this.props.history.push("/login"),this.props.cookies.set("requiredLogin_for_session","Please login to start video session",{path:"/",secure:!1,sameSite:"Lax"})}},{key:"render",value:function(){var e=this,t=this.props.cookies.get("user");if(this.state.error)return Object(re.jsx)("div",{id:"experts-list",className:"experts-list section-padding",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.category})]}),Object(re.jsx)("div",{id:"center",children:Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:this.props.match.params.category}),this.renderError()]})})]})})})});var s={background:"#ffffff",padding:15};return Object(re.jsx)("div",{id:"experts-list",className:"experts-list",children:Object(re.jsx)("div",{className:"expertise-tab-wrap",children:Object(re.jsx)("div",{className:"expertise-inner",children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.category})]}),Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:this.props.match.params.category}),Object(re.jsx)("div",{className:"small",children:"Select any one of the experts below to view their profile"})]}),Object(re.jsx)("br",{}),Object(re.jsxs)("ul",{className:"nav nav-tabs",role:"tablist",children:[Object(re.jsx)("li",{role:"presentation",className:"active",children:Object(re.jsx)("a",{href:"#home","aria-controls":"home",role:"tab","data-toggle":"tab",children:"Latest"})}),Object(re.jsx)("li",{role:"presentation",children:Object(re.jsx)("a",{href:"#profile","aria-controls":"profile",role:"tab","data-toggle":"tab",children:"Top Rated"})}),Object(re.jsx)("li",{role:"presentation",children:Object(re.jsx)("a",{href:"#my_favorite","aria-controls":"settings",role:"tab","data-toggle":"tab",children:"My Favorites"})})]}),Object(re.jsxs)("div",{className:"tab-content",children:[Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane active",id:"home",children:Object(re.jsxs)("div",{className:"expertise-all-detail-wrap",children:[console.log(this.state.posts),this.state.posts.map((function(t,a){return Object(re.jsx)("div",{className:"expertise-detail-only",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-8",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-2",style:s,children:Object(re.jsxs)("div",{className:"img-exper",children:[t.profileImage&&null!==t.profileImage&&void 0!==t.profileImage&&""!==t.profileImage?Object(re.jsx)("img",{width:"100",alt:"",src:"".concat(je)+t.profileImage}):Object(re.jsx)("img",{src:"/img/pro1.png",alt:""}),"ONLINE"===t.onlineStatus&&Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online-o fa fa-circle","aria-hidden":"true"})]})}),Object(re.jsx)("div",{className:"col-sm-10",children:Object(re.jsxs)("div",{className:"person-per-info",children:[Object(re.jsx)(h.b,{to:"/expert/".concat(e.props.match.params.category,"/").concat(t.slug),children:Object(re.jsxs)("h2",{children:[t.profile.firstName,t.profile.lastName]})}),Object(re.jsxs)("p",{children:["University: ",t.university]}),Object(re.jsxs)("p",{children:["Area of Expertise: ",t.expertCategories]}),Object(re.jsxs)("p",{children:["Focus of Expertise:",t.expertFocusExpertise]}),Object(re.jsxs)("p",{children:["Years of Expertise: ",t.yearsexpertise]}),Object(re.jsxs)("p",{children:["Rating:",t.expertRating&&null!=t.expertRating&&void 0!==t.expertRating&&""!==t.expertRating?t.expertRating:"No Ratings Available Yet",t.expertRating&&""!==t.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]})})]})}),Object(re.jsxs)("div",{className:"col-sm-4",children:[Object(re.jsx)("div",{className:"stars-review",children:Object(re.jsx)("span",{className:"stars right",children:Object(re.jsx)("span",{style:e.getStars(t.expertRating)})})}),Object(re.jsx)("div",{className:"btn-expertise",children:Object(re.jsx)("div",{className:"Start-Session btn-strt-session btn btn-primary pull-right",onClick:function(s){return e.addEndorsements(t.slug)},children:"Add Expert"})})]})]})},"POST_INDEX_".concat(a))})),this.state.posts&&null!=this.state.posts&&void 0!==this.state.posts&&0===this.state.posts.length&&Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane",id:"settings",children:Object(re.jsx)("div",{className:"expertise-all-detail-wrap",children:Object(re.jsx)("div",{className:"alert alert-danger",children:"No expert found in this section!"})})})]})}),Object(re.jsx)("div",{children:t?Object(re.jsx)(ht,{userEmail:t.email,expertSlug:this.state.selectedExpertSlug,modalId:"notificationModal"}):""}),Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane",id:"profile",children:Object(re.jsxs)("div",{className:"expertise-all-detail-wrap",children:[this.state.topRated.map((function(t,a){return Object(re.jsx)("div",{className:"expertise-detail-only",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-8",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-2",style:s,children:Object(re.jsxs)("div",{className:"img-exper",children:[t.profileImage&&null!=t.profileImage&&void 0!==t.profileImage&&""!==t.profileImage?Object(re.jsx)("img",{width:"100",src:"".concat(je)+t.profileImage,alt:""}):Object(re.jsx)("img",{src:"/img/pro1.png",alt:""}),e.getOnlineStatus(t.onlineStatus)&&Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online-o fa fa-circle","aria-hidden":"true"})]})}),Object(re.jsx)("div",{className:"col-sm-10",children:Object(re.jsxs)("div",{className:"person-per-info",children:[Object(re.jsx)(h.b,{to:"/expert/".concat(e.props.match.params.category,"/").concat(t.slug),children:Object(re.jsxs)("h2",{children:[t.profile.firstName,t.profile.lastName]})}),Object(re.jsxs)("p",{children:["About Expert: ",t.userBio]}),Object(re.jsxs)("p",{children:["Area of Expertise: ",t.expertCategories]}),Object(re.jsxs)("p",{children:["Country:",t.locationCountry&&""!==t.locationCountry&&null!==t.locationCountry&&void 0!==t.locationCountry?t.locationCountry:"-"]}),Object(re.jsxs)("p",{children:["State:",t.locationState&&""!==t.locationState&&null!==t.locationState&&void 0!==t.locationState?t.locationState:"-"]}),Object(re.jsxs)("p",{children:["City:",t.locationCity&&""!==t.locationCity&&null!==t.locationCity&&void 0!==t.locationCity?t.locationCity:"-"]}),Object(re.jsxs)("p",{children:["Focus of Expertise:",t.expertFocusExpertise]}),Object(re.jsxs)("p",{children:["Years of Expertise: ",t.yearsexpertise]}),Object(re.jsxs)("p",{children:["Rating: ",t.expertRating,t.expertRating&&""!==t.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]})})]})}),Object(re.jsxs)("div",{className:"col-sm-4",children:[Object(re.jsx)("div",{className:"stars-review",children:Object(re.jsx)("span",{className:"stars right",children:Object(re.jsx)("span",{style:e.getStars(t.expertRating)})})}),Object(re.jsx)("div",{className:"btn-expertise",children:Object(re.jsx)("button",{className:"btn-strt-session btn btn-primary pull-right",onClick:function(s){return e.addEndorsements(t.slug)},children:"Connect"})})]})]})},"TAB_ITEM_".concat(a))})),this.state.topRated&&null!==this.state.topRated&&void 0!==this.state.topRated&&0===this.state.topRated.length&&Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane",id:"settings",children:Object(re.jsx)("div",{className:"expertise-all-detail-wrap",children:Object(re.jsx)("div",{className:"alert alert-danger",children:"No expert found in this section!"})})})]})}),Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane",id:"messages",children:Object(re.jsx)("div",{className:"expertise-all-detail-wrap",children:Object(re.jsx)("div",{className:"alert alert-danger",children:"No expert found in this section!"})})}),Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane",id:"my_favorite",children:Object(re.jsxs)("div",{className:"expertise-all-detail-wrap",children:[this.state.myFavorite.map((function(a,r){return Object(re.jsx)("div",{className:"expertise-detail-only",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-8",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"col-sm-2",style:s,children:Object(re.jsxs)("div",{className:"img-exper",children:[a.profileImage&&null!==a.profileImage&&void 0!==a.profileImage&&""!==a.profileImage?Object(re.jsx)("img",{width:"100",src:"".concat(je)+a.profileImage,alt:""}):Object(re.jsx)("img",{src:"/img/pro1.png",alt:""}),e.getOnlineStatus(a.onlineStatus)&&Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online-o fa fa-circle","aria-hidden":"true"})]})}),Object(re.jsx)("div",{className:"col-sm-10",children:Object(re.jsxs)("div",{className:"person-per-info",children:[Object(re.jsx)(h.b,{to:"/expert/".concat(e.props.match.params.category,"/").concat(a.slug),children:Object(re.jsxs)("h2",{children:[a.profile.firstName,a.profile.lastName]})}),Object(re.jsxs)("p",{children:["University: ",a.university]}),Object(re.jsxs)("p",{children:["Area of Expertise: ",a.expertCategories]}),Object(re.jsxs)("p",{children:["Focus of Expertise:",a.expertFocusExpertise]}),Object(re.jsxs)("p",{children:["Years of Expertise: ",a.yearsexpertise]}),Object(re.jsxs)("p",{children:["Rating:",a.expertRating&&null!=a.expertRating&&void 0!==a.expertRating&&""!==a.expertRating?a.expertRating:"No Ratings Available Yet",a.expertRating&&""!==a.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]})})]})}),Object(re.jsxs)("div",{className:"col-sm-4",children:[Object(re.jsx)("div",{className:"stars-review",children:Object(re.jsx)("span",{className:"stars right",children:Object(re.jsx)("span",{style:e.getStars(a.expertRating)})})}),Object(re.jsx)("div",{className:"btn-expertise",children:t?Object(re.jsx)(h.b,{to:"/#","data-toggle":"modal",title:"Start Video Session","data-target":"#notificationModal",onClick:e.selectVideoSessionMinutes.bind(e,a),"data-slug":a.slug,className:"Start-Session btn-strt-session btn btn-primary pull-right",children:"Connect"}):Object(re.jsx)("div",{onClick:e.redirectToLogin.bind(e),className:"Start-Session btn-strt-session btn btn-primary pull-right",children:"Connect"})})]})]})},"FAVORITE_".concat(r))})),this.state.myFavorite&&null!=this.state.myFavorite&&void 0!==this.state.myFavorite&&0===this.state.myFavorite.length&&Object(re.jsx)("div",{role:"tabpanel",className:"tab-pane",id:"settings",children:Object(re.jsx)("div",{className:"expertise-all-detail-wrap",children:Object(re.jsx)("div",{className:"alert alert-danger",children:"No expert found in this section!"})})})]})})]})]})})})})}}]),s}(i.Component);var pt=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}}),{sendEmail:Xe,isLoggedIn:function(){return function(e){oe.a.get("".concat(pe,"/protected"),{headers:{Authorization:Ze.get("token")}}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}},setPage:be})(Object(Q.g)(Object(ue.a)(mt))),jt=s(39),bt=s(201),xt=s.n(bt),gt=s(1081),ft=s(209),Ot=s(493),vt=s(44),yt=s.n(vt),Nt=!1,wt=function(e){var t={expertSlug:e.expertSlug,expertReviews:[]},s=Object(i.useState)(t),a=Object(d.a)(s,2),r=a[0],n=a[1],c=Object(u.c)();Object(i.useEffect)((function(){Nt=!0;var e=r.expertSlug;return Nt&&c(ct({expertSlug:e})).then((function(e){Nt&&n((function(t){return Object(g.a)(Object(g.a)({},t),{},{expertReviews:e.reviews})}))})).catch((function(e){console.log(e)})),function(){Nt=!1}}),[]);return Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:"col-sm-12",children:function(){var e=r.expertReviews,t=e.slice(0,4),s=e.slice(4);return 0===e.length?Object(re.jsx)("div",{className:"review-outside",children:Object(re.jsx)("h4",{className:"alert alert-warning",children:"No reviews submitted yet."})}):Object(re.jsxs)("div",{className:"review-outside",children:[t.map((function(e,t){return Object(re.jsxs)("div",{className:"review-section-wrap",children:[Object(re.jsxs)("div",{className:"review-star",children:[Object(re.jsxs)("span",{children:[e.rating,"t",Object(re.jsx)("span",{children:"\u2605"})]}),Object(re.jsxs)("h3",{children:[Object(re.jsx)("strong",{children:e.userFullName}),Object(re.jsx)("p",{className:"time-review",children:yt()(e.createdAt).fromNow()})]})]}),Object(re.jsx)("div",{className:"comment-review",children:Object(re.jsx)("p",{children:e.review})})]},t)})),Object(re.jsx)(Ot.a,{in:r.open,className:"expert-reviews-collapse",children:Object(re.jsx)("div",{children:s.map((function(e,t){return Object(re.jsxs)("div",{className:"review-section-wrap",children:[Object(re.jsxs)("div",{className:"review-star",children:[Object(re.jsxs)("span",{children:[e.rating,Object(re.jsx)("span",{children:"\u2605"})]}),Object(re.jsx)("h3",{children:e.title})]}),Object(re.jsx)("div",{className:"comment-review",children:Object(re.jsx)("p",{children:e.review})})]},t)}))})}),Object(re.jsx)("div",{className:"view-all-wrap",style:{display:s.length?"block":"none"},children:Object(re.jsx)("a",{onClick:function(){return n(Object(g.a)(Object(g.a)({},r),{},{open:!r.open}))},children:r.open?"View some reviews":"View all reviews"})})]})}()})})},St=s(1082),_t=s(99),kt=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).state={loading:!1,error:"",expertEmail:"",apiKey:"",apiSecret:"",apiToken:"",currentUser:r.props.cookies.get("user"),startAudioRecording:!1,archiveSessionId:"",archiveStreamtoken:"",archiveID:"",connectionId:"",showRecordingPopup:!1,pubOptions:{width:150,height:150,insertMode:"append"},publisher:"",sessionObj:"",totalSeconds:0,refreshIntervalId:"",recording_audio_call_minutes:"00",recording_audio_call_seconds:"00"},r.setTime=r.setTime.bind(Object(we.a)(r)),r.abortController=new AbortController,r._isMounted=!1,r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.expertSlug;this._isMounted=!0;var s=this;this._isMounted&&oe.a.get("".concat(pe,"/getExpertDetail/").concat(t),{signal:this.abortController.signal}).then((function(t){s._isMounted&&e.setState({expertEmail:t.data[0].email})})).catch((function(t){s._isMounted&&e.setState({loading:!1,error:t})}))}},{key:"setTime",value:function(){var e=this.state.totalSeconds;++e;var t=this.pad(e%60),s=this.pad(parseInt(e/60));this.setState({totalSeconds:e,recording_audio_call_minutes:s,recording_audio_call_seconds:t})}},{key:"pad",value:function(e){var t=e+"";return t.length<2?"0"+t:t}},{key:"startAudioRecording",value:function(){var e=this,t=this.state.expertEmail,s=this.state.currentUser.email,a=this.state.archiveSessionId;this.props.startRecording({expertEmail:t,userEmail:s,archiveSessionId:a}).then((function(t){console.log("**** startRecording success ****"+JSON.stringify(t)),e.setState({archiveID:t.archive.id,startAudioRecording:!0});var s=setInterval(e.setTime,1e3);e.setState({refreshIntervalId:s})}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** startRecording error ****"+JSON.stringify(t))}))}))}},{key:"stopAudioRecording",value:function(){var e=this;this.setState({});var t=this,s=this.state.expertEmail,a=this.state.currentUser.email,r=this.state.archiveID;this.props.stopRecording({expertEmail:s,userEmail:a,archiveID:r}).then((function(s){var a=e.state.refreshIntervalId;clearInterval(a),e.setState({totalSeconds:0,refreshIntervalId:"",recording_audio_call_minutes:"00",recording_audio_call_seconds:"00",recordingResponse:"<div class='alert alert-success alert-success-custom text-center'>Message successfully sent!</div>"}),setTimeout((function(){t.setState({showRecordingPopup:!1}),t.state.sessionObj.disconnect()}),2e3)}),(function(e){return e.response.json().then((function(e){e.errors}))}))}},{key:"audioRecordingPopup",value:function(e){var t=this;if(!this.state.currentUser)return this.props.history.push("/login"),void this.props.cookies.set("requiredLogin_for_session","Please login to start recording",{path:"/"});var s=this,a=this.state.expertEmail,r=this.state.currentUser.email,i=this.state.archiveSessionId,n=this.state.pubOptions,c=this.state.publisher,o=this.state.sessionObj;"open"===e?(this.setState({loader:!1,showRecordingPopup:!0}),this.props.getArchiveSessionAndToken({expertEmail:a,userEmail:r,archiveSessionId:i}).then((function(e){var a=e.archiveSessionId,r=e.archiveStreamtoken;t.setState({archiveSessionId:a,archiveStreamtoken:r}),o=_t.initSession(he,a),t.setState({sessionObj:o}),o.connect(r,(function(e,t){e?console.log(e.message||e):(c=_t.initPublisher("publisherRecordAudio",n),o.publish(c),c.publishVideo(!1),s.setState({loader:!1,publisher:c}))})),o.on("archiveStarted",(function(e){var t=e.id;s.setState({archiveID:t,startAudioRecording:!0}),console.log("ARCHIVE STARTED")})),o.on("archiveStopped",(function(e){var t=s.state.expertEmail,a=s.state.currentUser.email,r=e.id;setTimeout((function(){s.props.sendRecording({expertEmail:t,userEmail:a,archiveID:r}).then((function(e){console.log("**** sendRecording success ****"+JSON.stringify(e)),r=null,s.setState({archiveID:r})}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** sendRecording error ****"+JSON.stringify(t))}))}))}),1e4),s.setState({startAudioRecording:!1}),console.log("ARCHIVE STOPPED"+e.id)}))}),(function(e){}))):"close"===e&&(this.setState({showRecordingPopup:!1}),this.state.sessionObj.disconnect())}},{key:"showRecordingPopup",value:function(){return Object(re.jsx)("div",{className:"record-audio-call-wrapper recoding_call_con "+(this.state.showRecordingPopup?"show":""),children:Object(re.jsxs)(St.a,{header:"Record a Message",bsStyle:"primary",children:[Object(re.jsx)("div",{style:this.state.loader?{display:"block"}:{display:"none"},className:"loader-wrapper",children:this.renderLoading()}),Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.recordingResponse}}),Object(re.jsxs)("div",{style:this.state.loader?{display:"none"}:{display:"block"},className:"record-audio-wrapper",children:[Object(re.jsx)("div",{onClick:this.audioRecordingPopup.bind(this,"close"),className:"close",children:"x"}),Object(re.jsx)("div",{id:"publisherRecordAudio"}),Object(re.jsxs)("div",{className:"recording_dd_con",children:[Object(re.jsxs)("div",{className:"recording_timing",children:[Object(re.jsx)("label",{id:"recording_audio_call_minutes",children:this.state.recording_audio_call_minutes}),":",Object(re.jsx)("label",{id:"recording_audio_call_seconds",children:this.state.recording_audio_call_seconds})]}),this.state.startAudioRecording?Object(re.jsx)(h.b,{title:"Stop Audio Recording",onClick:this.stopAudioRecording.bind(this),className:"stop-audio-recording",to:"#!",children:Object(re.jsx)("span",{className:"recording_stop"})}):Object(re.jsx)(h.b,{title:"Start Audio Recording",onClick:this.startAudioRecording.bind(this),className:"start-audio-recording",to:"#!",children:Object(re.jsx)("span",{className:"recording_start"})})]})]})]})})}},{key:"closeRecordingPopup",value:function(){this.setState({showRecordingPopup:!1})}},{key:"renderLoading",value:function(){return Object(re.jsxs)("div",{className:"position-relative",children:[Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:""}),Object(re.jsx)("p",{className:"text-center-init",children:"Initiating..."})]})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abortController.abort()}},{key:"render",value:function(){return Object(re.jsxs)("div",{children:[Object(re.jsx)(h.b,{title:"Record a Message",onClick:this.state.showRecordingPopup?function(e){return e.preventDefault()}:this.audioRecordingPopup.bind(this,"open"),to:"#!",className:"open-audio-recording-pop-up",children:"Recording"}),this.showRecordingPopup()]})}}]),s}(i.Component),Ct=Object(u.b)(null,{startRecording:it,getArchiveSessionAndToken:function(e){var t=e.expertEmail,s=e.userEmail,a=e.archiveSessionId;return function(e){return oe.a.post("".concat(pe,"/getArchiveSessionAndToken"),{expertEmail:t,userEmail:s,archiveSessionId:a}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}},stopRecording:nt,sendRecording:function(e){var t=e.expertEmail,s=e.userEmail,a=e.archiveID;return function(e){return oe.a.post("".concat(pe,"/send_recording"),{expertEmail:t,userEmail:s,archiveID:a}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}})(Object(Q.g)(Object(ue.a)(kt))),Rt=function(e){return Object(re.jsxs)(gt.a,{className:"modal-container",show:e.showModal,onHide:e.handleModalClose,animation:!0,children:[Object(re.jsx)(gt.a.Header,{children:e.title}),Object(re.jsx)(gt.a.Body,{children:Object(re.jsx)("div",{children:e.text})}),Object(re.jsxs)(gt.a.Footer,{children:[!0===e.showModal&&Object(re.jsx)(ft.a,{onClick:function(){e.handleModalLogin()},children:"Login"}),Object(re.jsx)(ft.a,{onClick:function(){e.handleModalClose()},children:"Close"})]})]})},Mt=s(1077),Lt=s(484),Ut=s.n(Lt),Et=function(e){return Object(re.jsxs)("form",{onSubmit:function(t){e.handleSubmitComment(t)},children:["form_reply"===e.formType&&Object(re.jsx)("div",{className:"input-column",children:Object(re.jsx)("div",{className:"image-wrapper",children:Object(re.jsx)("img",{className:"reply-user",alt:"reply user",src:"/img/person.jpg"})})}),Object(re.jsxs)("div",{className:"input-column full-width",children:[Object(re.jsx)("div",{className:"input-row",children:Object(re.jsx)("textarea",{name:"text",maxLength:"10000",autoComplete:"off",value:e.text,rows:e.text?e.text.split("\n").length:1,placeholder:e.placeholder,onChange:function(t){return e.handleChangeText(t.target.value)}})}),Object(re.jsx)("div",{className:"input-row",children:Object(re.jsxs)("div",{className:"button-wrapper",children:[Object(re.jsx)("button",{className:"button-cancel button-reply",onClick:function(t){return e.handleShowForm(t,!1)},children:"Cancel"}),Object(re.jsx)("button",{className:"button-reply",type:"submit",children:e.buttonName})]})})]})]})},It=s(1083),At=s(1076),Tt=function(e){return Object(re.jsxs)(It.a,{id:"comment-menu",onClick:function(){window.$(".dropdown-menu").css("display","block")},title:"",noCaret:!0,onSelect:function(t,s){return 1===t?e.handleUpdateComment(s,!0):e.handleDeleteComment(s)},children:[Object(re.jsx)(At.a,{eventKey:"1",children:"Edit"}),Object(re.jsx)(At.a,{eventKey:"2",children:"Delete"})]})},Dt=function(e){var t,s,a={id:e.data._id,author:e.author,expert:e.expert,text:"",parentId:e.parentId,showMenu:!1,showModal:!1,showReply:!1,showUpdate:!1};Object(i.useEffect)((function(){}),[]);var r=Object(i.useState)(a),n=Object(d.a)(r,2),c=n[0],o=n[1],l=function(e){o(Object(g.a)(Object(g.a)({},c),{},{text:e}))},u=function(e,t){e.preventDefault(),o(Object(g.a)(Object(g.a)({},c),{},{showReply:t,text:""}))},h=function(t){var s;e.data.authorId===(null===(s=e.author)||void 0===s?void 0:s.id)&&o(Object(g.a)(Object(g.a)({},c),{},{showMenu:t}))},m=function(t,s){t.preventDefault(),o(Object(g.a)(Object(g.a)({},c),{},{showUpdate:s,text:e.data.text}))},p=function(t){t.preventDefault();var s=c.text,a=c.author;s&&(a&&"Expert"===a.role?c.showUpdate?b(t):j(t):e.handleShowModal(!0))},j=function(t){t.preventDefault();var s=c.text,a=c.author,r=c.parentId,i=c.expert;s&&r&&oe.a.post("".concat(pe,"/addComment"),{expert:i,author:a.id,text:s,parentId:r,_id:Date.now().toString()}).then((function(s){s.data.success?(u(t,!1),e.handleLoadComments()):o(Object(g.a)(Object(g.a)({},c),{},{error:s.data.error.message||s.data.error}))}))},b=function(t){var s=c.id,a=c.text;oe.a.post("".concat(pe,"/updateComment"),{id:s,text:a}).then((function(s){s.data.success?(m(t,!1),e.handleLoadComments()):o(Object(g.a)(Object(g.a)({},c),{},{error:s.data.error.message||s.data.error}))}))};return Object(re.jsxs)("div",{className:"singleComment",children:["comment"===e.type?Object(re.jsx)("img",{alt:"",className:"comment-user",src:e.data.profileImage?je+e.data.profileImage:"/img/person.jpg"}):Object(re.jsx)("img",{alt:"",className:"reply-user",src:e.data.profileImage?je+e.data.profileImage:"/img/person.jpg"}),Object(re.jsx)("div",{className:"textContent",onMouseOver:function(){return h(!0)},onMouseLeave:function(){return h(!1)},children:c.showUpdate?Object(re.jsx)("div",{className:"singleCommentContent",children:Object(re.jsx)("div",{className:"form",children:Object(re.jsx)(Et,{text:c.text,placeholder:"",buttonName:"Save",formType:"form_update",handleChangeText:function(e){return l(e)},handleSubmitComment:function(e){return p(e)},handleShowForm:function(e,t){return m(e,t)}})})}):Object(re.jsxs)("div",{className:"singleCommentContent",children:[Object(re.jsxs)("div",{className:"singleCommentButtons",children:[Object(re.jsxs)("h3",{children:[" ",null===(t=e.data)||void 0===t?void 0:t.author.split("-")[0]," ",null===(s=e.data)||void 0===s?void 0:s.author.split("-")[1]]}),Object(re.jsx)("span",{className:"time",children:yt()(e.data.updatedAt).fromNow()})]}),c.showMenu&&Object(re.jsx)(Tt,{text:e.children,handleUpdateComment:function(e,t){return m(e,t)},handleDeleteComment:function(t){return function(t){t.preventDefault();var s=c.id;oe.a.post("".concat(pe,"/deleteComment"),{id:s}).then((function(t){t.data.success?e.handleLoadComments():o(Object(g.a)(Object(g.a)({},c),{},{error:t.error}))}))}(t)}}),Object(re.jsx)(Ut.a,{children:e.children}),Object(re.jsxs)("div",{className:"reply-wrapper",children:[Object(re.jsxs)("div",{className:"number",children:[Object(re.jsx)("img",{alt:"",src:"/img/hand-like.png",onClick:function(t){return function(t){t.preventDefault();var s=c.id,a=c.author;a&&"Expert"===a.role?oe.a.post("".concat(pe,"/likeComment"),{id:s,author:a.id}).then((function(t){t.data.success?e.handleLoadComments():o(Object(g.a)(Object(g.a)({},c),{},{error:t.error}))})):e.handleShowModal(!0)}(t)}}),e.data.voters&&e.data.voters.length&&e.data.voters.length]}),Object(re.jsx)("div",{className:"number",children:Object(re.jsx)("img",{alt:"",src:"/img/hand-dislike.png",onClick:function(t){return function(t){t.preventDefault();var s=c.id,a=c.author;a&&"Expert"===a.role?oe.a.post("".concat(pe,"/dislikeComment"),{id:s,author:a.id}).then((function(t){t.data.success?e.handleLoadComments():o(Object(g.a)(Object(g.a)({},c),{},{error:t.error}))})):e.handleShowModal(!0)}(t)}})}),Object(re.jsx)("a",{onClick:function(e){u(e,!0)},children:"REPLY"})]}),Object(re.jsx)("div",{className:"form",children:c.showReply&&Object(re.jsx)(Et,{text:c.text,placeholder:"Add a public reply...",buttonName:"Reply",formType:"form_reply",handleChangeText:function(e){l(e)},handleShowForm:function(e,t){u(e,t)},handleSubmitComment:function(e){p(e)}})})]})})]})},Ft=function(e){var t=Object(i.useState)([]),s=Object(d.a)(t,2),a=s[0],r=s[1],n=function(e){var t=a;t[e]=!t[e],r(t)};return Object(i.useEffect)((function(){}),[]),Object(re.jsx)("div",{children:e.data.map((function(t,s){var r,i,c;return Object(re.jsxs)("div",{children:[Object(re.jsx)(Dt,{data:t,type:"comment",author:null===(r=e.author)||void 0===r?void 0:r.id,expert:e.expert,parentId:t._id,handleShowModal:function(t){e.handleShowModal(t)},handleLoadComments:function(){e.handleLoadComments()},children:t.text},t._id),(null===(i=t.answers)||void 0===i?void 0:i.length)&&Object(re.jsxs)("div",{className:"reply-list",children:[a[t._id]?Object(re.jsxs)("div",{className:"toggle",onClick:function(e){n(t._id)},children:[1===t.answers.length?"Hide reply":"Hide replies","\xa0",Object(re.jsx)(Mt.a,{glyph:"chevron-up"})]}):Object(re.jsxs)("div",{className:"toggle",onClick:function(){n(t._id)},children:["View",1===t.answers.length?" "+t.answers.length+" reply":" all "+t.answers.length+" replies"," \xa0",Object(re.jsx)(Mt.a,{glyph:"chevron-down"})]}),Object(re.jsx)(St.a,{id:"collapsible-panel-example-1",expanded:a[t._id],children:Object(re.jsx)(St.a.Collapse,{children:Object(re.jsx)(St.a.Body,{children:null===(c=t.answers)||void 0===c?void 0:c.map((function(s){return Object(re.jsx)(Dt,{type:"answer",data:s,author:e.author,expert:e.expert,parentId:t._id,handleShowModal:e.handleShowModal,handleLoadComments:e.handleLoadComments,children:s.text},s._id)}))})})})]})]},"COMMENT_KEY_".concat(s))}))})},Pt=function(e){return Object(re.jsxs)("form",{onSubmit:function(t){e.handleSubmitComment(t)},children:[Object(re.jsx)("div",{className:"input-column",children:Object(re.jsx)("div",{className:"image-wrapper",children:Object(re.jsx)("img",{role:"presentation",alt:"presentation",src:"/img/person.jpg",className:"comment-user"})})}),Object(re.jsxs)("div",{className:"input-column full-width",children:[Object(re.jsx)("div",{className:"input-row",children:Object(re.jsx)("textarea",{name:"text",rows:"1",maxLength:"10000",placeholder:"Add a public comment...",autoComplete:"off",value:e.text,onChange:function(t){e.handleChangeText(t.target.value)},onFocus:function(){e.handleShowButton(!0,null)},onBlur:function(){0===e.text.length?e.handleShowButton(!1,null):e.handleShowButton(!0,null)}})}),e.showButton&&Object(re.jsx)("div",{className:"input-row",children:Object(re.jsxs)("div",{className:"button-wrapper",children:[Object(re.jsx)("button",{className:"button-cancel",onClick:function(){return e.handleShowButton(!1,"cancel")},children:"Cancel"}),Object(re.jsx)("button",{type:"submit",children:"Comment"})]})})]})]})},Bt=function(e){var t=Object(i.useState)({replies:[],error:null}),s=Object(d.a)(t,2),a=s[0],r=s[1],n=Object(m.a)(),c=Object(d.a)(n,1)[0],o=function(t){var s,i=null===(s=c.user)||void 0===s?void 0:s.slug;oe.a.post("".concat(pe,"/likeComment"),{id:t,author:i}).then((function(t){var s,i,n;t.data.success?(console.log("liked"),function(){var t=e.id;oe.a.post("".concat(pe,"/get-replies"),{id:t}).then((function(e){e.data.success?(console.log("replies retrieved---1"),r((function(t){return Object(g.a)(Object(g.a)({},t),{},{replies_list:e.data.data})}))):r((function(t){return Object(g.a)(Object(g.a)({},t),{},{error:e.data.error.message||e.data.error})}))}))}()):r(Object(g.a)(Object(g.a)({},a),{},{error:(null===(s=t.data)||void 0===s||null===(i=s.error)||void 0===i?void 0:i.message)||(null===(n=t.data)||void 0===n?void 0:n.error)}))}))};return Object(i.useEffect)((function(){}),[]),Object(re.jsxs)("div",{className:"reply_list",style:{marginLeft:"30px"},children:[a.replies.map((function(t,s){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:"contents",children:[Object(re.jsx)("img",{alt:"",src:"/profile_images/"+t.users[0].profileImage,height:"50px",width:"50px"}),Object(re.jsx)("p",{className:"text",children:t.text})]}),Object(re.jsx)("span",{children:t.voters.length?t.voters.length:""}),Object(re.jsx)("i",{className:"fa fa-thumbs-up like "+(t.like_slugs.includes(e.author.id)?"green":""),"data-likeslug":t.like_slugs,"data-authordslug":e.author.id,style:{padding:"0 10px",fontSize:"18px"},onClick:function(){o(t._id)},"data-status":"no","data-id":t._id}),Object(re.jsx)("span",{children:t.voters_dislikes&&t.voters_dislikes.length?t.voters_dislikes.length:""}),Object(re.jsx)("i",{className:"fa fa-thumbs-down dislike "+(t.dislike_slugs.includes(e.author.id)?"red2":""),onClick:function(){!function(e){var t,s=null===(t=c.user)||void 0===t?void 0:t.slug;oe.a.post("".concat(pe,"/dislikeComment"),{id:e,author:s}).then((function(e){e.data.success?console.log("disliked"):r(Object(g.a)(Object(g.a)({},a),{},{error:e.data.error.message||e.data.error}))}))}(t._id)},"data-status":"no","data-id":t._id,style:{padding:"0 10px",fontSize:"18px"}})]})})),Object(re.jsxs)("div",{className:"form-group-text",children:[Object(re.jsx)("textarea",{className:"form-control reply_field reply_"+e.id,placeholder:"Add a reply..",rows:"5"}),Object(re.jsx)("button",{"data-id":e.id,onClick:function(){!function(t){if(void 0===c.user)e.openLoginRequestModal(!0);else{var s=e.author,i=window.$(".reply_"+t).val(),n=e.expert;if(window.$(".reply_field").val(""),!i||!n)return;if(!s)return;var o=t;console.log("xxxxxxxxx"),oe.a.post("".concat(pe,"/addComment"),{expert:n.expert,author:s.id,text:i,parentId:o,_id:Date.now().toString()}).then((function(e){e.data.success?console.log("---new reply added---"):r(Object(g.a)(Object(g.a)({},a),{},{error:e.data.error.message||e.data.error}))}))}}(e.id)},children:"Add reply"})]})]})},$t=!1,zt=function(e){var t,s=Object(i.useState)({data:[],error:null,author:{},showButton:!1,showModal:!1,comments:[],replies:[],myData:["1","22","333"],text:""}),a=Object(d.a)(s,2),r=a[0],n=a[1],c=Object(Q.f)(),o=Object(m.a)(),l=Object(d.a)(o,1)[0],u=new AbortController,h=u.signal,p=function(){oe.a.get("".concat(pe,"/getComments/").concat(e.expert),{signal:h}).then((function(e){e.data.success?$t&&n((function(t){return Object(g.a)(Object(g.a)({},t),{},{data:e.data.data})})):$t&&n((function(t){return Object(g.a)(Object(g.a)({},t),{},{error:e.data.error})}))}))},j=function(e){n(Object(g.a)(Object(g.a)({},r),{},{showModal:e}))},b=function(){n(Object(g.a)(Object(g.a)({},r),{},{showModal:!1}))},x=function(e,t){n("cancel"===t?Object(g.a)(Object(g.a)({},r),{},{showButton:e,text:""}):Object(g.a)(Object(g.a)({},r),{},{showButton:e}))},f=function(){c.push("/login")};return Object(i.useEffect)((function(){($t=!0)&&p();var e=setInterval((function(){$t&&p()}),6e4),t=l.user;return t&&$t&&n((function(e){return Object(g.a)(Object(g.a)({},e),{},{author:{id:t.slug,name:t.firstName+" "+t.lastName,role:t.role}})})),function(){clearInterval(e),window.$(document).on("click",".reply",(function(){window.$(this).toggleClass("reply-show")})),u.abort(),$t=!1}}),[]),Object(re.jsxs)("div",{className:"comment_inner_wrap",children:[Object(re.jsx)("h3",{children:r.data&&r.data.length>1?r.data.length+" Comments":1===r.data.length?r.data.length+" Comment":"No Comment"}),Object(re.jsx)("div",{className:"form",children:Object(re.jsx)(Pt,{id:"-1",text:r.text,commentId:r.commentId,showButton:r.showButton,handleShowButton:function(e,t){x(e,t)},handleChangeText:function(e){!function(e){n(Object(g.a)(Object(g.a)({},r),{},{text:e}))}(e)},handleSubmitComment:function(t){!function(t){t.preventDefault();var s=r.author,a=r.text,i=e.expert;a&&i&&(s&&"Expert"===s.role?oe.a.post("".concat(pe,"/addComment"),{expert:i,author:s.id,text:a,parentId:"-1",_id:Date.now().toString()}).then((function(e){e.data.success?(x(!1,null),p()):n(Object(g.a)(Object(g.a)({},r),{},{error:e.data.error.message||e.data.error}))})):j(!0))}(t)}})}),Object(re.jsx)("div",{className:"comment list",children:r.data&&r.data.map((function(t,s){var a,i,c,o,d,u;return Object(re.jsxs)("div",{className:"comments_list",children:[Object(re.jsx)("img",{alt:"",src:"/profile_images/"+(null===(a=t.users[0])||void 0===a?void 0:a.profileImage),height:"50px",width:"50px"}),Object(re.jsx)("a",{href:"/expert/"+(null===(i=t.users[0])||void 0===i?void 0:i.expertCategories[0])+"/"+(null===(c=t.users[0])||void 0===c?void 0:c.slug),style:{cursor:"pointer"},children:(null===(o=t.users[0])||void 0===o?void 0:o.profile.firstName)+" "+(null===(d=t.users[0])||void 0===d?void 0:d.profile.lastName)}),Object(re.jsx)("p",{children:t.text}),Object(re.jsxs)("div",{className:"like_section list",children:[Object(re.jsx)("span",{children:t.voters.length?t.voters.length:""}),Object(re.jsx)("i",{className:"fa fa-thumbs-up like "+(t.like_slugs.includes(r.author.id)?"green":""),onClick:function(){!function(e){var t,s=null===(t=l.user)||void 0===t?void 0:t.slug;oe.a.post("".concat(pe,"/likeComment"),{id:e,author:s}).then((function(e){e.data.success?(console.log("liked"),p()):n(Object(g.a)(Object(g.a)({},r),{},{error:e.data.error.message||e.data.error}))}))}(t._id)},style:{padding:"0 10px",fontSize:"18px"},"data-status":"no","data-id":t._id}),Object(re.jsx)("span",{children:t.voters_dislikes&&t.voters_dislikes.length?t.voters_dislikes.length:""}),Object(re.jsx)("i",{className:"fa fa-thumbs-down dislike "+(t.dislike_slugs.includes(r.author.id)?"red2":""),onClick:function(){!function(e){var t,s=null===(t=l.user)||void 0===t?void 0:t.slug;oe.a.post("".concat(pe,"/dislikeComment"),{id:e,author:s}).then((function(e){e.data.success?(console.log("disliked"),p()):n(Object(g.a)(Object(g.a)({},r),{},{error:e.data.error.message||e.data.error}))}))}(t._id)},"data-status":"no","data-id":t._id,style:{padding:"0 10px",fontSize:"18px"}}),Object(re.jsx)("label",{className:"reply",children:"Reply"}),Object(re.jsxs)("div",{className:"reply_wrap",children:[Object(re.jsxs)("div",{className:"contents",style:{display:"none"},children:[Object(re.jsx)("img",{alt:"",src:"/profile_images/"+(null===(u=t.users[0])||void 0===u?void 0:u.profileImage),height:"50px",width:"50px"}),Object(re.jsx)("p",{className:"text"})]}),Object(re.jsx)("i",{className:"fa fa-thumbs-up like "+(t.like_slugs.includes(r.author.id)?"green":""),"data-likeslug":t.like_slugs,"data-authordslug":r.author.id,style:{padding:"0 10px",fontSize:"18px",display:"none"},"data-status":"no","data-id":t._id}),Object(re.jsx)("span",{style:{display:"none"},children:t.voters_dislikes&&t.voters_dislikes.length?t.voters_dislikes.length:""}),Object(re.jsx)("i",{className:"fa fa-thumbs-down dislike "+(t.dislike_slugs.includes(r.author.id)?"red2":""),"data-status":"no","data-id":t._id,style:{padding:"0 10px",fontSize:"18px",display:"none"}}),Object(re.jsx)(Bt,{id:t._id,author:r.author,expert:e,openLoginRequestModal:function(e){j(e)}}),Object(re.jsxs)("div",{className:"form-group-text",style:{display:"none"},children:[Object(re.jsx)("textarea",{className:"form-control reply_"+t._id,placeholder:"Type Something....",rows:"5"}),Object(re.jsx)("button",{"data-id":t._id,onClick:function(){!function(t){var s=e.author,a=window.$(".reply_"+t).val(),i=e.expert;if(window.$(".reply_field").val(""),a&&i&&s){var c=t;oe.a.post("".concat(pe,"/addComment"),{expert:i.expert,author:s.id,text:a,parentId:c,_id:Date.now().toString()}).then((function(e){e.data.success?console.log("---new reply added---"):n(Object(g.a)(Object(g.a)({},r),{},{error:e.data.error.message||e.data.error}))}))}}(t._id)},children:"Comment"})]})]})]})]},"COMMENT_ITEM_".concat(s))}))}),r.data&&r.data.length>1&&Object(re.jsx)("div",{className:"comment",children:Object(re.jsx)(Ft,{data:r.data,author:r.author,expert:e.expert,handleShowModal:function(e){j(e)},handleLoadComments:function(){p()}})}),r.error&&Object(re.jsx)("p",{children:r.error}),r.showModal&&!l.user?Object(re.jsx)(Rt,{title:"Please log in...",text:"You need to login to submit or reply to comment.",showModal:r.showModal,handleModalClose:function(){b()},handleModalLogin:function(){n(Object(g.a)(Object(g.a)({},r),{},{showModal:!1})),f()}}):r.showModal&&"Expert"!==(null===(t=l.user)||void 0===t?void 0:t.role)?Object(re.jsx)(Rt,{title:"Sorry...",text:"Only expert can submit or reply to comment.",showModal:r.showModal,handleModalClose:function(){b()}}):null]})},qt=s(294),Ht=s.n(qt),Yt=s(488),Wt=s(41),Vt=Pe;function Jt(){return function(e){return qe(k,U,!0,"/chat",e)}}function Gt(e){var t="/chat/".concat(e);return function(e){return qe(M,U,!0,t,e)}}function Kt(e){var t=this,s=e.recipient,a={composedMessage:e.composedMessage},r="/chat/new/".concat(s);return function(){var e=Object(Yt.a)(Ht.a.mark((function e(s){var i;return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(R,U,!0,r,s,a);case 2:i=e.sent,s(Object(Wt.a)("composeMessage")),t.props.history.push("/dashboard/conversation/view/".concat(i.data.conversationId));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Zt(){return function(e){return qe(C,U,!0,"/chat/recipients",e)}}function Xt(e,t){var s={composedMessage:t.composedMessage},a="/chat/".concat(e);return function(t){ze(E,U,!0,a,t,s),t(Object(Wt.a)("replyMessage")),Vt.emit("new message",e)}}function Qt(e,t){console.log(e+" &&&&&&&&&&&&&&&&&&& --- --- ---- "+t);var s="/expertchat/fetchSessionChat/".concat(e,"/").concat(t);return function(e){return qe(L,U,!0,s,e)}}function es(e,t){var s="/expertchat/fetchSessionChat/".concat(e);return function(e){return qe(L,U,!0,s,e)}}function ts(e,t,s,a,r){var i={sessionOwnerUsername:e,messageReceiverEmail:t,messageSenderEmail:s,composedMessage:a,date:r};return function(t){ze(E,U,!0,"/expertchat/expertsessionchat",t,i).then((function(s){t(Object(Wt.a)("replyMessage")),console.log("client replyMessage sessionOwnerUsername : "+e),Vt.emit("expert new message",e)}))}}Vt.on("disconnect",(function(){Vt.disconnect()}));var ss=Vt,as=s(99),rs=Object(Ue.a)({form:"email-form"}),is=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"email",required:!0,placeholder:"Your email here",className:"form-control emailField"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},ns=function(e){return Object(re.jsx)("div",{children:Object(re.jsx)("input",Object(g.a)({type:"hidden"},e.input))})},cs=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("textarea",Object(g.a)({required:!0,rows:"3",placeholder:"Your message here",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},os=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;Object(ee.a)(this,s),(r=t.call(this,e,a)).getBase64=function(e){var t=new FileReader;t.readAsDataURL(e);var s="";t.onload=function(){s=t.result,window.$(".image_view").attr("src",t.result)},setTimeout((function(){return r.setState({base64_image:s,submit_disabled:!1})}),1500)},r.triggerFileUpload=function(){!0===r.state.editable&&r.fileInput.click()},r.upload=function(){var e={base64_image:r.state.base64_image};return oe.a.post("".concat(pe,"/upload"),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},r.getsubcategories=function(e){console.log("sub category-----"),console.log(e.target.value),r.setState({updated_area_of_experties1:e.target.value}),oe.a.get("".concat(pe,"/getExpertsSubCategoryList/")+e.target.value).then((function(e){r.setState({subcategories:e.data[0].subcategory})}))},r.saveChanges=function(){if(!0===r.state.submit_disabled)return console.log("submit is disabled"),!1;console.log("submit enabled");var e=r.state,t=e.updated_name,s=e.updated_university,a=e.updated_area_of_experties2,i=e.updated_years_of_experties,n=e.updated_focus_of_experties,c=e.profileImage;if(!t.trim())return alert("Please enter Full name"),!1;if(!a)return alert("Please select area of experties"),!1;var o={user_email:r.state.currentUser.email,updated_name:t,updated_university:s,updated_area_of_experties2:a,updated_years_of_experties:i,updated_focus_of_experties:n,profileImage:c,file:r.state.base64_image};return oe.a.post("".concat(pe,"/userExpertUpdate"),o,{}).then((function(e){if(console.log(e),e.data.success||(r.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e.data.error+"</div>"}),window.$(".form-control").val(""),window.$("form").each((function(){this.reset()}))),e.data.success){console.log("----here in success ---"),console.log(e.data),console.log("----here in success 2---"),r.setState({updated_name:e.data.first_name+" "+e.data.last_name,profile_image:e.data.profile_image,profileImage:e.data.profile_image,updated_university:e.data.user_data.university,updated_area_of_experties2:e.data.user_data.expertCategories[0],updated_years_of_experties:e.data.user_data.yearsexpertise,updated_focus_of_experties:e.data.user_data.expertFocusExpertise,editable:""}),localStorage.setItem("editable","");var t=window.location.pathname,s=window.location.href.split(t);s=(s=s[0])+"/expert/"+e.data.category+"/"+e.data.slug,console.log("-----------reached here-----------"),window.location.href=s,r.setState({responseMsg:"<div class='alert alert-success text-center'>"+e.data.message+"</div>"})}})).catch((function(e){console.log(e),r.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e+"</div>"})}))},r.state={category:"",showEndCallOptions:!1,expert:"",firstName:"",lastName:"",resume_path:"",expertEmail:"",sessionBtnText:"",loading:!1,error:null,sessionId:"",apiKey:"",apiSecret:"",apiToken:"",expertUsername:r.props.match.params.slug,expertAudioCallSokcetname:"expert-audio-session-"+r.props.match.params.slug,userAudioCallSokcetname:r.props.cookies.get("user")?"user-audio-session-"+r.props.cookies.get("user").slug:"",currentUser:r.props.cookies.get("user"),showModal:!1,modalMessageNotification:"",modalMessageNotAuthorized:"Dear Expert, You are not authorized to publish your session on someone's channel. Please publish on your channel.",startAudioRecording:!1,archiveSessionId:"",archiveStreamtoken:"",archiveID:"",connectionId:"",pubOptions:{width:100,height:75,insertMode:"append"},publisherObj:"",sessionObj:"",openCallConnecting:!1,audioCalling:!1,newConAudioId:"",userConnectionId:"",university:"",totalSeconds:0,refreshIntervalId:"",profileImage:"",endorsements:[],selectMins:0,showCallLink:!0,is_user_logged_in:"",categories:[],updated_name:"",updated_university:"",updated_area_of_experties1:"",updated_area_of_experties2:"",updated_years_of_experties:"",updated_focus_of_experties:"",first_name:"",last_name:"",profile_image:"",editable:"true",file:"",base64_image:"",submit_disabled:"",comments:[]},r.onChangeFile=r.onChangeFile.bind(Object(we.a)(r)),r.open=r.open.bind(Object(we.a)(r)),r.close=r.close.bind(Object(we.a)(r)),r.selectMins=r.selectMins.bind(Object(we.a)(r)),r.onToken=r.onToken.bind(Object(we.a)(r)),r.setTime=r.setTime.bind(Object(we.a)(r)),r.handleTextMessageFormSubmit=r.handleTextMessageFormSubmit.bind(Object(we.a)(r)),r.selectVideoSessionMinutes=r.selectVideoSessionMinutes.bind(Object(we.a)(r));var i=r.props.cookies.get("user");if(i&&"User"===i.role){var n="user-audio-session-"+i.slug;ss.emit("expert audio call session",n),console.log("*** expert audio call session : from user ***"+r.state.userAudioCallSokcetname)}return r}return Object(te.a)(s,[{key:"selectMins",value:function(e){this.setState({selectMins:parseInt(e.target.value)})}},{key:"onToken",value:function(e){try{var t=this.state.selectMins,s=this.state.currentUser.email,a=this.props.match.params.slug;this.props.rechargeVideoSession({stripeToken:e,expertSlug:a,userEmail:s,amount:t}).then((function(e){console.log("response: "+JSON.stringify(e))}),(function(e){return e.response.json().then((function(t){t.errors;console.log("err: "+JSON.stringify(e))}))}))}catch(r){console.log("catch error "+r.message)}}},{key:"disconnectAudioCall",value:function(){this.state.sessionObj.disconnect()}},{key:"open",value:function(){this.setState({showModal:!0})}},{key:"close",value:function(){this.setState({showModal:!1})}},{key:"handleFormSubmit",value:function(e){var t=this;try{this.props.sendEmail(e).then((function(e){t.setState({responseEmailMsg:"<div class='alert alert-success text-center'>"+e.message+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='email").val(""),window.$("textarea[name='message").val("")}),2500)}),(function(e){return e.response.json().then((function(e){var s=e.errors;t.setState({responseEmailMsg:"<div class='alert alert-danger text-center'>"+s+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='email").val(""),window.$("textarea[name='message").val("")}),2500)}))}))}catch(s){}}},{key:"onChangeFile",value:function(e){this.setState({submit_disabled:!0}),this.getBase64(e.target.files[0]),this.setState({file:e.target.files[0]})}},{key:"handleTextMessageFormSubmit",value:function(e){var t=this;try{e.text_expert_email=this.state.expertEmail,this.props.sendTextMessage(e).then((function(e){t.setState({responseTextMsg:"<div class='alert alert-success text-center'>"+e.message+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='text_email").val(""),window.$("textarea[name='text_message").val(""),window.$(".emailField")[1].value=""}),2500)}),(function(e){return e.response.json().then((function(e){var s=e.errors;t.setState({responseTextMsg:"<div class='alert alert-danger text-center'>"+s+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='text_email").val(""),window.$("textarea[name='text_message").val("")}),2500)}))}))}catch(s){}}},{key:"audioCallNowButtonClick",value:function(e){var t=this;e.preventDefault(),this.setState({openCallConnecting:!0});var s=this,a=this.state.expertAudioCallSokcetname,r=this.state.currentUser.firstName+" "+this.state.currentUser.lastName,i=this.state.expertEmail,n=this.props.cookies.get("user"),c=n.email,o=n.slug;console.log("case 1 expertEmail: "+i+" userEmail: "+c),this.props.createAudioSession({expertEmail:i,userEmail:c,username:o}).then((function(e){console.log("**** createAudioSession this.state.sessionId ****"+JSON.stringify(e)),t.setState({sessionId:e.sessionId}),t.setState({apiToken:e.token});var i=as.initSession(he,t.state.sessionId);t.setState({sessionObj:i,newConAudioId:e.newConAudioId});var n={videoSource:null,width:100,height:75,insertMode:"append"},c="";i.on("streamCreated",(function(e){console.log("streamCreated"),c=as.initPublisher("userPublisherAudio",n),i.publish(c),s.setState({publisherObj:c});i.subscribe(e.stream,"expertSubscriberAudio",{width:100,height:75,insertMode:"append"}),window.$("#user-audio-call-interface-wrapper").fadeIn(),s.setState({openCallConnecting:!1});var t=setInterval(s.setTime,1e3);s.setState({refreshIntervalId:t})})),i.on("connectionCreated",(function(e){console.log("connectionCreated")})),i.on("connectionDestroyed",(function(e){console.log("connectionDestroyed"),i.disconnect(),window.$("#user-audio-call-interface-wrapper").fadeOut();var t=s.state.refreshIntervalId;clearInterval(t),s.setState({totalSeconds:0,refreshIntervalId:""})})),i.on("sessionDisconnected",(function(e){console.log("sessionDisconnected"),window.$("#user-audio-call-interface-wrapper").fadeOut();var t=s.state.refreshIntervalId;clearInterval(t),s.setState({totalSeconds:0,refreshIntervalId:""})})),i.on("streamDestroyed",(function(e){console.log("streamDestroyed")})),i.connect(t.state.apiToken,(function(e){if(e)console.log("session connection error");else{var t={expertAudioCallSokcetname:a,audioCallFrom:r,newConAudioId:s.state.newConAudioId,userAudioCallSokcetname:s.state.userAudioCallSokcetname,userConnectionId:i.connection.connectionId};ss.emit("audio call to expert",t),s.setState({userConnectionId:i.connection.connectionId})}}))}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** createAudioSession error ****"+JSON.stringify(t))}))}))}},{key:"componentDidMount",value:function(){var e=this;window.$(document).on("click",".change_image",(function(){window.$("#upload_image").trigger("click")}));var t=this.props.match.params.slug;oe.a.get("".concat(pe,"/getExpertDetail/").concat(t)).then((function(t){var s;(null===(s=e.state.currentUser)||void 0===s?void 0:s.email)===t.data[0].email?e.setState({is_user_logged_in:!0}):e.setState({is_user_logged_in:""})})),"new_category"===this.props.match.params.category||"true"===localStorage.getItem("editable")?this.setState({editable:!0}):this.setState({editable:""})}},{key:"componentWillMount",value:function(){var e=this;oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){e.setState({categories:t.data});var s,a=Object(jt.a)(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;"Music Lessons"===r.name&&e.setState({musicCategories:r})}}catch(i){a.e(i)}finally{a.f()}}));var t=this.props.match.params.slug;oe.a.get("".concat(pe,"/getExpertDetail/").concat(t)).then((function(t){var s=t.data[0];console.log(t.data[0]),e.setState({firstName:t.data[0].profile.firstName}),e.setState({lastName:t.data[0].profile.lastName}),e.setState({expertEmail:t.data[0].email}),e.setState({onlineStatus:t.data[0].onlineStatus}),e.setState({profileImage:t.data[0].profileImage}),e.setState({resume_path:t.data[0].resume_path}),e.setState({university:t.data[0].university}),e.setState({expert:s,loading:!0,error:null}),e.setState({first_name:"undefined"!==e.state.expert.profile.firstName?e.state.expert.profile.firstName:" "}),"undefined"!==e.state.expert.profile.lastName&&""!==e.state.expert.profile.lastName&&null!==e.state.expert.profile.lastName&&e.setState({last_name:"undefined"!==e.state.expert.profile.lastName?e.state.expert.profile.lastName:" "}),e.setState({updated_name:e.state.first_name+" "+e.state.last_name,profile_image:e.state.first_name+" "+e.state.profile_image,updated_area_of_experties2:e.state.expert.expertCategories[0],updated_years_of_experties:e.state.expert.yearsexpertise,updated_focus_of_experties:e.state.expert.expertFocusExpertise,updated_university:e.state.expert.university});var a={userEmail:e.state.currentUser?e.state.currentUser.email:"",expertEmail:s.email};e.props.getVideoSession(a).then((function(t){(null===t||void 0===t?void 0:t.success)&&e.setState({showCallLink:!1})}));var r=t.data[0].endorsements;oe.a.post("".concat(pe,"/getEndorsements/"),{slug:r}).then((function(t){e.setState({endorsements:t.data,loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))})).catch((function(t){e.setState({loading:!1,error:t})})),window.$(document).ready((function(){window.$("#send_email_form").validate({rules:{email:{required:!0,email:!0},message:{required:!0}},messages:{email:{required:"Please enter this field"},message:{required:"Please enter this field"}}}),window.$("#send_text_form").validate({rules:{email:{required:!0,email:!0},message:{required:!0}},messages:{email:{required:"Please enter this field"},message:{required:"Please enter this field"}}})}));var s=this;ss.on("disconnect incoming audio call to user",(function(e){console.log("*** disconnect incoming audio call to user ***"+e.userAudioCallSokcetname),s.state.sessionObj.disconnect(),s.setState({openCallConnecting:!1})}))}},{key:"setTime",value:function(){var e=this.state.totalSeconds;++e,this.setState({totalSeconds:e});var t=this.pad(e%60),s=this.pad(parseInt(e/60));window.$("#user_audio_call_seconds").html(t),window.$("#user_audio_call_minutes").html(s)}},{key:"pad",value:function(e){var t=e+"";return t.length<2?"0"+t:t}},{key:"renderLoading",value:function(){return""}},{key:"renderError",value:function(){return void 0===this.state.expert?Object(re.jsx)("div",{id:"experts-list",className:"experts-list section-padding",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.category})]}),Object(re.jsx)("div",{id:"center",children:Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:this.props.match.params.category}),Object(re.jsx)("div",{className:"alert-danger alert",children:"Alas, No expert found in this category!"})]})})]})})})}):Object(re.jsx)("div",{id:"experts-list",className:"experts-list section-padding",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.category})]}),Object(re.jsx)("div",{id:"center",children:Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:this.props.match.params.category}),Object(re.jsxs)("div",{className:"alert-danger alert",children:["Uh oh: ",this.state.error.message]})]})})]})})})})}},{key:"getOnlineStatus",value:function(e){return"ONLINE"===e}},{key:"getOnlineStatusTitle",value:function(e){return"ONLINE"===e?"Online":"Offline"}},{key:"selectVideoSessionMinutes",value:function(e){e.preventDefault(),window.$(".notification-modal").trigger("click")}},{key:"startSessionCheck",value:function(){var e=this,t=this.props.cookies.get("user"),s=this.state.expertEmail,a=this.props.match.params.slug,r=t.email,i=t.role,n=t.slug;r!==s&&"Expert"!==i?this.props.checkBeforeSessionStart({expertEmail:s,userEmail:r}).then((function(t){null!==t.session?1===t.status?window.location.href="".concat(me,"/mysession/")+e.props.match.params.slug:e.setState({modalMessageNotification:"Something went wrong, please contact website admin."}):window.$(".notification-modal").trigger("click")}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("errors: "+JSON.stringify(t))}))})):r===s&&"Expert"===i&&a===n?window.location.href="".concat(me,"/mysession/")+this.props.match.params.slug:this.setState({showModal:!0})}},{key:"redirectToLogin",value:function(e){e.preventDefault(),this.props.history.push("/login"),this.props.cookies.set("requiredLogin_for_session","Please login to start video session",{path:"/"})}},{key:"toggleCallLinks",value:function(e){this.setState({showCallLink:e})}},{key:"renderPosts",value:function(){var e,t,s,a,r,i=this,n=this.props.cookies.get("user"),c=this.state.endorsements.map((function(e,t){var s=je+e.profileImage;return Object(re.jsx)("img",{className:"endorsement-image",height:"50",width:"50",src:e.profileImage&&null!==e.profileImage&&void 0!==e.profileImage&&""!==e.profileImage?s:"/img/profile.png",alt:""},"IMG_".concat(t))}));if(this.state.error)return this.renderError();var o=this.props.handleSubmit,l=this.state.showCallLink;return Object(re.jsxs)("div",{id:"view-experts",className:"view-experts",children:[Object(re.jsxs)(gt.a,{className:"modal-container",show:this.state.showModal,onHide:this.close,animation:!0,bsSize:"large",children:[Object(re.jsx)(gt.a.Header,{closeButton:!0,children:Object(re.jsx)(gt.a.Title,{children:"Message"})}),Object(re.jsx)(gt.a.Body,{children:this.state.modalMessageNotAuthorized}),Object(re.jsx)(gt.a.Footer,{children:Object(re.jsx)(ft.a,{onClick:this.close,children:"Close"})})]}),Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/list/".concat(this.props.match.params.category),children:this.props.match.params.category})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.slug})]})})}),Object(re.jsx)("div",{className:"expert-list-wrap",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"expert-list-inner-wrap",children:[Object(re.jsx)("div",{className:"col-sm-12",children:Object(re.jsx)("div",{className:"expert-detail-wrap",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-3 col-sm-4",children:[Object(re.jsx)("input",{type:"file",style:{display:"none"},ref:function(e){return i.fileInput=e},name:"image",className:"form-control",onChange:this.onChangeFile}),Object(re.jsx)("button",{style:{display:"none"},onClick:function(){i.upload()},children:"Upload"}),Object(re.jsxs)("div",{className:"expert-img change_image",onClick:function(){i.triggerFileUpload()},children:[this.state.profileImage&&null!==this.state.profileImage&&void 0!==this.state.profileImage&&""!==this.state.profileImage?Object(re.jsx)("img",{className:"image_view",height:"",width:"",src:je+this.state.profileImage,alt:""}):"",null===this.state.profileImage||void 0===this.state.profileImage||""===this.state.profileImage?Object(re.jsx)("img",{className:"image_view",src:"/img/profile.png",alt:""}):"",this.getOnlineStatus(this.state.onlineStatus)&&Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online-o fa fa-circle","aria-hidden":"true"})]}),Object(re.jsxs)("ul",{className:"Action_icon",children:[l&&Object(re.jsx)("li",{children:n?Object(re.jsx)("a",{"data-toggle":"modal",title:"Start Video Session","data-target":"#notificationModal",onClick:this.selectVideoSessionMinutes,className:"Start-Session",children:" "}):Object(re.jsx)("div",{children:Object(re.jsx)("a",{title:"Start Video Session",onClick:this.redirectToLogin.bind(this),className:"Start-Session",children:" "})})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{title:"Send E-Mail","data-toggle":"modal","data-target":"#myModalEmail",className:"Send_E-Mail",children:"Send E-Mail"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{title:"Send Text Message","data-toggle":"modal","data-target":"#myModalTextMessage",className:"Send-Text-Message",children:"Send Text Message"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{href:"".concat(je)+this.state.resume_path,title:"Download Resume",download:!0,className:"Download-Resume",children:"Download Resume"})}),l&&Object(re.jsx)("li",{children:n?Object(re.jsx)("a",{title:"Audio Call",onClick:this.audioCallNowButtonClick.bind(this),className:"Audio-Call",children:"Audio Call"}):Object(re.jsx)("a",{title:"Audio Call","data-toggle":"modal","data-target":"#myModalAudio",className:"Audio-Call",children:"Audio Call"})}),Object(re.jsx)("li",{children:Object(re.jsx)(Ct,{expertSlug:this.props.match.params.slug})})]}),Object(re.jsx)("div",{children:n?Object(re.jsx)(ht,{userEmail:n.email,expertSlug:this.props.match.params.slug,expert:this.state.expert,modalId:"notificationModal",modalMessage:this.state.modalMessageNotification,toggleCallLinks:this.toggleCallLinks.bind(this)}):""})]}),Object(re.jsx)("div",{id:"user-audio-call-interface-wrapper",className:"expert-audio-call-interface-wrapper conn3 audio-call-interface-wrapper",children:Object(re.jsxs)("div",{className:"panel panel-primary",children:[Object(re.jsx)("div",{className:"panel-heading",children:"Audio Calling..."}),Object(re.jsxs)("div",{className:"panel-body audio_call_body",children:[Object(re.jsx)("div",{className:"audio_user_call_img",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})}),Object(re.jsxs)("div",{className:"audio_userrgt_content",children:[Object(re.jsx)("div",{id:"userPublisherAudio"}),Object(re.jsx)("div",{id:"expertSubscriberAudio"}),Object(re.jsx)("h3",{children:this.state.firstName+" "+this.state.lastName}),Object(re.jsxs)("h5",{children:[Object(re.jsx)("label",{id:"user_audio_call_minutes",children:"00"}),":",Object(re.jsx)("label",{id:"user_audio_call_seconds",children:"00"})]})]}),Object(re.jsx)("button",{onClick:this.disconnectAudioCall.bind(this),className:"btn btn-danger",children:Object(re.jsx)("img",{className:"incoming_call disconnect_call",src:"/img/call_cancel.png",alt:""})})]})]})}),Object(re.jsx)("div",{className:"expert-audio-call-interface-wrapper conn3 call_connecting "+(this.state.openCallConnecting?"open":"close"),children:Object(re.jsxs)("div",{className:"panel panel-primary",children:[Object(re.jsx)("div",{className:"panel-heading",children:"Connecting..."}),Object(re.jsxs)("div",{className:"panel-body audio_call_body",children:[Object(re.jsxs)("div",{className:"connecting_call_con",children:[Object(re.jsx)("div",{className:"audio_user_call_img",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})}),Object(re.jsx)("div",{className:"connect_loading",children:Object(re.jsxs)("div",{className:"spinner",children:[Object(re.jsx)("div",{className:"bounce1"}),Object(re.jsx)("div",{className:"bounce2"}),Object(re.jsx)("div",{className:"bounce3"})]})}),Object(re.jsx)("div",{className:"audio_user_call_img flt_rgt",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})})]}),Object(re.jsx)("button",{className:"btn btn-danger",children:Object(re.jsx)("img",{className:"incoming_call disconnect_call",src:"/img/call_cancel.png",alt:""})})]})]})}),Object(re.jsx)("div",{className:"col-md-9 col-sm-8",children:Object(re.jsx)("div",{className:"profile-detail",children:Object(re.jsx)("div",{className:"name",children:Object(re.jsxs)("dl",{className:"dl-horizontal",children:["undefined"!==this.state.firstName&&""!==this.state.firstName&&null!==this.state.firstName?Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Name"}),Object(re.jsxs)("dd",{children:[Object(re.jsxs)("div",{className:"text-left-detail",children:[this.state.firstName,this.state.lastName]}),Object(re.jsxs)("div",{style:{float:"right",textTransform:"capitalize"},className:"text-right label label-primary",children:[Object(re.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"}),this.props.match.params.category]})]})]}):Object(re.jsxs)("div",{className:"profile-bor-detail inactive_div",children:[Object(re.jsx)("dt",{children:"Name"}),Object(re.jsxs)("dd",{children:[Object(re.jsxs)("div",{className:"text-left-detail",children:[this.state.firstName,this.state.lastName]}),Object(re.jsxs)("div",{style:{float:"right",textTransform:"capitalize"},className:"text-right label label-primary",children:[Object(re.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"}),this.props.match.params.category]})]})]}),"undefined"!==this.state.expert.expertCategories&&""!==this.state.expert.expertCategories&&null!==this.state.expert.expertCategories?Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Area of expertise"}),Object(re.jsx)("dd",{children:this.state.expert.expertCategories})]}):Object(re.jsxs)("div",{className:"profile-bor-detail inactive_div",children:[Object(re.jsx)("dt",{children:"Area of expertise"}),Object(re.jsx)("dd",{children:this.state.expert.expertCategories})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Years of expertise"}),Object(re.jsx)("dd",{children:null===(e=this.state.expert)||void 0===e?void 0:e.yearsexpertise})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Focus of expertise"}),Object(re.jsx)("dd",{children:null===(t=this.state.expert)||void 0===t?void 0:t.expertFocusExpertise})]}),"undefined"!==this.state.expert.university&&""!==this.state.expert.university&&null!==this.state.expert.university?Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"University"}),Object(re.jsx)("dd",{children:this.state.expert.university})]}):Object(re.jsxs)("div",{className:"profile-bor-detail inactive_div",children:[Object(re.jsx)("dt",{children:"University"}),Object(re.jsx)("dd",{children:this.state.expert.university})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Rates"}),Object(re.jsx)("dd",{children:null===(s=this.state.expert)||void 0===s?void 0:s.expertRates})]}),"undefined"!==this.state.expert.expertRating&&""!==this.state.expert.expertRating&&null!==this.state.expert.expertRating?Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Rating"}),Object(re.jsxs)("dd",{children:[this.state.expert.expertRating&&null!==this.state.expert.expertRating&&void 0!==this.state.expert.expertRating&&""!==this.state.expert.expertRating?this.state.expert.expertRating:"No Ratings Available",this.state.expert.expertRating&&null!==this.state.expert.expertRating&&void 0!==this.state.expert.expertRating&&""!==this.state.expert.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]}):Object(re.jsxs)("div",{className:"profile-bor-detail inactive_div",children:[Object(re.jsx)("dt",{children:"Rating"}),Object(re.jsxs)("dd",{children:[this.state.expert.expertRating&&null!==this.state.expert.expertRating&&void 0!==this.state.expert.expertRating&&""!==this.state.expert.expertRating?this.state.expert.expertRating:"No Ratings Available",this.state.expert.expertRating&&null!=this.state.expert.expertRating&&void 0!==this.state.expert.expertRating&&""!==this.state.expert.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]}),"undefined"===this.state.expert.facebookURL&&""===this.state.expert.facebookURL&&null===this.state.expert.facebookURL||"undefined"===this.state.expert.twitterURL&&""===this.state.expert.twitterURL&&null===this.state.expert.twitterURL||"undefined"===this.state.expert.linkedinURL&&""===this.state.expert.linkedinURL&&null===this.state.expert.linkedinURL||"undefined"===this.state.expert.instagramURL&&""===this.state.expert.instagramURL&&null===this.state.expert.instagramURL||"undefined"===this.state.expert.snapchatURL&&""===this.state.expert.snapchatURL&&null===this.state.expert.snapchatURL||"undefined"===this.state.expert.websiteURL&&""===this.state.expert.websiteURL&&null===this.state.expert.websiteURL||"undefined"===this.state.expert.googleURL&&""===this.state.expert.googleURL&&null===this.state.expert.googleURL||"undefined"===this.state.expert.youtubeURL&&""===this.state.expert.youtubeURL&&null===this.state.expert.youtubeURL||"undefined"===this.state.expert.soundcloudURL&&""===this.state.expert.soundcloudURL&&null===this.state.expert.soundcloudURL||"undefined"===this.state.expert.facebookURL&&""===this.state.expert.facebookURL&&null===this.state.expert.facebookURL?Object(re.jsxs)("div",{className:"profile-bor-detail expert-social-links",children:[Object(re.jsx)("dt",{children:"Social link "}),Object(re.jsxs)("dd",{children:[this.state.expert.facebookURL&&null!==this.state.expert.facebookURL&&void 0!==this.state.expert.facebookURL&&""!==this.state.expert.facebookURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.facebookURL?this.state.expert.facebookURL:"#",title:"facebook",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-facebook-official","aria-hidden":"true"})}),this.state.expert.twitterURL&&null!==this.state.expert.twitterURL&&void 0!==this.state.expert.twitterURL&&""!==this.state.expert.twitterURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.twitterURL?this.state.expert.twitterURL:"#",title:"twitter",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-twitter","aria-hidden":"true"})}),this.state.expert.linkedinURL&&null!==this.state.expert.linkedinURL&&void 0!==this.state.expert.linkedinURL&&""!==this.state.expert.linkedinURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.linkedinURL?this.state.expert.linkedinURL:"#",title:"linkedin",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-linkedin","aria-hidden":"true"})}),this.state.expert.instagramURL&&null!=this.state.expert.instagramURL&&void 0!==this.state.expert.instagramURL&&""!==this.state.expert.instagramURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.instagramURL?this.state.expert.instagramURL:"#",title:"instagram",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-instagram","aria-hidden":"true"})}),this.state.expert.snapchatURL&&null!==this.state.expert.snapchatURL&&void 0!==this.state.expert.snapchatURL&&""!==this.state.expert.snapchatURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.snapchatURL?this.state.expert.snapchatURL:"#",title:"snapchat",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-snapchat","aria-hidden":"true"})}),this.state.expert.websiteURL&&null!==this.state.expert.websiteURL&&void 0!==this.state.expert.websiteURL&&""!==this.state.expert.websiteURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.websiteURL?this.state.expert.websiteURL:"#",title:"website",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-anchor","aria-hidden":"true"})}),this.state.expert.googleURL&&null!==this.state.expert.googleURL&&void 0!==this.state.expert.googleURL&&""!==this.state.expert.googleURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.googleURL?this.state.expert.googleURL:"#",title:"google",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-google","aria-hidden":"true"})}),this.state.expert.youtubeURL&&null!==this.state.expert.youtubeURL&&void 0!==this.state.expert.youtubeURL&&""!==this.state.expert.youtubeURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.youtubeURL?this.state.expert.youtubeURL:"#",title:"youtube",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-youtube","aria-hidden":"true"})}),this.state.expert.soundcloudURL&&null!=this.state.expert.soundcloudURL&&void 0!==this.state.expert.soundcloudURL&&""!==this.state.expert.soundcloudURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.soundcloudURL?this.state.expert.soundcloudURL:"#",title:"soundcloud",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-soundcloud","aria-hidden":"true"})}),""===this.state.expert.facebookURL&&""===this.state.expert.twitterURL&&""===this.state.expert.linkedinURL&&""===this.state.expert.instagramURL&&""===this.state.expert.snapchatURL&&""===this.state.expert.websiteURL&&""===this.state.expert.googleURL&&"No Social Links Available Yet"]})]}):Object(re.jsxs)("div",{className:"profile-bor-detail expert-social-links inactive_div",children:[Object(re.jsx)("dt",{children:"Social link "}),Object(re.jsxs)("dd",{children:[this.state.expert.facebookURL&&null!==this.state.expert.facebookURL&&void 0!==this.state.expert.facebookURL&&""!==this.state.expert.facebookURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.facebookURL?this.state.expert.facebookURL:"#",title:"facebook",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-facebook-official","aria-hidden":"true"})}),this.state.expert.twitterURL&&null!==this.state.expert.twitterURL&&void 0!==this.state.expert.twitterURL&&""!==this.state.expert.twitterURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.twitterURL?this.state.expert.twitterURL:"#",title:"twitter",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-twitter","aria-hidden":"true"})}),this.state.expert.linkedinURL&&null!==this.state.expert.linkedinURL&&void 0!==this.state.expert.linkedinURL&&""!==this.state.expert.linkedinURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.linkedinURL?this.state.expert.linkedinURL:"#",title:"linkedin",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-linkedin","aria-hidden":"true"})}),this.state.expert.instagramURL&&null!=this.state.expert.instagramURL&&void 0!==this.state.expert.instagramURL&&""!==this.state.expert.instagramURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.instagramURL?this.state.expert.instagramURL:"#",title:"instagram",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-instagram","aria-hidden":"true"})}),this.state.expert.snapchatURL&&null!==this.state.expert.snapchatURL&&void 0!==this.state.expert.snapchatURL&&""!==this.state.expert.snapchatURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.snapchatURL?this.state.expert.snapchatURL:"#",title:"snapchat",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-snapchat","aria-hidden":"true"})}),this.state.expert.websiteURL&&null!==this.state.expert.websiteURL&&void 0!==this.state.expert.websiteURL&&""!==this.state.expert.websiteURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.websiteURL?this.state.expert.websiteURL:"#",title:"website",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-anchor","aria-hidden":"true"})}),this.state.expert.googleURL&&null!==this.state.expert.googleURL&&void 0!==this.state.expert.googleURL&&""!==this.state.expert.googleURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.googleURL?this.state.expert.googleURL:"#",title:"google",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-google","aria-hidden":"true"})}),this.state.expert.youtubeURL&&null!==this.state.expert.youtubeURL&&void 0!==this.state.expert.youtubeURL&&""!==this.state.expert.youtubeURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.youtubeURL?this.state.expert.youtubeURL:"#",title:"youtube",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-youtube","aria-hidden":"true"})}),this.state.expert.soundcloudURL&&null!=this.state.expert.soundcloudURL&&void 0!==this.state.expert.soundcloudURL&&""!==this.state.expert.soundcloudURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.soundcloudURL?this.state.expert.soundcloudURL:"#",title:"soundcloud",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-soundcloud","aria-hidden":"true"})}),""===this.state.expert.facebookURL&&""===this.state.expert.twitterURL&&""===this.state.expert.linkedinURL&&""===this.state.expert.instagramURL&&""===this.state.expert.snapchatURL&&""===this.state.expert.websiteURL&&""===this.state.expert.googleURL&&"No Social Links Available Yet"]})]}),Object(re.jsxs)("div",{className:"profile-bor-detail expert-endorsements",children:[Object(re.jsx)("dt",{children:"social Link  "}),Object(re.jsx)("dd",{})]}),"undefined"!==c&&""!==c&&null!==c?Object(re.jsxs)("div",{className:"profile-bor-detail expert-endorsements",children:[Object(re.jsx)("dt",{children:"Endorsements "}),Object(re.jsx)("dd",{children:c})]}):Object(re.jsxs)("div",{className:"profile-bor-detail expert-endorsements inactive_div",children:[Object(re.jsx)("dt",{children:"Endorsements "}),Object(re.jsx)("dd",{children:c})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Download Resume"}),Object(re.jsx)("dd",{children:Object(re.jsx)("a",{href:"".concat(je)+(null===(a=this.state.expert)||void 0===a?void 0:a.resume_path),title:"Download",download:!0,className:"fa fa-file-pdf-o"})})]})]})})})})]})})}),Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("div",{className:"col-md-3",children:Object(re.jsx)(wt,{expertSlug:this.props.match.params.slug})}),Object(re.jsxs)("div",{className:"col-md-8",children:[Object(re.jsx)(xt.a,{images:["https://grace951.github.io/react-image-carousel/img/landing1.jpg","https://grace951.github.io/react-image-carousel/img/landing3.jpg","https://grace951.github.io/react-image-carousel/img/landing5.jpg"],thumb:!0,loop:!0,autoplay:0}),Object(re.jsx)("div",{className:"comment",children:Object(re.jsx)(zt,{expert:this.props.match.params.slug,userEmail:null===(r=this.state.currentUser)||void 0===r?void 0:r.email,expertEmail:this.state.expertEmail})}),Object(re.jsx)("div",{className:"comment list",children:this.state.comments.map((function(e,t){return Object(re.jsxs)("div",{children:[Object(re.jsx)("img",{src:"/expertCategorieses/"+e.users[0].profileImage,height:"50px",width:"50px",alt:""}),Object(re.jsx)("a",{href:"/expert/"+e.users[0].expertCategories[0]+"/"+e.users[0].slug,style:{cursor:"pointer"},children:e.users[0].profile.firstName+" "+e.users[0].profile.lastName}),Object(re.jsx)("p",{children:e.text})]},t)}))})]})]})]})})})}),Object(re.jsx)("div",{id:"myModalAudio",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Message"})]}),Object(re.jsx)("div",{className:"modal-body text-center",children:Object(re.jsx)("div",{className:"alert alert-danger",children:"Please login to place audio call"})}),Object(re.jsx)("div",{className:"modal-footer text-center",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",children:"Dismiss"})})})})})]})})}),Object(re.jsx)("div",{id:"myModalEmail",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Send Email"})]}),Object(re.jsxs)("form",{id:"send_email_form",onSubmit:o(this.handleFormSubmit.bind(this)),children:[Object(re.jsxs)("div",{className:"modal-body",children:[Object(re.jsx)("p",{className:"text-center",children:" Shoot email message to expert "}),Object(re.jsx)("table",{className:"table table-hover",children:Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsxs)("td",{children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseEmailMsg}}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Email"}),Object(re.jsx)(Ee.a,{name:"email",component:is,type:"email"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Message"}),Object(re.jsx)(Ee.a,{name:"message",rows:"3",component:cs,type:"text"})]})})]})})})})]}),Object(re.jsx)("div",{className:"modal-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send Email"}),"\xa0",Object(re.jsx)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",children:"Close"})]})})})})]})]})})}),Object(re.jsx)("div",{id:"myModalTextMessage",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Send Text Message"})]}),Object(re.jsxs)("form",{id:"send_text_form",onSubmit:o(this.handleTextMessageFormSubmit.bind(this)),children:[Object(re.jsxs)("div",{className:"modal-body",children:[Object(re.jsx)("p",{className:"text-center",children:" Shoot text message to expert "}),Object(re.jsx)("table",{className:"table table-hover",children:Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsxs)("td",{children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseTextMsg}}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Email"}),Object(re.jsx)(Ee.a,{name:"text_email",component:is,type:"email"}),Object(re.jsx)(Ee.a,{name:"text_expert_email",value:this.state.expertEmail,type:"hidden",component:ns}),Object(re.jsx)("input",{name:"text_expert_email",hidden:!0,value:this.state.expertEmail,type:"hidden"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Message"}),Object(re.jsx)(Ee.a,{name:"text_message",rows:"3",component:cs,type:"text"})]})})]})})})})]}),Object(re.jsx)("div",{className:"modal-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send Text Message"}),"\xa0",Object(re.jsx)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",children:"Close"})]})})})})]})]})})})]})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:this.state.loading?this.renderLoading():this.renderPosts()})}}]),s}(i.Component);var ls=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message}}),{sendEmail:Xe,sendTextMessage:Qe,checkBeforeSessionStart:tt,createAudioSession:st,startRecording:it,stopRecording:nt,rechargeVideoSession:rt,getVideoSession:at})(Object(Q.g)(Object(ue.a)(rs(os)))),ds=Vt,us=s(99),hs=Object(Ue.a)({form:"email-form"}),ms=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"email",required:!0,placeholder:"Your email here",className:"form-control emailField"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},ps=function(e){return Object(re.jsx)("div",{children:Object(re.jsx)("input",Object(g.a)({type:"hidden"},e.input))})},js=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("textarea",Object(g.a)({required:!0,rows:"3",placeholder:"Your message here",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},bs=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;Object(ee.a)(this,s),(r=t.call(this,e,a)).getBase64=function(e){var t=new FileReader;t.readAsDataURL(e);var s="";t.onload=function(){s=t.result,window.$(".image_view").attr("src",t.result)},setTimeout((function(){return r.setState({base64_image:s,submit_disabled:!1})}),1500)},r.triggerFileUpload=function(){!0===r.state.editable&&r.fileInput.click()},r.upload=function(){var e={base64_image:r.state.base64_image};return oe.a.post("".concat(pe,"/upload"),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},r.getsubcategories=function(e){console.log("sub category-----"),console.log(e.target.value),r.setState({updated_area_of_experties1:e.target.value}),oe.a.get("".concat(pe,"/getExpertsSubCategoryList/")+e.target.value).then((function(e){r.setState({subcategories:e.data[0].subcategory})}))},r.saveChanges=function(){if(!0===r.state.submit_disabled)return console.log("submit is disabled"),!1;console.log("submit enabled");var e=r.state,t=e.updated_name,s=e.updated_university,a=e.updated_area_of_experties2,i=e.updated_years_of_experties,n=e.updated_focus_of_experties,c=e.profileImage;if(!t.trim())return alert("Please enter Full name"),!1;if(!a)return alert("Please select area of experties"),!1;var o={user_email:r.state.currentUser.email,updated_name:t,updated_university:s,updated_area_of_experties2:a,updated_years_of_experties:i,updated_focus_of_experties:n,profileImage:c,file:r.state.base64_image};return oe.a.post("".concat(pe,"/userExpertUpdate"),o,{}).then((function(e){if(console.log(e),e.data.success||(r.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e.data.error+"</div>"}),window.$(".form-control").val(""),window.$("form").each((function(){this.reset()}))),e.data.success){console.log("----here in success ---"),console.log(e.data),console.log("----here in success 2---"),r.setState({updated_name:e.data.first_name+" "+e.data.last_name,profile_image:e.data.profile_image,profileImage:e.data.profile_image,updated_university:e.data.user_data.university,updated_area_of_experties2:e.data.user_data.expertCategories[0],updated_years_of_experties:e.data.user_data.yearsexpertise,updated_focus_of_experties:e.data.user_data.expertFocusExpertise,editable:""});var t=window.location.pathname,s=window.location.href.split(t);s=(s=s[0])+"/expert/"+e.data.category+"/"+e.data.slug,console.log("-----------reached here-----------"),window.location.href=s,r.setState({responseMsg:"<div class='alert alert-success text-center'>"+e.data.message+"</div>"})}})).catch((function(e){console.log(e),r.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e+"</div>"})}))},r.state={category:"",showEndCallOptions:!1,expert:"",firstName:"",lastName:"",resume_path:"",expertEmail:"",sessionBtnText:"",loading:!1,error:null,sessionId:"",apiKey:"",apiSecret:"",apiToken:"",expertUsername:r.props.match.params.slug,expertAudioCallSokcetname:"expert-audio-session-"+r.props.match.params.slug,userAudioCallSokcetname:r.props.cookies.get("user")?"user-audio-session-"+r.props.cookies.get("user").slug:"",currentUser:r.props.cookies.get("user"),showModal:!1,modalMessageNotification:"",modalMessageNotAuthorized:"Dear Expert, You are not authorized to publish your session on someone's channel. Please publish on your channel.",startAudioRecording:!1,archiveSessionId:"",archiveStreamtoken:"",archiveID:"",connectionId:"",pubOptions:{width:100,height:75,insertMode:"append"},publisherObj:"",sessionObj:"",openCallConnecting:!1,audioCalling:!1,newConAudioId:"",userConnectionId:"",university:"",totalSeconds:0,refreshIntervalId:"",profileImage:"",endorsements:[],selectMins:0,showCallLink:!0,is_user_logged_in:"",categories:[],updated_name:"",updated_university:"",updated_area_of_experties1:"",updated_area_of_experties2:"",updated_years_of_experties:"",updated_focus_of_experties:"",first_name:"",last_name:"",profile_image:"",editable:"true",file:"",base64_image:"",submit_disabled:"",comments:[]},r.onChangeFile=r.onChangeFile.bind(Object(we.a)(r)),r.open=r.open.bind(Object(we.a)(r)),r.close=r.close.bind(Object(we.a)(r)),r.selectMins=r.selectMins.bind(Object(we.a)(r)),r.onToken=r.onToken.bind(Object(we.a)(r)),r.setTime=r.setTime.bind(Object(we.a)(r)),r.handleTextMessageFormSubmit=r.handleTextMessageFormSubmit.bind(Object(we.a)(r)),r.selectVideoSessionMinutes=r.selectVideoSessionMinutes.bind(Object(we.a)(r));var i=r.props.cookies.get("user");if(i&&"User"===i.role){var n="user-audio-session-"+i.slug;ds.emit("expert audio call session",n),console.log("*** expert audio call session : from user ***"+r.state.userAudioCallSokcetname)}return r}return Object(te.a)(s,[{key:"selectMins",value:function(e){this.setState({selectMins:parseInt(e.target.value)})}},{key:"onToken",value:function(e){try{var t=this.state.selectMins,s=this.state.currentUser.email,a=this.props.match.params.slug;this.props.rechargeVideoSession({stripeToken:e,expertSlug:a,userEmail:s,amount:t}).then((function(e){console.log("response: "+JSON.stringify(e))}),(function(e){return e.response.json().then((function(t){t.errors;console.log("err: "+JSON.stringify(e))}))}))}catch(r){console.log("catch error "+r.message)}}},{key:"disconnectAudioCall",value:function(){this.state.sessionObj.disconnect()}},{key:"open",value:function(){this.setState({showModal:!0})}},{key:"close",value:function(){this.setState({showModal:!1})}},{key:"handleFormSubmit",value:function(e){var t=this;try{this.props.sendEmail(e).then((function(e){t.setState({responseEmailMsg:"<div class='alert alert-success text-center'>"+e.message+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='email").val(""),window.$("textarea[name='message").val("")}),2500)}),(function(e){return e.response.json().then((function(e){var s=e.errors;t.setState({responseEmailMsg:"<div class='alert alert-danger text-center'>"+s+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='email").val(""),window.$("textarea[name='message").val("")}),2500)}))}))}catch(s){}}},{key:"onChangeFile",value:function(e){this.setState({submit_disabled:!0}),this.getBase64(e.target.files[0]),this.setState({file:e.target.files[0]})}},{key:"handleTextMessageFormSubmit",value:function(e){var t=this;try{e.text_expert_email=this.state.expertEmail,this.props.sendTextMessage(e).then((function(e){t.setState({responseTextMsg:"<div class='alert alert-success text-center'>"+e.message+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='text_email").val(""),window.$("textarea[name='text_message").val(""),window.$(".emailField")[1].value=""}),2500)}),(function(e){return e.response.json().then((function(e){var s=e.errors;t.setState({responseTextMsg:"<div class='alert alert-danger text-center'>"+s+"</div>"}),setTimeout((function(){window.$(".alert").text(""),window.$(".alert").removeClass("alert alert-success text-center"),window.$("input[name='text_email").val(""),window.$("textarea[name='text_message").val("")}),2500)}))}))}catch(s){}}},{key:"audioCallNowButtonClick",value:function(e){var t=this;e.preventDefault(),this.setState({openCallConnecting:!0});var s=this,a=this.state.expertAudioCallSokcetname,r=this.state.currentUser.firstName+" "+this.state.currentUser.lastName,i=this.state.expertEmail,n=this.props.cookies.get("user"),c=n.email,o=n.slug;console.log("case 1 expertEmail: "+i+" userEmail: "+c),this.props.createAudioSession({expertEmail:i,userEmail:c,username:o}).then((function(e){console.log("**** createAudioSession this.state.sessionId ****"+JSON.stringify(e)),t.setState({sessionId:e.sessionId}),t.setState({apiToken:e.token});var i=us.initSession(he,t.state.sessionId);t.setState({sessionObj:i,newConAudioId:e.newConAudioId});var n={videoSource:null,width:100,height:75,insertMode:"append"},c="";i.on("streamCreated",(function(e){console.log("streamCreated"),c=us.initPublisher("userPublisherAudio",n),i.publish(c),s.setState({publisherObj:c});i.subscribe(e.stream,"expertSubscriberAudio",{width:100,height:75,insertMode:"append"}),window.$("#user-audio-call-interface-wrapper").fadeIn(),s.setState({openCallConnecting:!1});var t=setInterval(s.setTime,1e3);s.setState({refreshIntervalId:t})})),i.on("connectionCreated",(function(e){console.log("connectionCreated")})),i.on("connectionDestroyed",(function(e){console.log("connectionDestroyed"),i.disconnect(),window.$("#user-audio-call-interface-wrapper").fadeOut();var t=s.state.refreshIntervalId;clearInterval(t),s.setState({totalSeconds:0,refreshIntervalId:""})})),i.on("sessionDisconnected",(function(e){console.log("sessionDisconnected"),window.$("#user-audio-call-interface-wrapper").fadeOut();var t=s.state.refreshIntervalId;clearInterval(t),s.setState({totalSeconds:0,refreshIntervalId:""})})),i.on("streamDestroyed",(function(e){console.log("streamDestroyed")})),i.connect(t.state.apiToken,(function(e){if(e)console.log("session connection error");else{var t={expertAudioCallSokcetname:a,audioCallFrom:r,newConAudioId:s.state.newConAudioId,userAudioCallSokcetname:s.state.userAudioCallSokcetname,userConnectionId:i.connection.connectionId};ds.emit("audio call to expert",t),s.setState({userConnectionId:i.connection.connectionId})}}))}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** createAudioSession error ****"+JSON.stringify(t))}))}))}},{key:"componentDidMount",value:function(){var e=this;window.$(document).on("click",".change_image",(function(){window.$("#upload_image").trigger("click")}));var t=this.props.match.params.slug;oe.a.get("".concat(pe,"/getExpertDetail/").concat(t)).then((function(t){var s;(null===(s=e.state.currentUser)||void 0===s?void 0:s.email)===t.data[0].email?e.setState({is_user_logged_in:!0}):e.setState({is_user_logged_in:""})}))}},{key:"componentWillMount",value:function(){var e=this;oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){e.setState({categories:t.data});var s,a=Object(jt.a)(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;"Music Lessons"===r.name&&e.setState({musicCategories:r})}}catch(i){a.e(i)}finally{a.f()}}));var t=this.props.match.params.slug;oe.a.get("".concat(pe,"/getExpertDetail/").concat(t)).then((function(t){var s=t.data[0];console.log(t.data[0]),e.setState({firstName:t.data[0].profile.firstName}),e.setState({lastName:t.data[0].profile.lastName}),e.setState({expertEmail:t.data[0].email}),e.setState({onlineStatus:t.data[0].onlineStatus}),e.setState({profileImage:t.data[0].profileImage}),e.setState({resume_path:t.data[0].resume_path}),e.setState({university:t.data[0].university}),e.setState({expert:s,loading:!0,error:null}),e.setState({first_name:"undefined"!==e.state.expert.profile.firstName?e.state.expert.profile.firstName:" "}),"undefined"!==e.state.expert.profile.lastName&&""!==e.state.expert.profile.lastName&&null!==e.state.expert.profile.lastName&&e.setState({last_name:"undefined"!==e.state.expert.profile.lastName?e.state.expert.profile.lastName:" "}),e.setState({updated_name:e.state.first_name+" "+e.state.last_name,profile_image:e.state.first_name+" "+e.state.profile_image,updated_area_of_experties2:e.state.expert.expertCategories[0],updated_years_of_experties:e.state.expert.yearsexpertise,updated_focus_of_experties:e.state.expert.expertFocusExpertise,updated_university:e.state.expert.university});var a={userEmail:e.state.currentUser?e.state.currentUser.email:"",expertEmail:s.email};e.props.getVideoSession(a).then((function(t){(null===t||void 0===t?void 0:t.success)&&e.setState({showCallLink:!1})}));var r=t.data[0].endorsements;oe.a.post("".concat(pe,"/getEndorsements/"),{slug:r}).then((function(t){e.setState({endorsements:t.data,loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))})).catch((function(t){e.setState({loading:!1,error:t})})),window.$(document).ready((function(){window.$("#send_email_form").validate({rules:{email:{required:!0,email:!0},message:{required:!0}},messages:{email:{required:"Please enter this field"},message:{required:"Please enter this field"}}}),window.$("#send_text_form").validate({rules:{email:{required:!0,email:!0},message:{required:!0}},messages:{email:{required:"Please enter this field"},message:{required:"Please enter this field"}}})}));var s=this;ds.on("disconnect incoming audio call to user",(function(e){console.log("*** disconnect incoming audio call to user ***"+e.userAudioCallSokcetname),s.state.sessionObj.disconnect(),s.setState({openCallConnecting:!1})}))}},{key:"setTime",value:function(){var e=this.state.totalSeconds;++e,this.setState({totalSeconds:e});var t=this.pad(e%60),s=this.pad(parseInt(e/60));window.$("#user_audio_call_seconds").html(t),window.$("#user_audio_call_minutes").html(s)}},{key:"pad",value:function(e){var t=e+"";return t.length<2?"0"+t:t}},{key:"renderLoading",value:function(){return""}},{key:"renderError",value:function(){return void 0===this.state.expert?Object(re.jsx)("div",{id:"experts-list",className:"experts-list section-padding",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.category})]}),Object(re.jsx)("div",{id:"center",children:Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:this.props.match.params.category}),Object(re.jsx)("div",{className:"alert-danger alert",children:"Alas, No expert found in this category!"})]})})]})})})}):Object(re.jsx)("div",{id:"experts-list",className:"experts-list section-padding",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.category})]}),Object(re.jsx)("div",{id:"center",children:Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:this.props.match.params.category}),Object(re.jsxs)("div",{className:"alert-danger alert",children:["Uh oh: ",this.state.error.message]})]})})]})})})})}},{key:"getOnlineStatus",value:function(e){return"ONLINE"===e}},{key:"getOnlineStatusTitle",value:function(e){return"ONLINE"===e?"Online":"Offline"}},{key:"selectVideoSessionMinutes",value:function(e){e.preventDefault(),window.$(".notification-modal").trigger("click")}},{key:"startSessionCheck",value:function(){var e=this,t=this.props.cookies.get("user"),s=this.state.expertEmail,a=this.props.match.params.slug,r=t.email,i=t.role,n=t.slug;r!==s&&"Expert"!==i?this.props.checkBeforeSessionStart({expertEmail:s,userEmail:r}).then((function(t){null!==t.session?1===t.status?window.location.href="".concat(me,"/mysession/")+e.props.match.params.slug:e.setState({modalMessageNotification:"Something went wrong, please contact website admin."}):window.$(".notification-modal").trigger("click")}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("errors: "+JSON.stringify(t))}))})):r===s&&"Expert"===i&&a===n?window.location.href="".concat(me,"/mysession/")+this.props.match.params.slug:this.setState({showModal:!0})}},{key:"redirectToLogin",value:function(e){e.preventDefault(),this.props.history.push("/login"),this.props.cookies.set("requiredLogin_for_session","Please login to start video session",{path:"/"})}},{key:"toggleCallLinks",value:function(e){this.setState({showCallLink:e})}},{key:"renderPosts",value:function(){var e,t=this,s=this.props.cookies.get("user"),a=this.state.endorsements.map((function(e,t){var s=je+e.profileImage;return Object(re.jsx)("img",{className:"endorsement-image",height:"50",width:"50",src:e.profileImage&&null!==e.profileImage&&void 0!==e.profileImage&&""!==e.profileImage?s:"/img/profile.png",alt:""},"IMG_".concat(t))}));if(this.state.error)return this.renderError();var r=this.props.handleSubmit,i=this.state.showCallLink;return Object(re.jsxs)("div",{id:"view-experts",className:"view-experts",children:[Object(re.jsxs)(gt.a,{className:"modal-container",show:this.state.showModal,onHide:this.close,animation:!0,bsSize:"large",children:[Object(re.jsx)(gt.a.Header,{closeButton:!0,children:Object(re.jsx)(gt.a.Title,{children:"Message"})}),Object(re.jsx)(gt.a.Body,{children:this.state.modalMessageNotAuthorized}),Object(re.jsx)(gt.a.Footer,{children:Object(re.jsx)(ft.a,{onClick:this.close,children:"Close"})})]}),Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/list/".concat(this.props.match.params.category),children:this.props.match.params.category})}),Object(re.jsx)("li",{className:"breadcrumb-item active",children:this.props.match.params.slug})]})})}),Object(re.jsx)("div",{className:"expert-list-wrap",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"expert-list-inner-wrap",children:[Object(re.jsx)("div",{className:"col-sm-12",children:Object(re.jsx)("div",{className:"expert-detail-wrap",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-3 col-sm-4",children:[Object(re.jsx)("input",{type:"file",style:{display:"none"},ref:function(e){return t.fileInput=e},name:"image",className:"form-control",onChange:this.onChangeFile}),Object(re.jsx)("button",{style:{display:"none"},onClick:function(){t.upload()},children:"Upload"}),Object(re.jsxs)("div",{className:"expert-img change_image",onClick:function(){t.triggerFileUpload()},children:[this.state.profileImage&&null!==this.state.profileImage&&void 0!==this.state.profileImage&&""!==this.state.profileImage?Object(re.jsx)("img",{className:"image_view",height:"",width:"",src:je+this.state.profileImage,alt:""}):"",null===this.state.profileImage||void 0===this.state.profileImage||""===this.state.profileImage?Object(re.jsx)("img",{className:"image_view",src:"/img/profile.png",alt:""}):"",this.getOnlineStatus(this.state.onlineStatus)&&Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online-o fa fa-circle","aria-hidden":"true"})]}),Object(re.jsxs)("ul",{className:"Action_icon",children:[i&&Object(re.jsx)("li",{children:s?Object(re.jsx)("a",{"data-toggle":"modal",title:"Start Video Session","data-target":"#notificationModal",onClick:this.selectVideoSessionMinutes,className:"Start-Session",children:" "}):Object(re.jsx)("div",{children:Object(re.jsx)("a",{title:"Start Video Session",onClick:this.redirectToLogin.bind(this),className:"Start-Session",children:" "})})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{title:"Send E-Mail","data-toggle":"modal","data-target":"#myModalEmail",className:"Send_E-Mail",children:"Send E-Mail"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{title:"Send Text Message","data-toggle":"modal","data-target":"#myModalTextMessage",className:"Send-Text-Message",children:"Send Text Message"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{href:"".concat(je)+this.state.resume_path,title:"Download Resume",download:!0,className:"Download-Resume",children:"Download Resume"})}),i&&Object(re.jsx)("li",{children:s?Object(re.jsx)("a",{title:"Audio Call",onClick:this.audioCallNowButtonClick.bind(this),className:"Audio-Call",children:"Audio Call"}):Object(re.jsx)("a",{title:"Audio Call","data-toggle":"modal","data-target":"#myModalAudio",className:"Audio-Call",children:"Audio Call"})}),Object(re.jsx)("li",{children:Object(re.jsx)(Ct,{expertSlug:this.props.match.params.slug})})]}),Object(re.jsx)("div",{children:s?Object(re.jsx)(ht,{userEmail:s.email,expertSlug:this.props.match.params.slug,expert:this.state.expert,modalId:"notificationModal",modalMessage:this.state.modalMessageNotification,toggleCallLinks:this.toggleCallLinks.bind(this)}):""})]}),Object(re.jsx)("div",{id:"user-audio-call-interface-wrapper",className:"expert-audio-call-interface-wrapper conn3 audio-call-interface-wrapper",children:Object(re.jsxs)("div",{className:"panel panel-primary",children:[Object(re.jsx)("div",{className:"panel-heading",children:"Audio Calling..."}),Object(re.jsxs)("div",{className:"panel-body audio_call_body",children:[Object(re.jsx)("div",{className:"audio_user_call_img",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})}),Object(re.jsxs)("div",{className:"audio_userrgt_content",children:[Object(re.jsx)("div",{id:"userPublisherAudio"}),Object(re.jsx)("div",{id:"expertSubscriberAudio"}),Object(re.jsx)("h3",{children:this.state.firstName+" "+this.state.lastName}),Object(re.jsxs)("h5",{children:[Object(re.jsx)("label",{id:"user_audio_call_minutes",children:"00"}),":",Object(re.jsx)("label",{id:"user_audio_call_seconds",children:"00"})]})]}),Object(re.jsx)("button",{onClick:this.disconnectAudioCall.bind(this),className:"btn btn-danger",children:Object(re.jsx)("img",{className:"incoming_call disconnect_call",src:"/img/call_cancel.png",alt:""})})]})]})}),Object(re.jsx)("div",{className:"expert-audio-call-interface-wrapper conn3 call_connecting "+(this.state.openCallConnecting?"open":"close"),children:Object(re.jsxs)("div",{className:"panel panel-primary",children:[Object(re.jsx)("div",{className:"panel-heading",children:"Connecting..."}),Object(re.jsxs)("div",{className:"panel-body audio_call_body",children:[Object(re.jsxs)("div",{className:"connecting_call_con",children:[Object(re.jsx)("div",{className:"audio_user_call_img",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})}),Object(re.jsx)("div",{className:"connect_loading",children:Object(re.jsxs)("div",{className:"spinner",children:[Object(re.jsx)("div",{className:"bounce1"}),Object(re.jsx)("div",{className:"bounce2"}),Object(re.jsx)("div",{className:"bounce3"})]})}),Object(re.jsx)("div",{className:"audio_user_call_img flt_rgt",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})})]}),Object(re.jsx)("button",{className:"btn btn-danger",children:Object(re.jsx)("img",{className:"incoming_call disconnect_call",src:"/img/call_cancel.png",alt:""})})]})]})}),Object(re.jsx)("div",{className:"col-md-9 col-sm-8",children:Object(re.jsx)("div",{className:"profile-detail",children:Object(re.jsxs)("div",{className:"name",children:[Object(re.jsxs)("dl",{className:"dl-horizontal",children:[Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Name "}),Object(re.jsxs)("dd",{children:[Object(re.jsx)("div",{className:"text-left-detail",children:Object(re.jsx)("input",{className:"form-control",onChange:function(e){t.setState({updated_name:e.target.value})},defaultValue:this.state.updated_name})}),Object(re.jsxs)("div",{style:{float:"right",textTransform:"capitalize"},className:"text-right label label-primary",children:[Object(re.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"}),this.props.match.params.category]})]})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"University"}),Object(re.jsx)("dd",{children:Object(re.jsx)("input",{className:"form-control",onChange:function(e){t.setState({updated_university:e.target.value})},defaultValue:this.state.expert.university})})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Area of expertise"}),Object(re.jsx)("dd",{children:Object(re.jsxs)("div",{className:"inputs",children:[Object(re.jsx)(Ee.a,{name:"categories",className:"form-control",onChange:function(e){t.setState({updated_area_of_experties1:e.target.value})},component:function(e){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"expertCategories",className:"form-control"},e.input),{},{onChange:t.getsubcategories,value:t.state.updated_area_of_experties1,children:[Object(re.jsx)("option",{children:"Select"}),t.state.categories.map((function(e,t){return Object(re.jsx)("option",{value:e._id,children:e.name},"OPTION_".concat(t))}))]})),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},type:"select",required:!0}),Object(re.jsx)(Ee.a,{name:"expertise",className:"form-control",onChange:function(e){t.setState({updated_area_of_experties2:e.target.value})},component:function(e){return Object(re.jsxs)("div",{children:[t.state.subcategories?Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"expertSubCategories",className:"form-control"},e.input),{},{children:[Object(re.jsx)("option",{value:"",children:"Select"}),t.state.subcategories.map((function(e,t){return Object(re.jsx)("option",{value:e.slug,children:e.name},"OPT_".concat(t))}))]})):Object(re.jsx)("select",{name:"expertSubCategories",className:"form-control",children:Object(re.jsx)("option",{value:"undefined"!==t.state.updated_area_of_experties2?t.state.updated_area_of_experties2:"",children:"undefined"!==t.state.updated_area_of_experties2?t.state.updated_area_of_experties2:""})}),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},type:"select",required:!0})]})})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Years of expertise"}),Object(re.jsx)("dd",{children:Object(re.jsx)("input",{className:"form-control",onChange:function(e){t.setState({updated_years_of_experties:e.target.value})},defaultValue:this.state.updated_years_of_experties})})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Focus of expertise"}),Object(re.jsx)("dd",{children:Object(re.jsx)("input",{className:"form-control",onChange:function(e){t.setState({updated_focus_of_experties:e.target.value})},defaultValue:this.state.updated_focus_of_experties})})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Rating"}),Object(re.jsxs)("dd",{children:[this.state.expert.expertRating&&null!==this.state.expert.expertRating&&void 0!==this.state.expert.expertRating&&""!==this.state.expert.expertRating?this.state.expert.expertRating:"No Ratings Available",this.state.expert.expertRating&&null!==this.state.expert.expertRating&&void 0!==this.state.expert.expertRating&&""!==this.state.expert.expertRating&&Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]}),Object(re.jsxs)("div",{className:"profile-bor-detail expert-social-links",children:[Object(re.jsx)("dt",{children:"Social link "}),Object(re.jsxs)("dd",{children:[this.state.expert.facebookURL&&null!==this.state.expert.facebookURL&&void 0!==this.state.expert.facebookURL&&""!==this.state.expert.facebookURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.facebookURL?this.state.expert.facebookURL:"#",title:"facebook",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-facebook-official","aria-hidden":"true"})}),this.state.expert.twitterURL&&null!==this.state.expert.twitterURL&&void 0!==this.state.expert.twitterURL&&""!==this.state.expert.twitterURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.twitterURL?this.state.expert.twitterURL:"#",title:"twitter",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-twitter","aria-hidden":"true"})}),this.state.expert.linkedinURL&&null!==this.state.expert.linkedinURL&&void 0!==this.state.expert.linkedinURL&&""!==this.state.expert.linkedinURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.linkedinURL?this.state.expert.linkedinURL:"#",title:"linkedin",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-linkedin","aria-hidden":"true"})}),this.state.expert.instagramURL&&null!==this.state.expert.instagramURL&&void 0!==this.state.expert.instagramURL&&""!==this.state.expert.instagramURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.instagramURL?this.state.expert.instagramURL:"#",title:"instagram",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-instagram","aria-hidden":"true"})}),this.state.expert.snapchatURL&&null!==this.state.expert.snapchatURL&&void 0!==this.state.expert.snapchatURL&&""!==this.state.expert.snapchatURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.snapchatURL?this.state.expert.snapchatURL:"#",title:"snapchat",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-snapchat","aria-hidden":"true"})}),this.state.expert.websiteURL&&null!==this.state.expert.websiteURL&&void 0!==this.state.expert.websiteURL&&""!==this.state.expert.websiteURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.websiteURL?this.state.expert.websiteURL:"#",title:"website",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-anchor","aria-hidden":"true"})}),this.state.expert.googleURL&&null!==this.state.expert.googleURL&&void 0!==this.state.expert.googleURL&&""!==this.state.expert.googleURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.googleURL?this.state.expert.googleURL:"#",title:"google",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-google","aria-hidden":"true"})}),this.state.expert.youtubeURL&&null!==this.state.expert.youtubeURL&&void 0!==this.state.expert.youtubeURL&&""!==this.state.expert.youtubeURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.youtubeURL?this.state.expert.youtubeURL:"#",title:"youtube",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-youtube","aria-hidden":"true"})}),this.state.expert.soundcloudURL&&null!==this.state.expert.soundcloudURL&&void 0!==this.state.expert.soundcloudURL&&""!==this.state.expert.soundcloudURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.soundcloudURL?this.state.expert.soundcloudURL:"#",title:"soundcloud",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-soundcloud","aria-hidden":"true"})}),""===this.state.expert.facebookURL&&""===this.state.expert.twitterURL&&""===this.state.expert.linkedinURL&&""===this.state.expert.instagramURL&&""===this.state.expert.snapchatURL&&""===this.state.expert.websiteURL&&""===this.state.expert.googleURL&&"No Social Links Available Yet"]})]}),Object(re.jsxs)("div",{className:"profile-bor-detail expert-endorsements",children:[Object(re.jsx)("dt",{children:"Endorsements "}),Object(re.jsx)("dd",{children:a})]})]}),Object(re.jsx)("button",{className:"btn btn-info",onClick:function(){t.saveChanges()},children:"Save Changes"})]})})})]})})}),Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("div",{className:"col-md-3",children:Object(re.jsx)(wt,{expertSlug:this.props.match.params.slug})}),Object(re.jsxs)("div",{className:"col-md-8",children:[Object(re.jsx)(xt.a,{images:["https://grace951.github.io/react-image-carousel/img/landing1.jpg","https://grace951.github.io/react-image-carousel/img/landing3.jpg","https://grace951.github.io/react-image-carousel/img/landing5.jpg"],thumb:!0,loop:!0,autoplay:0}),Object(re.jsx)("div",{className:"comment",children:Object(re.jsx)(zt,{expert:this.props.match.params.slug,userEmail:null===(e=this.state.currentUser)||void 0===e?void 0:e.email,expertEmail:this.state.expertEmail})}),Object(re.jsx)("div",{className:"comment list",children:this.state.comments.map((function(e,t){return Object(re.jsxs)("div",{children:[Object(re.jsx)("img",{src:"/expertCategorieses/"+e.users[0].profileImage,height:"50px",width:"50px",alt:""}),Object(re.jsx)("a",{href:"/expert/"+e.users[0].expertCategories[0]+"/"+e.users[0].slug,style:{cursor:"pointer"},children:e.users[0].profile.firstName+" "+e.users[0].profile.lastName}),Object(re.jsx)("p",{children:e.text})]},t)}))})]})]})]})})})}),Object(re.jsx)("div",{id:"myModalAudio",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Message"})]}),Object(re.jsx)("div",{className:"modal-body text-center",children:Object(re.jsx)("div",{className:"alert alert-danger",children:"Please login to place audio call"})}),Object(re.jsx)("div",{className:"modal-footer text-center",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",children:"Dismiss"})})})})})]})})}),Object(re.jsx)("div",{id:"myModalEmail",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Send Email"})]}),Object(re.jsxs)("form",{id:"send_email_form",onSubmit:r(this.handleFormSubmit.bind(this)),children:[Object(re.jsxs)("div",{className:"modal-body",children:[Object(re.jsx)("p",{className:"text-center",children:" Shoot email message to expert "}),Object(re.jsx)("table",{className:"table table-hover",children:Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsxs)("td",{children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseEmailMsg}}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Email"}),Object(re.jsx)(Ee.a,{name:"email",component:ms,type:"email"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Message"}),Object(re.jsx)(Ee.a,{name:"message",rows:"3",component:js,type:"text"})]})})]})})})})]}),Object(re.jsx)("div",{className:"modal-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send Email"}),"\xa0",Object(re.jsx)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",children:"Close"})]})})})})]})]})})}),Object(re.jsx)("div",{id:"myModalTextMessage",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Send Text Message"})]}),Object(re.jsxs)("form",{id:"send_text_form",onSubmit:r(this.handleTextMessageFormSubmit.bind(this)),children:[Object(re.jsxs)("div",{className:"modal-body",children:[Object(re.jsx)("p",{className:"text-center",children:" Shoot text message to expert "}),Object(re.jsx)("table",{className:"table table-hover",children:Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsxs)("td",{children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseTextMsg}}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Email"}),Object(re.jsx)(Ee.a,{name:"text_email",component:ms,type:"email"}),Object(re.jsx)(Ee.a,{name:"text_expert_email",value:this.state.expertEmail,type:"hidden",component:ps}),Object(re.jsx)("input",{name:"text_expert_email",hidden:!0,value:this.state.expertEmail,type:"hidden"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Your Message"}),Object(re.jsx)(Ee.a,{name:"text_message",rows:"3",component:js,type:"text"})]})})]})})})})]}),Object(re.jsx)("div",{className:"modal-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer",children:Object(re.jsx)("div",{className:"bootstrap-dialog-footer-buttons text-center",children:Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send Text Message"}),"\xa0",Object(re.jsx)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",children:"Close"})]})})})})]})]})})})]})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:this.state.loading?this.renderLoading():this.renderPosts()})}}]),s}(i.Component);var xs=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message}}),{sendEmail:Xe,sendTextMessage:Qe,checkBeforeSessionStart:tt,createAudioSession:st,startRecording:it,stopRecording:nt,rechargeVideoSession:rt,getVideoSession:at})(Object(Q.g)(Object(ue.a)(hs(bs)))),gs=s(42),fs=Object(Ue.a)({form:"expertReplyMessage"}),Os=Vt,vs=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(gs.a)({},e.target.name,e.target.value))},a.state={composedMessage:"",emojionearea1:""},a.handleChange=a.handleChange.bind(Object(we.a)(a)),Os.emit("expert enter session",a.props.sessionOwnerUsername),Os.on("refresh expert session messages",(function(e){a.props.expertEmail===a.props.messageReceiverEmail?(console.log("~~~~~ case 1: "+a.props.sessionOwnerUsername+" ---- "+a.props.messageSenderEmail),a.props.FetchExpertConversation(a.props.sessionOwnerUsername,a.props.messageSenderEmail).then((function(e){window.$(".Chating_msg_Here").animate({scrollTop:window.$(".Chating_msg_Here ul").prop("scrollHeight")})}))):(console.log("~~~~~ case 2: "+a.props.sessionOwnerUsername+" ---- "+a.props.expertEmail),a.props.FetchExpertConversation(a.props.sessionOwnerUsername,a.props.messageReceiverEmail).then((function(e){window.$(".Chating_msg_Here").animate({scrollTop:window.$(".Chating_msg_Here ul").prop("scrollHeight")})})))})),a}return Object(te.a)(s,[{key:"componentWillUnmount",value:function(){Os.emit("expert leave session",this.props.sessionOwnerUsername)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;window.$(document).ready((function(){window.$("#emojionearea1").emojioneArea({events:{change:function(e,t){},keypress:function(t,s){if(13===s.keyCode){s.preventDefault();var a=t[0].innerHTML,r=document.createElement("div");r.innerHTML=a;for(var i,n="",c=0;c<r.childNodes.length;c++)void 0===r.childNodes[c].tagName&&"DIV"!==r.childNodes[c].tagName&&(n=""===n?r.childNodes[c].textContent:n+" "+r.childNodes[c].textContent),"IMG"===r.childNodes[c].tagName&&(n=n+" "+r.childNodes[c].getAttribute("alt"));if(i=n,""!==a){var o=new Date;e.props.ExpertSendReply(e.props.sessionOwnerUsername,e.props.messageReceiverEmail,e.props.messageSenderEmail,i,o),t[0].innerHTML="",window.$(".emojionearea-editor")[0].innerHTML="",window.$(".emojionearea-editor").html(""),window.$(".Chating_msg_Here").animate({scrollTop:window.$(".Chating_msg_Here ul").prop("scrollHeight")})}window.$(".emojionearea-editor").html("")}}}})}))}},{key:"handleFormSubmit",value:function(){}},{key:"renderAlert",value:function(){return this.props.errorMessage?Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("strong",{children:"Oops!"})," ",this.props.errorMessage]}):this.props.message?Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Success!"})," ",this.props.message]}):void 0}},{key:"render",value:function(){var e=this.props.handleSubmit;return Object(re.jsxs)("form",{onSubmit:e(this.handleFormSubmit.bind(this)),children:[this.renderAlert(),Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)("textarea",{name:"emojionearea1",id:"emojionearea1",value:this.state.emojionearea1,onChange:this.handleChange})})]})}}]),s}(i.Component);var ys=Object(u.b)((function(e){return{recipients:e.communication.recipients,errorMessage:e.communication.error}}),{ExpertSendReply:ts,FetchExpertConversation:Qt})(fs(vs)),Ns=s(99),ws=function(e){Object(se.a)(a,e);var t=Object(ae.a)(a);function a(e){var s;return Object(ee.a)(this,a),(s=t.call(this,e)).props.FetchExpertConversation(s.props.match.params.slug),s.state={expert:"",firstName:"",lastName:"",apiKey:"",apiSecret:"",showEndCallOptions:"",loading:!1,error:null,session:"",publisher:""},s.state={time:{},seconds:1800},s.timer=0,s.startTimer=s.startTimer.bind(Object(we.a)(s)),s.countDown=s.countDown.bind(Object(we.a)(s)),s.props.protectedTest(),window.$(document).ready((function(){window.$(".Chat_Trigger").click((function(){window.$("body").addClass("OpenChatList")})),window.$(document).on("click",".Hide_Left_panel",(function(){window.$("body").removeClass("OpenChatList")})),setTimeout((function(){window.$("body").addClass("OpenChatList");var e=window.$(".mainContainer").height();window.$(".Left_Panel").css("height",e+"px")}),1200)})),window.$((function(){console.log("session page dom loaded")})),s}return Object(te.a)(a,[{key:"renderInbox",value:function(){var e=s(44);if(this.props.messages)return Object(re.jsx)("ul",{children:this.props.messages.map((function(t,s){return Object(re.jsxs)("li",{className:"me",children:[Object(re.jsx)("span",{className:"message-body",children:t.message}),Object(re.jsx)("div",{className:"session-msg-date",children:e(t.messageTime).from(e())})]},"DATA_".concat(s))}))})}},{key:"secondsToTime",value:function(e){var t=e%3600,s=t%60;return{h:Math.floor(e/3600),m:Math.floor(t/60),s:Math.ceil(s)}}},{key:"callNowButtonClick",value:function(e){}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;oe.a.post("".concat(pe,"/createVideoSession"),{expertEmail:"rohit@gmail.com",userEmail:"mohit@gmail.com"}).then((function(t){e.setState({session:Ns.initSession(t.data.session.sessionId)}),e.setState({publisher:Ns.initPublisher(t.data.session.ot.apiKey,"publisher",{width:"100%",height:400},(function(e){e?console.log("Publisher error : "+e):(window.$(".Left_Panel").css("height",window.$(".mainContainer").height()+"px"),console.log("Publisher initialized."))}))}),e.startTimer(),e.setState({showEndCallOptions:!0}),e.setState({sessionId:t.data.session.sessionId}),e.setState({apiKey:t.data.session.ot.apiKey}),e.setState({apiSecret:t.data.session.ot.apiSecret}),e.setState({loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))}},{key:"componentDidMount",value:function(){var e=this,t=this.secondsToTime(this.state.seconds);this.setState({time:t});var s=this.props.match.params.slug;oe.a.get("".concat(pe,"/getExpertDetail/").concat(s)).then((function(t){var s=t.data[0];e.setState({firstName:t.data[0].profile.firstName}),e.setState({lastName:t.data[0].profile.lastName}),e.setState({expert:s,loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))}},{key:"startTimer",value:function(){0===this.timer&&(this.timer=setInterval(this.countDown,1e3))}},{key:"countDown",value:function(){var e=this.state.seconds-1;this.setState({time:this.secondsToTime(e),seconds:e}),0===e&&clearInterval(this.timer)}},{key:"redAlertTiming",value:function(e){if(e<=this.props.redAlert)return Object.assign({"-webkit-animation":"shake 0.1s ease-in-out 0.1s infinite alternate",color:"#FF0000"})}},{key:"disconnect",value:function(){this.state.publisher&&this.state.session.unpublish(this.state.publisher)}},{key:"render",value:function(){return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsxs)("li",{className:"breadcrumb-item",children:["Session with ",this.state.firstName," ",this.state.lastName]})]}),Object(re.jsx)("section",{children:Object(re.jsxs)("div",{className:"mainContainer",children:[Object(re.jsxs)("div",{className:"Left_Panel",children:[Object(re.jsxs)("div",{className:"Conversation",children:[Object(re.jsx)("h6",{children:"Conversation"}),Object(re.jsx)("a",{className:"Hide_Left_panel",children:Object(re.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})})]}),Object(re.jsxs)("div",{className:"Chat_Main_section",children:[Object(re.jsx)("div",{className:"Chating_msg_Here",children:this.renderInbox()}),Object(re.jsxs)("div",{className:"typeMessage",children:[Object(re.jsx)(ys,{sessionOwnerUsername:this.props.match.params.slug,messageReceiverEmail:"avadhesh_bhatt@rvtechnologies.co.in",messageSenderEmail:"mohit@gmail.com"}),Object(re.jsxs)("div",{className:"SendBtn_action",children:[Object(re.jsx)("li",{children:Object(re.jsx)("a",{children:Object(re.jsx)("i",{className:"fa fa-smile-o","aria-hidden":"true"})})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{children:Object(re.jsx)("i",{className:"fa fa-paper-plane","aria-hidden":"true"})})})]})]})]})]}),Object(re.jsxs)("div",{className:"Right_Panel",children:[Object(re.jsx)("div",{className:"CallingDetails",children:Object(re.jsxs)("div",{className:"ClientName",children:[Object(re.jsx)("span",{children:Object(re.jsx)("i",{className:"fa fa-users","aria-hidden":"true"})}),"2 Participants"]})}),Object(re.jsx)("div",{className:"Client_image",children:Object(re.jsxs)("div",{className:"innerm",children:[this.state.showEndCallOptions?null:Object(re.jsx)(Ss,{}),Object(re.jsx)("div",{id:"publisher"}),Object(re.jsx)("div",{id:"subscribers"}),Object(re.jsxs)("div",{className:"upperimageName",children:[Object(re.jsxs)("div",{className:"text-left-detail",children:[Object(re.jsx)("i",{className:"fa fa-user-o","aria-hidden":"true"}),this.state.firstName," ",this.state.lastName]}),Object(re.jsxs)("div",{className:"text-right-detail",style:this.redAlertTiming(this.state.time.m),children:[Object(re.jsx)("i",{className:"fa fa-clock-o","aria-hidden":"true"}),this.state.time.m," : ",this.state.time.s]})]})]})}),Object(re.jsx)("div",{className:"footer_action_btns",children:Object(re.jsxs)("ul",{children:[Object(re.jsx)("li",{className:"Chat_Trigger",children:Object(re.jsx)("a",{children:Object(re.jsx)("i",{className:"fa fa-commenting","aria-hidden":"true"})})}),this.state.showEndCallOptions?null:Object(re.jsx)("li",{className:"create_phone_call",children:Object(re.jsxs)("div",{children:[Object(re.jsx)("i",{className:"fa fa-video-camera","aria-hidden":"true"}),"Initiating session..."]})}),this.state.showEndCallOptions?Object(re.jsx)("li",{className:"phone_call",children:Object(re.jsx)("div",{onClick:this.disconnect.bind(this),children:Object(re.jsx)("i",{className:"fa fa-phone"})})}):null]})})]})]})})]})})})}}]),a}(i.Component),Ss=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("img",{className:"loader-center-ajax",src:"/img/ajax-loader-l.gif",alt:""})}}]),s}(i.Component);ws.defaultProps={redAlert:5};var _s=Object(u.b)((function(e){return{content:e.auth.content,messages:e.communication.messages}}),{protectedTest:Fe,FetchExpertConversation:Qt})(Object(Q.g)(Object(ue.a)(ws))),ks=s(297),Cs=s(1084),Rs=s(489);var Ms=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("img",{className:"loader-center-ajax",src:"/img/ajax-loader-l.gif",alt:"loader center"})}}]),s}(i.Component),Ls=Vt,Us=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),a=t.call(this,e),document.addEventListener("DOMContentLoaded",(function(){var e={click:!1,move:!1,pos:{x:0,y:0},pos_prev:!1},t=document.getElementById("drawing"),s=t.getContext("2d"),a=window.$("#canvas-wrapper").innerWidth()-50;console.log("*** canvas_wrapper.offsetWidth *** "+a+" "+window.innerWidth);var r=1,i="#000000",n=8,c="/img/eraser-normal.png",o="pen";t.width=a,t.height=500;var l=document.getElementById("pen-tool"),d=document.getElementById("eraser-tool"),u=document.getElementById("clearBoard");function h(){e.click&&e.move&&e.pos_prev&&(Ls.emit("draw_line",{line:[e.pos,e.pos_prev,o,r,i,n]}),e.move=!1),e.pos_prev={x:e.pos.x,y:e.pos.y},setTimeout(h,25)}l.onclick=function(){o="pen",t.style.cursor='url("pencil.png"), auto'},d.onclick=function(){o="eraser",t.style.cursor='url("'+c+'"), auto'},u.onclick=function(){o="clearboard",Ls.emit("draw_line",{line:[e.pos,e.pos_prev,o,r,i,n]})},t.onmousedown=function(t){e.click=!0,s.lineWidth=2,s.lineJoin=s.lineCap="round",s.shadowColor="rgb(0, 0, 0)",h()},t.onmouseup=function(t){e.click=!1},t.onmousemove=function(t){var s=window.$(this).offset();e.pos.x=t.pageX-s.left,e.pos.y=t.pageY-s.top,e.move=!0,h()},Ls.on("draw_line",(function(e){var a=e.line;s.beginPath(),"pen"===a[2]?(s.globalCompositeOperation="source-over",s.moveTo(a[0].x,a[0].y),s.lineTo(a[1].x,a[1].y),s.lineWidth=a[3],s.strokeStyle=a[4],s.stroke()):"eraser"===a[2]?(s.globalCompositeOperation="destination-out",s.rect(a[0].x,a[0].y,a[5],a[5]),s.fill()):s.clearRect(0,0,t.width,t.height)})),window.$(".pen-thickness-wrapper li a").on("click",(function(){var e=window.$(this).data("thick");e=parseInt(e),r=e})),window.$(".pen-color-wrapper li a").on("click",(function(){var e=window.$(this).data("color");i=e})),window.$(".eraser-size-wrapper li a").on("click",(function(){if("eraser"===o){var e=window.$(this).data("size"),s=window.$(this).data("size-name");e=parseInt(e),n=e,c=s+".png",t.style.cursor='url("/img/'+c+'"), auto'}})),document.getElementById("download-canvas").addEventListener("click",(function(){var e,t,s;e=this,t="drawing",s="screenshot-"+Date.now()+".png",e.href=document.getElementById(t).toDataURL(),e.download=s}),!1)})),a}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("div",{className:"WhiteBoard_Main_section",children:Object(re.jsxs)("div",{className:"Conversation",children:[Object(re.jsx)("h6",{children:"White Board"}),Object(re.jsx)("a",{href:"#!",className:"whiteBoard_close",children:Object(re.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})}),Object(re.jsxs)("div",{className:"dropdown-wrapper",children:[Object(re.jsxs)("div",{className:"dropdown dropdown_Thickness",children:[Object(re.jsx)("a",{className:"dropdown-toggle",title:"Pen Thickness",href:"#!","data-toggle":"dropdown","aria-expanded":"false",rel:"noreferrer",children:Object(re.jsx)("img",{height:"20",width:"30",src:"/img/penthickness.png",alt:""})}),Object(re.jsxs)("ul",{className:"dropdown-menu pen-thickness-wrapper","aria-labelledby":"dropdownMenu2",children:[Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-thick":"1",href:"#!",children:"Normal"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-thick":"3",href:"#!",children:"Bold"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-thick":"5",href:"#!",children:"Bolder"})})]})]}),Object(re.jsxs)("div",{className:"dropdown dropdown_Color",children:[Object(re.jsx)("a",{className:"dropdown-toggle","data-toggle":"dropdown",title:"Pen Color",href:"#!","aria-expanded":"false",children:Object(re.jsx)("img",{height:"20",src:"/img/pencolor.png",alt:""})}),Object(re.jsxs)("ul",{className:"dropdown-menu pen-color-wrapper",children:[Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-color":"#000000",href:"#!",children:"Black"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-color":"#FF0000",href:"#!",children:"Red"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-color":"#009933",href:"#!",children:"Green"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-color":"#0000CC",href:"#!",children:"Blue"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-color":"#FFFF0A",href:"#!",children:"Yellow"})})]})]}),Object(re.jsxs)("div",{className:"dropdown dropdown_Eraser",children:[Object(re.jsx)("a",{className:"dropdown-toggle",title:"Eraser Size",href:"#!","data-toggle":"dropdown","aria-expanded":"false",rel:"noreferrer",children:Object(re.jsx)("img",{src:"/img/erasersize.png",alt:""})}),Object(re.jsxs)("ul",{className:"dropdown-menu eraser-size-wrapper",children:[Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-size":"8","data-size-name":"eraser-normal",href:"#!",children:"Normal"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-size":"12","data-size-name":"eraser-wide",href:"#!",children:"Wide"})}),Object(re.jsx)("li",{children:Object(re.jsx)("a",{"data-size":"16","data-size-name":"eraser-wider",href:"#!",children:"Wider"})})]})]}),Object(re.jsx)("div",{className:"dropdown dropdown_Download",children:Object(re.jsx)("a",{id:"download-canvas",title:"Download Screenshot",href:"#!",children:Object(re.jsx)("img",{height:"20",src:"/img/cloud-computing.png",alt:""})})})]}),Object(re.jsxs)("div",{id:"canvas-wrapper",className:"col-md-12",children:[Object(re.jsx)("canvas",{id:"drawing"}),Object(re.jsxs)("div",{className:"canvas-tools",children:[Object(re.jsx)("div",{className:"Pen_Tools",children:Object(re.jsx)("a",{"data-toggle":"tooltip",className:"active",title:"Pen",id:"pen-tool",href:"#!",children:Object(re.jsx)("img",{src:"/img/pen.png",alt:""})})}),Object(re.jsx)("div",{className:"Erazer_Tools",children:Object(re.jsx)("a",{"data-toggle":"tooltip",title:"Erazer",id:"eraser-tool",href:"#!",children:Object(re.jsx)("img",{src:"/img/eraser.png",alt:""})})}),Object(re.jsx)("div",{className:"Clear_Tools",children:Object(re.jsx)("a",{"data-toggle":"tooltip",title:"Clear Board",id:"clearBoard",href:"#!",children:Object(re.jsx)("i",{className:"fa fa-window-close","aria-hidden":"true"})})})]})]})]})})}}]),s}(i.Component),Es=s(490),Is=s.n(Es),As=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={userRating:0,userReview:"",reviewTitle:"",expertInfo:"",userInfo:"",redirectAlert:!1,reviewBy:"",currentDate:yt()().format("LLLL")},a.ratingChange=a.ratingChange.bind(Object(we.a)(a)),a.reviewChange=a.reviewChange.bind(Object(we.a)(a)),a.reviewTitleChange=a.reviewTitleChange.bind(Object(we.a)(a)),a.submitReview=a.submitReview.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.expertSlug;oe.a.get("".concat(pe,"/getExpertDetail/").concat(t)).then((function(t){var s=t.data[0];e.setState({expertInfo:s})})).catch((function(e){}));var s=this.props.cookies.get("user");s&&this.setState({userInfo:s})}},{key:"ratingChange",value:function(e){var t=e;this.setState({userRating:t})}},{key:"reviewChange",value:function(e){var t=e.target.value;this.setState({userReview:t})}},{key:"reviewTitleChange",value:function(e){var t=e.target.value;this.setState({reviewTitle:t})}},{key:"submitReview",value:function(e){var t=this,s=this.state.userRating,a=this.state.userReview,r=this.state.reviewTitle,i=this.state.expertInfo.email,n=this.state.expertInfo.profile.firstName+" "+this.state.expertInfo.profile.lastName,c=this.state.userInfo.email,o=this.state.userInfo.firstName+" "+this.state.userInfo.lastName,l=this.props.expertSlug,d=this.props.reviewBy;this.props.saveUserReview({rating:s,review:a,title:r,expertEmail:i,expertFullName:n,userEmail:c,userFullName:o,expertSlug:l,reviewBy:d}).then((function(e){console.log(JSON.stringify(e)),t.setState({redirectAlert:!0}),t.props.onSubmitReview()}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("errors: "+JSON.stringify(t))}))})),console.log("*** user rating ***"+s),console.log("*** user review ***"+a),console.log("*** expert full Name *** "+this.state.expertInfo.profile.firstName+" "+this.state.expertInfo.profile.lastName),console.log("*** expertInfo *** "+JSON.stringify(this.state.expertInfo))}},{key:"render",value:function(){return Object(re.jsx)("div",{children:Object(re.jsxs)(gt.a,{className:"modal-container user-review-modal Your-Receipt-modal",show:this.props.showUserReviewModal,onHide:this.close,animation:!0,bsSize:"small",children:[Object(re.jsx)(gt.a.Header,{children:Object(re.jsxs)("div",{className:"Your_receipt",children:[Object(re.jsx)("h1",{children:"User"===this.props.reviewBy?"Your Receipt":"Your Review"}),Object(re.jsx)("h3",{children:this.state.currentDate})]})}),Object(re.jsxs)(gt.a.Body,{children:[Object(re.jsxs)("div",{className:"alert alert-info",style:{display:this.state.redirectAlert?"block":"none"},children:["User"===this.props.reviewBy&&"Thank you for submitting your review for your session with "+this.props.reviewModalData.name+", your review will be visible on Expert's profile soon.","Expert"===this.props.reviewBy&&"Thank you for submitting your review.",Object(re.jsxs)("p",{children:["Redirecting you to home page ",Object(re.jsx)("i",{className:"fa fa-spinner"})]})]}),"User"===this.props.reviewBy&&Object(re.jsx)("div",{className:"Rate_price",children:Object(re.jsxs)("h1",{children:["$",this.props.reviewModalData.sessionPaymentAmount+".00"]})}),Object(re.jsxs)("div",{className:"Name_and_details_area",children:[Object(re.jsx)("div",{className:"man_img",children:Object(re.jsx)("img",{src:this.props.reviewModalData.image,alt:""})}),Object(re.jsx)("span",{children:this.props.reviewModalData.name}),Object(re.jsx)("i",{className:this.props.reviewModalData.icon_classname,"aria-hidden":"true"})]}),"User"===this.props.reviewBy&&Object(re.jsx)("div",{className:"need-help",children:Object(re.jsx)("a",{href:"#!",children:"need-help?"})}),Object(re.jsx)("div",{className:"Rate_ride",children:Object(re.jsx)("span",{children:this.props.reviewModalData.rate_your_text})}),Object(re.jsx)("div",{className:"Review_star",children:Object(re.jsx)(Is.a,{value:this.state.userRating,onChange:this.ratingChange,size:24,activeColor:"#ffd700"})}),Object(re.jsx)("form",{className:"leave_comment",children:Object(re.jsx)("textarea",{onChange:this.reviewChange,placeholder:"Leave a Comment"})})]}),Object(re.jsx)(gt.a.Footer,{children:Object(re.jsx)(ft.a,{className:"Submit_comment",bsStyle:"success",onClick:this.submitReview,children:"Submit"})})]})})}}]),s}(i.Component),Ts=Object(u.b)(null,{saveUserReview:function(e){var t=e.rating,s=e.review,a=e.title,r=e.expertEmail,i=e.expertFullName,n=e.userEmail,c=e.userFullName,o=e.expertSlug,l=e.reviewBy;return function(e){return oe.a.post("".concat(pe,"/saveUserReview"),{rating:t,review:s,title:a,expertEmail:r,expertFullName:i,userEmail:n,userFullName:c,expertSlug:o,reviewBy:l}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}})(Object(ue.a)(As)),Ds=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).handleClose=a.handleClose.bind(Object(we.a)(a)),a.state={show:!1},a}return Object(te.a)(s,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:Object(re.jsxs)(gt.a,{className:"modal-container",show:this.props.showErrorExpertNotActiveModal,onHide:this.close,animation:!0,bsSize:"small",children:[Object(re.jsx)(gt.a.Header,{children:Object(re.jsxs)("div",{children:["Expert ",Object(re.jsx)("b",{children:this.props.expertSlug})," Offline"]})}),Object(re.jsx)(gt.a.Body,{children:Object(re.jsx)("div",{className:"alert-error",children:this.props.errorExpertNotActiveModalData})}),Object(re.jsx)(gt.a.Footer,{children:Object(re.jsx)(ft.a,{onClick:this.handleClose,children:"Close and Go Back"})})]})})}}]),s}(i.Component),Fs=Object(u.b)(null,{})(Ds),Ps=s(99),Bs=Vt,$s=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;Object(ee.a)(this,s),(a=t.call(this,e)).state={expert:"",role:"",firstName:"",lastName:"",apiToken:"",showEndCallOptions:!1,session:"",publisher:"",numberofConnections:0,errorSession:!1,errorSessionMessage:"",streams:{},sessionDate:"",sessionObj:"",publisherObj:"",currentUser:"",time:{},seconds:a.props.cookies.get("selectMins")?a.props.cookies.get("selectMins"):1800,showUserReviewModal:!1,showErrorExpertNotActiveModal:!1,errorExpertNotActiveModalData:"",sessionStartEndBtn:"start",isShowingInfoAlert:!1,infoAlertText:"",isExpertStartedSession:!1,refreshIntervalId:"",expert_stripe_id:"",connected_username:"",connected_useremail:"",connected_userimage:"",videoSessionStartTime:"",videoSessionEndTime:"",sessionEndBy:"",reviewModalData:{sessionPaymentAmount:0,name:"",image:"",icon_classname:""},video_session_id:"",blurChatAreaStatus:!0,blurChatAreaStatusMessage:"",videoDisableWarning:!1,videoDisabled:!1,subscriber:null},a.timer=0,a.startTimer=a.startTimer.bind(Object(we.a)(a)),a.stopTimer=a.stopTimer.bind(Object(we.a)(a)),a.countDown=a.countDown.bind(Object(we.a)(a)),a.disconnectOT=a.disconnect.bind(Object(we.a)(a)),a.props.protectedTest(),window.$(document).ready((function(){window.$(".Chat_Trigger").click((function(){window.$("body").toggleClass("OpenChatList")})),window.$(document).on("click",".Hide_Left_panel",(function(){window.$("body").toggleClass("OpenChatList")})),window.$(document).on("click",".WhiteBoard_Trigger a,.whiteBoard_close",(function(){window.$("body").toggleClass("OpenWhiteBoard"),window.$(".whiteBoard_close").removeClass("OpenWhiteBoard")})),window.$(document).on("click",".stream-end-btn",(function(){window.$(this).parent().remove()})),window.$(".canvas-tools a").click((function(){window.$(".canvas-tools a").removeClass("active"),window.$(this).addClass("active")}))})),Bs.on("expert user disconnected",(function(e){console.log("client side : expert user disconnected "+a.state.time+" : "+a.state.seconds)}));var r=new Date;r=r.getDate()+"/"+r.getMonth()+"/"+r.getFullYear(),a.state.sessionDate=r;var i=a.secondsToTime(a.state.seconds);a.state.time=i;var n=a.props.match.params.slug,c=a.props.cookies.get("user"),o=c._id;return"Expert"===c.role&&oe.a.get("".concat(pe,"/myuserprofile/").concat(o),{headers:{Authorization:a.props.cookies.get("token")}}).then((function(e){var t=e.data.user.role,s=e.data.user.stripeId;e&&null!=e&&e.data&&null!==e.data&&e.data.user&&null!==e.data.user&&void 0!==e.data.user&&"Expert"===t&&""===s&&(window.location.href="/dashboard/confirm-payments")})),oe.a.get("".concat(pe,"/getExpertDetail/").concat(n)).then((function(e){var t=e.data[0];a.state.firstName=e.data[0].profile.firstName,a.state.lastName=e.data[0].profile.lastName,a.state.expert=t,a.state.expert_stripe_id=t.stripeId})).catch((function(e){})),a.state.currentUser=a.props.cookies.get("user"),a.startVideoSession=a.startVideoSession.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"handleFormSubmit",value:function(e){console.log("handleFormSubmit")}},{key:"componentDidMount",value:function(){var e=this,t=this;console.log(this.props.location),setTimeout((function(){var e=window.$(".emojionearea-editor")[0];void 0!==e&&null!==e||this.props.history.push(this.props.location.pathname)}),1e3);var s=this,a=this.props.cookies.get("user"),r=this.props.match.params.slug,i=a.email,n=a.slug,c=this.props.match.params.slug,o=!1;n===r&&(o=!0),oe.a.post("".concat(pe,"/createVideoSession"),{expertSlug:r,userEmail:i,sessionOwner:o}).then((function(a){var r;console.log("*** createVideoSession ***"),a&&a.data.err&&"expert_session_inactive"===a.data.err_code&&e.setState({showErrorExpertNotActiveModal:!0,errorExpertNotActiveModalData:a.data.err}),e.setState({sessionId:a.data.sessionId});var i=Ps.initSession(he,e.state.sessionId);e.setState({sessionObj:i}),i.on("signal:video_session_start",(function(e){if(e.from.id!==i.connection.connectionId){console.log("*** Signal sent from connection "+e.from.id),s.setState({isShowingInfoAlert:!0,infoAlertText:"Expert has started session!",isExpertStartedSession:!0,sessionStartEndBtn:"end",videoSessionStartTime:new Date}),s.state.sessionObj.publish(s.state.publisherObj),s.startTimer();try{var t=s.state.expert.email,a=s.state.currentUser.email,r=s.state.videoSessionStartTime;s.props.saveVideoSessionInfo({expertEmail:t,userEmail:a,sessionCreationDate:r}).then((function(e){console.log("saveVideoSessionInfo response: "+JSON.stringify(e)),s.setState({video_session_id:e.video_session_id})}),(function(e){return e.response.json().then((function(t){t.errors;console.log("saveVideoSessionInfo err: "+JSON.stringify(e))}))}))}catch(n){console.log("saveVideoSessionInfo catch error "+n.message)}}})),i.on("signal:video_session_end",(function(e){e.from.id!==i.connection.connectionId&&(console.log("*** Signal sent from connection "+e.from.id),console.log("signal:video_session_end"))})),i.on("streamCreated",(function(e){e.stream.connection.connectionId===i.connection.connectionId?console.log("*** streamCreated same connectiond id ***"):console.log("*** streamCreated different connectiond id ***");var t=document.createElement("div");t.id="stream-"+e.stream.streamId,document.getElementById("subscribers").appendChild(t),window.$("#"+t.id+" .OT_root").append('<button id="end-btn-'+e.stream.streamId+'" class="stream stream-end-btn">End Button</button>'),console.log("event.stream");var a=i.subscribe(e.stream,"subscribers",{insertMode:"append",style:{nameDisplayMode:"on"}},(function(e){e?console.log(e.message):a.stream.hasVideo}));a.on("videoDisableWarning",(function(e){var t=a.getImgData();a.setStyle("backgroundImageURI",t),s.setState({videoDisableWarning:!0})})),a.on("videoDisableWarningLifted",(function(e){s.setState({videoDisableWarning:!1})})),a.on("videoDisabled",(function(e){s.setState({videoDisabled:!0})})),a.on("videoEnabled",(function(e){s.setState({videoDisabled:!1})})),s.setState({subscriber:a})})).on("streamDestroyed",(function(e){if(console.log("~~~~~~ streamDestroyed"),i.connection.connectionId!==e.stream.connection.connectionId){if(s.setState({sessionStartEndBtn:"start",sessionEndBy:"expert"}),s.state.sessionObj.disconnect(),s.stopTimer(),s.state.currentUser)if(s.setState({role:s.state.currentUser.role}),"User"===s.state.currentUser.role){s.setState({videoSessionEndTime:new Date});var t=new Date(s.state.videoSessionStartTime),a=new Date(s.state.videoSessionEndTime).getTime()-t.getTime(),r=Math.ceil(a/6e4);r=r||1;var n=s.state.currentUser.customerId,o=s.state.currentUser.email,l=s.state.expert.email,d=r,u=s.state.video_session_id,h=Math.round(a/1e3),m=s.state.expert_stripe_id,p=s.state.currentUser.firstName+" "+s.state.currentUser.lastName,j=s.state.expert.profile.firstName+" "+s.state.expert.profile.lastName,b=s.state.currentUser.profileImage?je+s.state.currentUser.profileImage:me+"/img/profile.png",x=s.state.expert.profileImage?je+s.state.expert.profileImage:me+"/img/profile.png";oe.a.post("".concat(pe,"/videosession/payment-video-session"),{customer_id:n,userEmail:o,amount:d,stripe_connect_id:m,video_session_id:u,videoSessionDuration:h,expertEmail:l,userName:p,expertName:j,userImage:b,expertImage:x}).then((function(e){console.log("*** payment video session : success "+JSON.stringify(e.data)+" amount "+d),s.setState({showUserReviewModal:!0,isShowingInfoAlert:!0,infoAlertText:"Expert has ended session!",reviewModalData:{sessionPaymentAmount:d,name:s.state.expert.profile.firstName+" "+s.state.expert.profile.lastName,image:x,icon_classname:"fa fa-graduation-cap",rate_your_text:"Rate Your Session"}}),window.$(".wrapper").addClass("blur_page")})).catch((function(e){console.log("*** payment video session : error "+JSON.stringify(e))}))}else"Expert"===s.state.currentUser.role?(s.setState({showUserReviewModal:!0,isShowingInfoAlert:!0,infoAlertText:"You have ended the session!",reviewModalData:{name:s.state.connected_username,image:s.state.connected_userimage,icon_classname:"fa fa-user",rate_your_text:"Rate your user"}}),window.$(".wrapper").addClass("blur_page")):this.props.history.push("/");console.log("streamDestroyed: "+e.reason+" - "+c),Bs.emit("expert user disconnected",c)}})).on("connectionCreated",(function(e){r+=1,e.connection.connectionId!==i.connection.connectionId&&(console.log("Another client connected. "+r+" total."),s.state.currentUser&&("User"===s.state.currentUser.role?s.setState({isShowingInfoAlert:!0,blurChatAreaStatus:!1,blurChatAreaStatusMessage:"Waiting for Expert to connnect!",infoAlertText:"Expert is online, chat feature is available now"}):s.setState({blurChatAreaStatus:!1,blurChatAreaStatusMessage:"Waiting for User to connnect!"})))})).on("connectionDestroyed",(function(e){console.log("connectionDestroyed. "+r),r-=1;var t="User";"User"===s.state.currentUser.role&&(t="Expert"),s.setState({isShowingInfoAlert:!0,infoAlertText:"Alas, "+t+" left the session page.",blurChatAreaStatus:!0,blurChatAreaStatusMessage:"Waiting for "+t+" to connnect!"})})).on("sessionDisconnected",(function(e){if(console.log("*** sessionDisconnected ***"),s.stopTimer(),s.setState({sessionStartEndBtn:"start"}),s.state.currentUser)if("User"===s.state.currentUser.role){if("expert"!==s.state.sessionEndBy){s.setState({videoSessionEndTime:new Date});var t=new Date(s.state.videoSessionStartTime),a=new Date(s.state.videoSessionEndTime).getTime()-t.getTime(),r=Math.ceil(a/6e4);r=r||1;var i=s.state.currentUser.customerId,n=s.state.currentUser.email,c=s.state.expert.email,o=r,l=s.state.video_session_id,d=Math.round(a/1e3),u=s.state.expert_stripe_id,h=s.state.currentUser.firstName+" "+s.state.currentUser.lastName,m=s.state.expert.profile.firstName+" "+s.state.expert.profile.lastName,p=s.state.currentUser.profileImage?je+s.state.currentUser.profileImage:me+"/img/profile.png",j=s.state.expert.profileImage?je+s.state.expert.profileImage:me+"/img/profile.png";oe.a.post("".concat(pe,"/videosession/payment-video-session"),{customer_id:i,userEmail:n,amount:o,stripe_connect_id:u,video_session_id:l,videoSessionDuration:d,expertEmail:c,userName:h,expertName:m,userImage:p,expertImage:j}).then((function(e){console.log("*** payment video session : success "+JSON.stringify(e.data)+" amount "+o),s.setState({showUserReviewModal:!0,isShowingInfoAlert:!0,infoAlertText:"Expert has ended session!",reviewModalData:{sessionPaymentAmount:o,name:s.state.expert.profile.firstName+" "+s.state.expert.profile.lastName,image:j,icon_classname:"fa fa-graduation-cap",rate_your_text:"Rate Your Session"}}),window.$(".wrapper").addClass("blur_page")})).catch((function(e){console.log("*** payment video session : error "+JSON.stringify(e))}))}}else"Expert"===s.state.currentUser.role?(s.setState({showUserReviewModal:!0,reviewModalData:{name:s.state.connected_username,image:s.state.connected_userimage,icon_classname:"fa fa-user",rate_your_text:"Rate your user"}}),window.$(".wrapper").addClass("blur_page")):this.props.history.push("/")})).on("signal:user_session_connected",(function(e){if(e.from.id!==i.connection.id){console.log("~~~~~~~~~~ ~~~~~~~ ~~~~~~~~ event: ",e),console.log("\n~~~~~~~~~~ ~~~~~~~ ~~~~~~~~ event.data: ",e.data);var t=JSON.parse(e.data),a=t.connected_username,r=t.connected_useremail,n=t.connected_userimage;s.setState({seconds:parseInt(t.seconds),isShowingInfoAlert:!0,infoAlertText:a+" is online, you can start session by clicking on call button.",connected_username:a,connected_useremail:r,connected_userimage:n,blurChatAreaStatus:!1,blurChatAreaStatusMessage:"Waiting for User to connnect!"}),s.props.FetchExpertConversation(s.props.params.slug,r).then((function(e){window.$(".Chating_msg_Here").animate({scrollTop:window.$(".Chating_msg_Here ul").prop("scrollHeight")})}));var c=new Date;c=c.getDate()+"/"+c.getMonth()+"/"+c.getFullYear(),s.state.sessionDate=c;var o=s.secondsToTime(s.state.seconds);s.setState({time:o})}})).on("sessionConnected",(function(e){if(s.state.currentUser&&"User"===s.state.currentUser.role){var t={seconds:s.state.seconds,connected_username:s.state.currentUser.firstName+" "+s.state.currentUser.lastName,connected_useremail:s.state.currentUser.email,connected_userimage:s.state.currentUser.profileImage?je+s.state.currentUser.profileImage:me+"/img/profile.png"};this.props.cookies.get("selectMins")&&this.props.cookies.remove("selectMins",{path:"/"}),i.signal({type:"user_session_connected",data:JSON.stringify(t)},(function(e){e?console.log("signal error ("+e.name+"): "+e.message):console.log("signal sent."+s.state.seconds)})),s.props.FetchExpertConversation(s.props.params.slug,s.state.currentUser.email).then((function(e){window.$(".Chating_msg_Here").animate({scrollTop:window.$(".Chating_msg_Here ul").prop("scrollHeight")})}))}})).connect(e.state.apiToken,(function(e){if(e)console.log("~~~~~~~~~ error .connect: ",e),1010===e.code?window.$("#publisher").html('<div class="alert alert-danger">Alas! You are not connected to the internet. Check your network connection. <a data-toggle="modal" data-target="#myModalExtendSession" class="btn btn-primary"><i className="fa fa-handshake-o"></i> Extend Session Now!</a></div>'):1004===e.code&&window.$("#publisher").html('<div class="alert alert-danger">Alas! Session Expired, Please recharge your account to restart session! <a data-toggle="modal" data-target="#myModalExtendSession" class="btn btn-primary"><i className="fa fa-handshake-o"></i> Extend Session Now!</a></div>');else{console.log("connected");var a={name:t.state.currentUser.firstName+" "+t.state.currentUser.lastName,"z-index":2,"box-shadow":"0 2px 12px 1px rgba(0,0,0,.89)"},r=document.createElement("div"),i=Ps.initPublisher(r,a);setTimeout((function(){window.$("#"+i.id+" .OT_name").text("Me")}),500),document.getElementById("subscribers").appendChild(r),s.setState({publisherObj:i,blurChatAreaStatus:!0,blurChatAreaStatusMessage:"Waiting for User to connnect!"}),window.$(".session-page-container").show(),window.$(".loader-center-ajax").hide(),window.$(".Chating_msg_Here").animate({scrollTop:window.$(".Chating_msg_Here ul").prop("scrollHeight")})}})),e.setState({showEndCallOptions:!0})})).catch((function(t){t&&(console.log("****** err: ",t),e.setState({errorSessionMessage:"<div class='alert alert-danger'>Session is not active from Expert end. Please try again later.</div>"}))})),console.log("Customer id "+this.state.currentUser.customerId),console.log("Stripe connect id "+this.state.currentUser.stripe_connect_id)}},{key:"getClassName",value:function(e,t){return e===t?"me "+t+" - "+e:"you "+t+" - "+e}},{key:"renderInbox",value:function(){var e=this,t=this.props.cookies.get("user");if(this.props.messages)return Object(re.jsx)("ul",{children:this.props.messages.map((function(s,a){return Object(re.jsxs)("li",{className:e.getClassName(s.messageSenderEmail,t.email),children:[Object(re.jsx)("span",{className:"message-body",children:Object(Rs.emojify)(s.message)}),Object(re.jsx)("div",{className:"session-msg-date",children:yt()(s.messageTime).fromNow()})]},"DATA_".concat(a))}))})}},{key:"secondsToTime",value:function(e){var t=e,s=Math.floor(t/3600),a=Math.floor((t-3600*s)/60),r=t-3600*s-60*a;return{h:s,m:a,s:r=Math.round(100*r)/100}}},{key:"startTimer",value:function(){this.state.refreshIntervalId||this.setState({refreshIntervalId:setInterval(this.countDown,1e3)})}},{key:"stopTimer",value:function(){clearInterval(this.state.refreshIntervalId),this.setState({refreshIntervalId:""})}},{key:"countDown",value:function(){var e=this.state.seconds-1;this.setState({time:this.secondsToTime(e),seconds:e}),0===e&&clearInterval(this.timer)}},{key:"redAlertTiming",value:function(e){if(e<=this.props.redAlert&&0===this.state.time.h)return Object.assign({"-webkit-animation":"shake 0.1s ease-in-out 0.1s infinite alternate",color:"#FF0000"})}},{key:"disconnect",value:function(e){e&&e.preventDefault(),this.state.currentUser&&("User"===this.state.currentUser.role?this.state.sessionObj.signal({type:"video_session_end",data:"video call session end by user"},(function(e){e?console.log("*** video session end by user : ERROR ***"+JSON.stringify(e)):console.log("*** video session end by user : SUCCESS ***")})):this.state.sessionObj.signal({type:"video_session_end",data:"video call session end by expert"},(function(e){e?console.log("*** video session end by expert: ERROR ***"+JSON.stringify(e)):console.log("*** video session end by expert: SUCCESS ***")}))),this.state.sessionObj.disconnect()}},{key:"dismissAlert",value:function(){console.log("*** dismissAlert ***"),this.setState({isShowingInfoAlert:!1})}},{key:"startVideoSession",value:function(e){e.preventDefault(),console.log("start video session");var t=this;this.state.sessionObj.signal({type:"video_session_start",data:"session started by expert"},(function(e){e?console.log("*** signal error ("+e.name+"): "+e.message):(t.state.sessionObj.publish(t.state.publisherObj),console.log("*** signal sent ***"))})),this.startTimer(),this.setState({sessionStartEndBtn:"end"}),Bs.emit("admin new expert session starting",{})}},{key:"onSubmitReview",value:function(){var e=this;setTimeout((function(){e.setState({showUserReviewModal:!1}),this.props.history.push("/"),window.$(".wrapper").removeClass("blur_page")}),2e3)}},{key:"showSessionCallBtn",value:function(){var e=this;return"Expert"===this.state.currentUser.role?"start"===this.state.sessionStartEndBtn?Object(re.jsx)("li",{className:"video_session_call_btn start_video_session_call",children:Object(re.jsx)(h.b,{to:"#","data-toggle":"tooltip",title:"Start Session",onClick:function(t){return e.startVideoSession(t)}})}):Object(re.jsx)("li",{className:"video_session_call_btn end_video_session_call",children:Object(re.jsx)(h.b,{"data-toggle":"tooltip",title:"End Session",to:void 0,onClick:function(){return e.disconnectOT()}})}):"User"===this.state.currentUser.role?this.state.isExpertStartedSession?Object(re.jsx)("li",{className:"video_session_call_btn end_video_session_call",children:Object(re.jsx)(h.b,{"data-toggle":"tooltip",title:"End Session",to:void 0,onClick:this.disconnect.bind(this)})}):Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{to:"#",style:{visibility:"hidden"}})}):void 0}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.cookies.get("user"),t=this.state,s=t.videoDisableWarning,a=t.subscriber;return s&&a?(window.$("#"+a.id+" video").addClass("blur"),0===window.$(".video-disconnect-error-container").length&&window.$("#"+a.id).append("<div class='video-disconnect-error-container'><div>Connection unstable</div></div>")):a&&(window.$("#"+a.id+" video").removeClass("blur"),window.$(".video-disconnect-error-container").remove()),Object(re.jsxs)("div",{className:"session-page",children:[Object(re.jsx)(Ms,{}),Object(re.jsx)(Ts,{onSubmitReview:this.onSubmitReview.bind(this),reviewModalData:this.state.reviewModalData,expertSlug:this.props.match.params.slug,showUserReviewModal:this.state.showUserReviewModal,reviewBy:this.state.currentUser.role}),Object(re.jsx)(Fs,{errorExpertNotActiveModalData:this.state.errorExpertNotActiveModalData,expertSlug:this.props.match.params.slug,showErrorExpertNotActiveModal:this.state.showErrorExpertNotActiveModal}),Object(re.jsx)("div",{className:"container-fluid session-page-container",style:{display:"none"},children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("section",{children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.errorSessionMessage}}),Object(re.jsxs)("div",{className:"mainContainer FullHeightSec",children:[Object(re.jsxs)("div",{className:"Left_Panel",children:[Object(re.jsxs)("div",{className:this.state.blurChatAreaStatus?"Conversation cntrl_show":"Conversation cntrl_hide",children:[Object(re.jsx)("h6",{children:"Conversation"}),Object(re.jsx)("a",{href:"#!",className:"Hide_Left_panel",children:Object(re.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})})]}),Object(re.jsx)("p",{className:this.state.blurChatAreaStatus?"text-center chatarea_msg_show":"text-center chatarea_msg_hide",children:this.state.blurChatAreaStatusMessage}),Object(re.jsxs)("div",{className:this.state.blurChatAreaStatus?"Chat_Main_section chatarea_blur":"Chat_Main_section",children:[Object(re.jsx)("div",{className:"Chating_msg_Here",children:this.renderInbox()}),Object(re.jsxs)("div",{className:"typeMessage",children:["Expert"===this.state.currentUser.role&&Object(re.jsx)(ys,{sessionOwnerUsername:this.props.match.params.slug,messageReceiverEmail:this.state.connected_useremail,messageSenderEmail:e.email,expertEmail:this.state.expert.email}),"User"===this.state.currentUser.role&&Object(re.jsx)(ys,{sessionOwnerUsername:this.props.match.params.slug,messageReceiverEmail:this.state.expert.email,messageSenderEmail:e.email,expertEmail:this.state.expert.email})]})]}),Object(re.jsx)(Us,{})]}),Object(re.jsxs)("div",{className:"Right_Panel",children:[Object(re.jsx)("div",{className:"Client_image",children:Object(re.jsxs)("div",{className:"innerm",children:[Object(re.jsx)("div",{id:"subscribers"}),this.state.showEndCallOptions?null:Object(re.jsx)(Ms,{}),Object(re.jsx)("div",{id:"publisher"})]})}),Object(re.jsxs)("div",{className:"footer_action_btns",children:[Object(re.jsx)("a",{href:"#!","data-toggle":"modal","data-target":"#myModalWaitingToJoin",className:"btn btn-primary btn_waitingtojoin",rel:"noreferrer",children:" "}),Object(re.jsxs)("ul",{children:[Object(re.jsx)("li",{className:this.state.blurChatAreaStatus?"Chat_Trigger cntrl_hide":"Chat_Trigger cntrl_show",children:Object(re.jsx)("a",{"data-toggle":"tooltip",title:"Conversation",href:"#!",children:Object(re.jsx)("i",{className:"fa fa-commenting","aria-hidden":"true"})})}),Object(re.jsx)("li",{className:this.state.blurChatAreaStatus?"WhiteBoard_Trigger cntrl_hide":"WhiteBoard_Trigger cntrl_show",children:Object(re.jsx)("a",{"data-toggle":"tooltip",title:"White Board",href:"#!",children:Object(re.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true"})})}),this.state.blurChatAreaStatus?"":this.showSessionCallBtn(),Object(re.jsx)("li",{className:"clockicon",style:this.redAlertTiming(this.state.time.m),children:Object(re.jsxs)("a",{"data-toggle":"tooltip",title:"Session Time",href:"#!",children:[Object(re.jsx)("i",{className:"fa fa-clock-o","aria-hidden":"true"}),this.state.sessionDate," - ",this.state.time.h," :",this.state.time.m," : ",this.state.time.s]})})]}),Object(re.jsx)(ks.c,{position:"top-right",children:this.state.isShowingInfoAlert?Object(re.jsx)(Cs.a,{onDismiss:this.dismissAlert.bind(this),type:"info",headline:"Session Info",children:this.state.infoAlertText}):null})]})]})]})]})})}),Object(re.jsx)("div",{id:"myModalWaitingToJoin",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content alert alert-danger",children:[Object(re.jsx)("div",{className:"modal-header text-center",children:Object(re.jsx)("h4",{className:"modal-title",children:"Waiting for user to join!"})}),Object(re.jsx)("div",{className:"modal-body text-center",children:Object(re.jsx)("p",{children:"No one has joined your session yet, once any user will join the session, timer will initiate!"})})]})})}),Object(re.jsx)("div",{id:"myModalExtendSession",className:"modal fade continueshoppingmodal",role:"dialog",children:Object(re.jsx)("div",{className:"modal-dialog",children:Object(re.jsxs)("div",{className:"modal-content",children:[Object(re.jsxs)("div",{className:"modal-header",children:[Object(re.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"}),Object(re.jsx)("h4",{className:"modal-title",children:"Send Email"})]}),Object(re.jsxs)("div",{className:"modal-body",children:[Object(re.jsx)("p",{className:"text-center",children:"Recharge your account to start session!"}),Object(re.jsx)("table",{className:"table table-hover",children:Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsx)("td",{children:Object(re.jsxs)("form",{children:[Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Time"}),Object(re.jsxs)("select",{className:"form-control",name:"sessionExtendTime",children:[Object(re.jsx)("option",{value:"30",children:"30 Minutes"}),Object(re.jsx)("option",{value:"60",children:"1 Hour"})]})]})}),Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)("i",{children:"Note: Transaction will process automatically in backend!"})}),Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Pay Now!"}),"\xa0",Object(re.jsx)("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",children:"Close"})]})]})})})})})]})]})})})]})}}]),s}(i.Component);$s.defaultProps={redAlert:5};var zs=Object(u.b)((function(e){return{content:e.auth.content,messages:e.communication.messages}}),{protectedTest:Fe,FetchExpertConversation:Qt,ExpertSessionUserDisconnected:es,saveVideoSessionInfo:function(e){var t=e.expertEmail,s=e.userEmail,a=e.sessionCreationDate;return function(e){return oe.a.post("".concat(pe,"/videosession/save-video-session-info"),{expertEmail:t,userEmail:s,sessionCreationDate:a}).then((function(e){return e.data})).catch((function(e){console.log("error: "+e)}))}}})(Object(Q.g)(Object(ue.a)($s))),qs=s(99),Hs=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this,t="",s="",a="";oe.a.post("".concat(pe,"/createVideoSession"),{expertEmail:"rohit@gmail.com",userEmail:"mohit@gmail.com"}).then((function(r){console.log("sessionId: "+r.data.session.sessionId),console.log("apiKey: "+r.data.session.ot.apiKey),a=r.data.session.sessionId,t=r.data.session.ot.apiKey,s=r.data.token,e._initOT(s,a,t)})).catch((function(e){console.log("error catch : "+e)}))}},{key:"_initOT",value:function(e,t,s){var a=qs.initSession(s,t).on({sessionConnected:function(e){console.log(";;; sessionConnected ");var t=a.subscribe(e.stream,"myDiv");console.log(t)},streamCreated:function(e){console.log(";;; streamCreated ")}});switch(console.log("params: "+JSON.stringify(this.props.match.params)),this.props.type){case"publish":this.publish(s,a,e);break;case"subscribe":this.subscribe(a,e);break;default:console.error(this.props.type," is an unknown opentok action type. Must be either publish or subscribe.")}}},{key:"publish",value:function(e,t,s){var a=qs.initPublisher(e,"publisherA",{width:"50%",height:300});a.publishVideo(!1),t.connect(s,(function(e){e||t.publish(a)}))}},{key:"subscribe",value:function(e,t){e.connect(t,(function(e){e&&console.error("unable to connect to opentok session."),console.log("connect")})),e.on({streamCreated:function(t){console.log("streamCreated");var s=document.createElement("div");s.id="stream-"+t.stream.streamId,document.getElementById("subscribers").appendChild(s),e.subscribe(t.stream,s)},streamDestroyed:function(e){console.log("streamDestroyed");var t=document.getElementById("opentok-container"),s=document.getElementById(e.stream.id);t.removeChild(s)}})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:Object(re.jsxs)("div",{id:"opentok-container",children:[Object(re.jsx)("div",{id:"publisherA"}),Object(re.jsx)("div",{id:"subscribers"})]})})}}]),s}(i.Component);Hs.defaultProps={type:"publish"};var Ys=Object(u.b)((function(e){return{content:e.auth.content}}),{protectedTest:Fe})(Object(Q.g)(Object(ue.a)(Hs))),Ws=function(e){var t={backgroundColor:e.color||"#5BC0DE",color:e.fontColor||"#FFF"};return Object(re.jsx)("div",{className:"pricing-table",children:Object(re.jsx)("div",{className:"col-md-4 col-sm-6 col-xs-12 float-shadow",children:Object(re.jsxs)("div",{className:"price_table_container",children:[Object(re.jsx)("div",{className:"price_table_heading",children:e.planName}),Object(re.jsxs)("div",{className:"price_table_body",children:[Object(re.jsxs)("div",{className:"price_table_row cost",style:t,children:[Object(re.jsx)("strong",{children:e.price}),Object(re.jsx)("span",{children:"/MONTH"})]}),e.features.map((function(e,t){return Object(re.jsx)("div",{className:"price_table_row",children:e},"".concat(e,"-").concat(t))}))]}),Object(re.jsx)(h.b,{to:"checkout/".concat(e.planName.toLowerCase()),className:"btn btn-lg btn-block",style:t,children:"Subscribe!"})]})})})},Vs=function(e){return Object(re.jsx)("div",{className:"social-bar",children:Object(re.jsx)("ul",{children:e.socialNetworks.map((function(e,t){return Object(re.jsx)("li",{className:"social-icon",children:Object(re.jsx)("a",{title:e.name,href:e.href,children:Object(re.jsx)("img",{alt:e.name,src:e.img})})},"".concat(e,"-").concat(t))}))})})},Js=function(e){return Object(re.jsx)("div",{className:"slide",children:e.selectedSlide.map((function(e,t){return Object(re.jsxs)("div",{className:"rotator-item",children:[Object(re.jsx)("img",{className:"rotator-image",src:e.img,alt:"Rotor"}),e.headline?"<h3>".concat(e.headline,"</h3>"):"",Object(re.jsxs)("div",{className:"rotator-text-container",children:[Object(re.jsx)("p",{className:"rotator-text",children:e.text}),Object(re.jsx)("p",{className:"rotator-author",children:e.author})]})]},"".concat(t,"-").concat(e.headline))}))})},Gs=function(e){return Object(re.jsx)("ul",{children:function(){for(var t=[],s=0;s<e.length;s++)t.push(Object(re.jsx)("li",{value:s,className:s===e.active?"slider-nav-bullet active":"slider-nav-bullet",onClick:function(t){e.setPage(t)}},"".concat(s,"nav")));return t}()})},Ks=function(e){var t=Object(i.useState)({index:0}),s=Object(d.a)(t,2),a=s[0],r=s[1];return Object(re.jsxs)("div",{className:"rotator-container",children:[Object(re.jsx)(Js,{selectedSlide:e.rotators.filer((function(e,t){if(t===a.index)return e}))}),Object(re.jsx)(Gs,{length:e.rotators.length,active:a.index,setPage:function(e){!function(e){r({index:e.target.value})}(e)}})]})},Zs=["Really cool","Pretty cheap","Awesome"],Xs=["A couple features","Pretty neat"],Qs=["A bit cooler yet"],ea=[{name:"Facebook",href:"http://facebook.com/",img:"http://localhost:8080/img/icons/facebook.svg"},{name:"Twitter",href:"http://twitter.com/",img:"http://localhost:8080/img/icons/twitter.svg"}],ta=[{img:"",headline:"",text:"I love React!",author:"JS"},{img:"",headline:"",text:"MERN stack is pretty cool.",author:"DM"}],sa=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("div",{className:"select-plan",children:[Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)(Ws,{planName:"Bronze",color:"#CCC",price:"$10",features:Zs}),Object(re.jsx)(Ws,{planName:"Silver",price:"$15",features:Xs}),Object(re.jsx)(Ws,{planName:"Gold",price:"$20",features:Qs})]}),Object(re.jsx)(Vs,{socialNetworks:ea}),Object(re.jsx)(Ks,{rotators:ta})]})}}]),s}(i.Component),aa=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).state={loading:!0,error:null},r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"renderLoading",value:function(){return Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:""})}},{key:"renderError",value:function(){return Object(re.jsxs)("div",{className:"error-message",children:["Uh oh: ",this.state.error.message]})}},{key:"renderPosts",value:function(){return this.state.error?this.renderError():Object(re.jsx)("div",{id:"how-it-works-wrapper",className:"how-it-works-wrapper",children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"how it works"})}),Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"steps-section",children:Object(re.jsxs)("div",{className:"number-step-box step1-color",children:["1",Object(re.jsx)("span",{className:"number-step-box-caption",children:"Choose your subject"})]})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("img",{className:"w100",src:"/img/how-it-works/Screenshot1.png",alt:""})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("p",{children:"Choose from a list of the world's most prestigious experts in any subject."})})]}),Object(re.jsx)("hr",{}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"steps-section",children:Object(re.jsxs)("div",{className:"number-step-box step2-color",children:["2",Object(re.jsx)("span",{className:"number-step-box-caption",children:"Find an expert"})]})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("p",{children:"All of our experts go through an extensive screening process to ensure the safety of our members and also to ensure that they are indeed the best the world has to offer. They range from top college professors to everyday people who have dedicated their life to knowledge on a specific subject. Simply choose the educator that fits your needs and contact them to start a video education session or schedule one for a later time."})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("img",{className:"w100",src:"/img/how-it-works/Screenshot2.png",alt:""})})]}),Object(re.jsx)("hr",{}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"steps-section",children:Object(re.jsxs)("div",{className:"number-step-box step3-color",children:["3",Object(re.jsx)("span",{className:"number-step-box-caption",children:"Contact your expert"})]})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("img",{className:"w100",src:"/img/how-it-works/contact-expert.jpg",alt:""})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("p",{children:"You can contact our educators and professionals using various features provided in Donnie\u2019s List. Text, Call, or video session to communicate with available professionals instantly."})})]}),Object(re.jsx)("hr",{}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"steps-section",children:Object(re.jsxs)("div",{className:"number-step-box step4-color",children:["4",Object(re.jsx)("span",{className:"number-step-box-caption",children:"Rate your experience"})]})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("p",{children:"Donnie's List wants to make sure every experience is a quality experience. Your reviews are important to us. Let us know how they did by leaving your educator a quick rating after your session."})}),Object(re.jsx)("div",{className:"col-md-6",children:Object(re.jsx)("img",{className:"w100",src:"/img/how-it-works/Screenshot4.png",alt:""})})]}),Object(re.jsx)("div",{className:"row",children:"\xa0"})]})})]})})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:this.state.loading?this.renderLoading():this.renderPosts()})}}]),s}(i.Component),ra=[{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]},{id:"1",video:{videoURL:"http://hubblesource.stsci.edu/sources/video/clips/details/images/centaur_1.mpg",duration:5,screenShotURL:"https://www.gstatic.com/webp/gallery/1.jpg",size:1024},expert:{name:{firstname:"test",lastname:"test"},email:"test@gmail.com",profileimage:"https://www.gstatic.com/webp/gallery/5.jpg"},status:"available",timestamp:{createdAt:"1540366745150",uploadedAt:"1540366745150"},expertdetail:[{slug:"mohit-rv"}]}],ia={transitionDuration:0},na=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).state={category:""},r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.category;this.props.setPage(t),oe.a.get("".concat(pe,"/getExpertStoriesBasedOnRole/").concat(t)).then((function(t){var s=t.data.map((function(e){return e}));e.setState({posts:s,loading:!1,error:null})})).catch((function(t){e.setState({loading:!1,error:t})}))}},{key:"renderLoading",value:function(){return Object(re.jsx)("img",{alt:"loading",className:"loader-center",src:"/img/ajax-loader.gif"})}},{key:"renderError",value:function(){return Object(re.jsxs)("div",{className:"error-message",children:["Uh oh: ",this.state.error.message]})}},{key:"gettime",value:function(e){var t=new Date,s=Math.floor((t.getTime()-e)/1e3);if(console.log(s),s<60)return"".concat(s,"s ago");if(s<3600){var a=Math.floor(s/60);return"".concat(a,"mins ago")}if(s<86400){var r=Math.floor(s/3600);return"".concat(r,"hours ago")}if(s<2592e3){var i=Math.floor(s/86400);return"".concat(i,"days ago")}if(s<31536e3){var n=Math.floor(s/2592e3);return"".concat(n,"months ago")}if(s>31536e3){var c=Math.floor(s/31536e3);return"".concat(c,"years ago")}}},{key:"render",value:function(){var e=this,t=this.props.match.params.value,s=-1,a=["302px","302px"],r=ra.map((function(r,i){2===(s+=1)&&(s=0);var n="/expert/".concat(t,"/").concat(r.expertdetail[0].slug);return Object(re.jsxs)("div",{className:"image-element-class",children:[Object(re.jsx)("a",{href:"blurb.video.videoURL",children:Object(re.jsx)("img",{src:r.video.screenShotURL,alt:"blurb",className:"mas-image",width:"170px",height:a[s]})}),Object(re.jsx)("a",{href:n,className:"mas-profile",children:Object(re.jsx)("img",{alt:"P",src:r.expert.profileimage,className:"mas-profile-image"})}),Object(re.jsx)("h5",{className:"mas-expert-name",children:"".concat(r.expert.name.firstname," ").concat(r.expert.name.lastname)}),Object(re.jsx)("p",{className:"mas-time",children:e.gettime(r.timestamp.uploadedAt)})]},"BLURB_".concat(i))}));return Object(re.jsx)("div",{className:"container",children:Object(re.jsx)(de.a,{className:"my-gallery-class",options:ia,disableImagesLoaded:!1,updateOnEachImageLoad:!1,children:r})})}}]),s}(i.Component),ca=Object(u.b)(null,{setPage:be})(Object(Q.g)(na)),oa=s(2),la=s.n(oa),da=s(210),ua=s.n(da),ha=[{country:"Afghanistan",code:"+93"},{country:"Albania",code:"+355"},{country:"Algeria",code:"+213"},{country:"American Samoa",code:"+1684"},{country:"Andorra",code:"+376"},{country:"Angola",code:"+244"},{country:"Anguilla",code:"+1264"},{country:"Antigua and Barbuda",code:"+1268"},{country:"Argentina",code:"+54"},{country:"Armenia",code:"+374"},{country:"Aruba",code:"+297"},{country:"Australia",code:"+61"},{country:"Austria",code:"+43"},{country:"Azerbaijan",code:"+994"},{country:"Bahamas",code:"+1242"},{country:"Bahrain",code:"+973"},{country:"Bangladesh",code:"+880"},{country:"Barbados",code:"+1246"},{country:"Belarus",code:"+375"},{country:"Belgium",code:"+32"},{country:"Belize",code:"+501"},{country:"Benin",code:"+229"},{country:"Bermuda",code:"+1441"},{country:"Bhutan",code:"+975"},{country:"Bolivia",code:"+591"},{country:"Bosnia and Herzegovina",code:"+387"},{country:"Botswana",code:"+267"},{country:"Brazil",code:"+55"},{country:"British Indian Ocean Territory",code:"+246"},{country:"British Virgin Islands",code:"+1284"},{country:"Brunei",code:"+673"},{country:"Bulgaria",code:"+359"},{country:"Burkina Faso",code:"+226"},{country:"Burma-Myanmar",code:"+95"},{country:"Burundi",code:"+257"},{country:"Cambodia",code:"+855"},{country:"Cameroon",code:"+237"},{country:"Canada",code:"+1"},{country:"Cape Verde",code:"+238"},{country:"Cayman Islands",code:"+1345"},{country:"Central African Republic",code:"+236"},{country:"Chad",code:"+235"},{country:"Chile",code:"+56"},{country:"China",code:"+86"},{country:"Christmas Island",code:"+6189"},{country:"Colombia",code:"+57"},{country:"Comoros",code:"+269"},{country:"Congo",code:"+242"},{country:"Congo, The Democratic Republic",code:"+243"},{country:"Cook Islands",code:"+682"},{country:"Costa Rica",code:"+506"},{country:"Croatia",code:"+385"},{country:"Cuba",code:"+53"},{country:"Cyprus",code:"+357"},{country:"Czech Republic",code:"+420"},{country:"Denmark",code:"+45"},{country:"Djibouti",code:"+253"},{country:"Dominica",code:"+1767"},{country:"Dominican Republic",code:"+1849"},{country:"Dominican Republic",code:"+1829"},{country:"Dominican Republic",code:"+1809"},{country:"East Timor",code:"+670"},{country:"Ecuador",code:"+593"},{country:"Egypt",code:"+20"},{country:"El Salvador",code:"+503"},{country:"Equatorial Guinea",code:"+240"},{country:"Eritrea",code:"+291"},{country:"Estonia",code:"+372"},{country:"Ethiopia",code:"+251"},{country:"Faroe Islands",code:"+298"},{country:"Fiji",code:"+679"},{country:"Finland",code:"+358"},{country:"France",code:"+33"},{country:"French Guiana",code:"+594"},{country:"French Polynesia",code:"+689"},{country:"Gabon",code:"+241"},{country:"Gambia",code:"+220"},{country:"Georgia",code:"+995"},{country:"Germany",code:"+49"},{country:"Ghana",code:"+233"},{country:"Gibraltar",code:"+350"},{country:"Greece",code:"+30"},{country:"Greenland",code:"+299"},{country:"Grenada",code:"+1473"},{country:"Guadeloupe",code:"+590"},{country:"Guam",code:"+1671"},{country:"Guatemala",code:"+502"},{country:"Guinea",code:"+224"},{country:"Guinea-Bissau",code:"+245"},{country:"Guyana",code:"+592"},{country:"Haiti",code:"+509"},{country:"Honduras",code:"+504"},{country:"Hong Kong",code:"+852"},{country:"Hungary",code:"+36"},{country:"Iceland",code:"+354"},{country:"India",code:"+91"},{country:"Indonesia",code:"+62"},{country:"Iran",code:"+98"},{country:"Iraq",code:"+964"},{country:"Ireland",code:"+353"},{country:"Israel",code:"+972"},{country:"Italy",code:"+39"},{country:"Ivory Coast",code:"+225"},{country:"Jamaica",code:"+1876"},{country:"Japan",code:"+81"},{country:"Jordan",code:"+962"},{country:"Kazakhstan",code:"+7"},{country:"Kenya",code:"+254"},{country:"Kiribati",code:"+686"},{country:"Kuwait",code:"+965"},{country:"Kyrgyzstan",code:"+996"},{country:"Laos",code:"+856"},{country:"Latvia",code:"+371"},{country:"Lebanon",code:"+961"},{country:"Lesotho",code:"+266"},{country:"Liberia",code:"+231"},{country:"Libya",code:"+218"},{country:"Liechtenstein",code:"+423"},{country:"Lithuania",code:"+370"},{country:"Luxembourg",code:"+352"},{country:"Macau",code:"+853"},{country:"Macedonia",code:"+389"},{country:"Madagascar",code:"+261"},{country:"Malawi",code:"+265"},{country:"Malaysia",code:"+60"},{country:"Maldives",code:"+960"},{country:"Mali",code:"+223"},{country:"Malta",code:"+356"},{country:"Marshall Islands",code:"+692"},{country:"Martinique",code:"+596"},{country:"Mauritania",code:"+222"},{country:"Mauritius",code:"+230"},{country:"Mayotte",code:"+262"},{country:"Mexico",code:"+52"},{country:"Moldova",code:"+373"},{country:"Monaco",code:"+377"},{country:"Mongolia",code:"+976"},{country:"Montenegro",code:"+382"},{country:"Montserrat",code:"+1664"},{country:"Morocco",code:"+212"},{country:"Mozambique",code:"+258"},{country:"Namibia",code:"+264"},{country:"Nauru",code:"+674"},{country:"Nepal",code:"+977"},{country:"Netherlands",code:"+31"},{country:"Cura\xe7ao",code:"+599"},{country:"New Caledonia",code:"+687"},{country:"New Zealand",code:"+64"},{country:"Nicaragua",code:"+505"},{country:"Niger",code:"+227"},{country:"Nigeria",code:"+234"},{country:"Niue",code:"+683"},{country:"Norfolk Island",code:"+672"},{country:"Northern Mariana Islands",code:"+1670"},{country:"North Korea",code:"+850"},{country:"Norway",code:"+47"},{country:"Oman",code:"+968"},{country:"Pakistan",code:"+92"},{country:"Palau",code:"+680"},{country:"Palestine",code:"+970"},{country:"Panama",code:"+507"},{country:"Papua New Guinea",code:"+675"},{country:"Paraguay",code:"+595"},{country:"Peru",code:"+51"},{country:"Philippines",code:"+63"},{country:"Pitcairn Islands",code:"+870"},{country:"Poland",code:"+48"},{country:"Portugal",code:"+351"},{country:"Puerto Rico",code:"+1787"},{country:"Qatar",code:"+974"},{country:"R\xe9union",code:"+262"},{country:"Romania",code:"+40"},{country:"Russia",code:"+7"},{country:"Rwanda",code:"+250"},{country:"Saint Helena",code:"+290"},{country:"Saint Kitts and Nevis",code:"+1869"},{country:"Saint Lucia",code:"+1758"},{country:"Saint Martin",code:"+1599"},{country:"Saint Pierre and Miquelon",code:"+508"},{country:"Saint Vincent and the Grenadines",code:"+1784"},{country:"Samoa",code:"+685"},{country:"San Marino",code:"+378"},{country:"S\xe3o Tom\xe9 and Pr\xedncipe",code:"+239"},{country:"Saudi Arabia",code:"+966"},{country:"Senegal",code:"+221"},{country:"Serbia",code:"+381"},{country:"Seychelles",code:"+248"},{country:"Falkland Islands",code:"+500"},{country:"Sierra Leone",code:"+232"},{country:"Singapore",code:"+65"},{country:"Slovakia",code:"+421"},{country:"Slovenia",code:"+386"},{country:"Solomon Islands",code:"+677"},{country:"Somalia",code:"+252"},{country:"South Africa",code:"+27"},{country:"South Korea",code:"+82"},{country:"South Sudan",code:"+211"},{country:"Spain",code:"+34"},{country:"Sri Lanka",code:"+94"},{country:"Sudan",code:"+249"},{country:"Suriname",code:"+597"},{country:"Swaziland",code:"+268"},{country:"Sweden",code:"+46"},{country:"Switzerland",code:"+41"},{country:"Syria",code:"+963"},{country:"Taiwan",code:"+886"},{country:"Tajikistan",code:"+992"},{country:"Tanzania",code:"+255"},{country:"Thailand",code:"+66"},{country:"Togo",code:"+228"},{country:"Tokelau",code:"+690"},{country:"Tonga",code:"+676"},{country:"Trinidad and Tobago",code:"+1868"},{country:"Tunisia",code:"+216"},{country:"Turkey",code:"+90"},{country:"Turkmenistan",code:"+993"},{country:"Turks and Caicos Islands",code:"+1649"},{country:"Tuvalu",code:"+688"},{country:"Uganda",code:"+256"},{country:"United Kingdom",code:"+44"},{country:"Ukraine",code:"+380"},{country:"United Arab Emirates",code:"+971"},{country:"Uruguay",code:"+598"},{country:"United States",code:"+1"},{country:"Uzbekistan",code:"+998"},{country:"Vanuatu",code:"+678"},{country:"Venezuela",code:"+58"},{country:"Vietnam",code:"+84"},{country:"Virgin Islands",code:"+1340"},{country:"Wallis and Futuna",code:"+681"},{country:"Yemen",code:"+967"},{country:"Zambia",code:"+260"},{country:"Zimbabwe",code:"+263"}],ma=Object(Ue.a)({form:"expertSignup"}),pa=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"text",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},ja=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"email",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},ba=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"yearsexpertise",className:"form-control"},e.input),{},{children:[Object(re.jsx)("option",{value:"",children:"Select"}),ua.a.range(1,41).map((function(e){return Object(re.jsx)("option",{value:e.toString(),children:e},"OPTION_ITEM_".concat(e))}))]})),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},xa=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).verifyCallback=function(e){console.log("verifyCallback "+e),window.$("#hiddenRecaptcha").val(e);var t=e;this.setState({recaptcha_value:t})},r.getsubcategories=function(e){r.setState({select_category:e.target.value});for(var t=0;t<r.state.musicCategories.subcategory.length;t++){if(e.target.value.match(new RegExp(r.state.musicCategories.subcategory[t].name,"i"))){r.setState({isMusician:!0});break}r.setState({isMusician:!1})}},r.onChange=function(e){switch(e.target.name){case"profile":var t=window.$("#profile").val().split(".").pop().toLowerCase();-1===window.$.inArray(t,["tif","png","jpeg"])&&(window.$("#profile").val(""),alert("Invalid Extension.Image should be .png .jpeg .tiff format")),r.setState({profile:e.target.files});break;case"resume":r.setState({resume:e.target.files})}},r.social_modal=function(e){switch(e){case"facebook":r.setState({social_link:"Facebook"}),r.handleShow();break;case"twitter":r.setState({social_link:"Twitter"}),r.handleShow();break;case"google":r.setState({social_link:"Google"}),r.handleShow();break;case"linkdin":r.setState({social_link:"Linkdin"}),r.handleShow()}},r.setSocialLink=function(e){switch(r.state.social_link){case"Facebook":r.setState({facebookLink:e.target.value});break;case"Twitter":r.setState({twitterLink:e.target.value});break;case"Google":r.setState({googleLink:e.target.value});break;case"Linkdin":r.setState({linkdinLink:e.target.value})}},r.state={show_form:!1,recaptcha_value:"",responseMsg:"",categories:[],musicCategories:[],role:"",showClickButton:!1,profileImage:"",RelatedImages1:[],profile:[],resume:[],imageselect:!1,facebookLink:"",linkdinLink:"",googleLink:"",twitterLink:"",show:!1,social_link:"",isMusician:!1,select_category:""},console.log("props token: ",r.props.match.params.token),"expert-signup/:token"===r.props.route.path&&console.log("disable popup"),r.onDrop=r.onDrop.bind(Object(we.a)(r)),r.uploadImage=r.uploadImage.bind(Object(we.a)(r)),r.handleShow=r.handleShow.bind(Object(we.a)(r)),r.handleClose=r.handleClose.bind(Object(we.a)(r)),r.submitLink=r.submitLink.bind(Object(we.a)(r)),r}return Object(te.a)(s,[{key:"onDropResume",value:function(e){console.log("acceptedFiles: ",e),this.setState({RelatedImages1:e,showClickButton:!0})}},{key:"onDrop",value:function(e){console.log("acceptedFiles: ",e),this.setState({RelatedImages1:e,showClickButton:!0})}},{key:"uploadImage",value:function(){var e=this,t=new FormData;return fetch("".concat(pe,"/user/update/profile"),{method:"POST",body:t}).then((function(e){return e.json()}),(function(e){console.log("ERR")})).then((function(t){if(t&&null!==t&&void 0!==t&&t.SuccessMessage&&null!==t.SuccessMessage&&void 0!==t.SuccessMessage&&""!==t.SuccessMessage){e.setState({successMessage:"Successfully Uploaded Profile Image",RelatedImages1:"",showClickButton:!1});var s=e.props.cookies.get("user");if(s&&null!==s&&void 0!==s&&""!==s){var a=s._id;e.props.fetchMyProfile(a).then((function(t){e.setState({profileImage:t.data.user.profileImage})}),(function(t){e.setState({errorMessage:"Sorry Couldn't get Information"})}))}}else t&&null!=t&&void 0!==t&&t.errorMessage&&e.setState({errorMessage:t.errorMessage})}))}},{key:"componentDidMount",value:function(){window.$(document).ready((function(){window.$("#expert_signup_form").validate({rules:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0},university:{required:!0},password:{required:!0},profile:{required:!0},resume:{required:!0},expertContact:{required:!0,number:!0},expertContactCC:{required:!0},expertRating:{required:!0},expertFocusExpertise:{required:!0},yearsexpertise:{required:!0}},messages:{firstName:{required:"Please enter this field"},lastName:{required:"Please enter this field"},email:{required:"Please enter this field"},profile:{required:"Please enter this field"},resume:{required:"Please enter this field"},university:{required:"Please enter this field"},userBio:{required:"Please enter this field"},expertContactCC:{required:"Please enter this field"}}})}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.props.authenticated&&this.context.router.push("/dashboard"),oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){e.setState({categories:t.data});var s,a=Object(jt.a)(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;"Music Lessons"===r.name&&e.setState({musicCategories:r})}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.authenticated&&this.context.router.push("/dashboard")}},{key:"submitLink",value:function(){this.handleClose()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleFormSubmit",value:function(e){var t=this;if(console.log(e),0!==this.state.profile.length&&0!==this.state.resume.length){var s=this.props.params,a=new FormData(e);return a.append("email",e.email),a.append("expertCategories",this.state.select_category?this.state.select_category:""),a.append("expertContact",e.expertContact),a.append("expertContactCC",e.expertContactCC),a.append("expertFocusExpertise",e.expertFocusExpertise),a.append("firstName",e.firstName),a.append("lastName",e.lastName),a.append("password",e.password),a.append("university",e.university),a.append("yearsexpertise",e.yearsexpertise),a.append("profile",this.state.profile.length>0?this.state.profile[0]:"",this.state.profile.length>0?this.state.profile[0].name:""),a.append("resume",this.state.resume.length>0?this.state.resume[0]:"",this.state.resume.length>0?this.state.resume[0].name:""),a.append("facebookLink",e.facebook?e.facebook:""),a.append("twitterLink",e.twitter?e.twitter:""),a.append("linkedinLink",e.linkdin?e.linkdin:""),a.append("googleLink",e.google?e.google:""),this.state.isMusician?(a.append("isMusician",!0),a.append("instagramLink",e.instagramLink?e.instagramLink:""),a.append("youtubeLink",e.youtubeLink?e.youtubeLink:""),a.append("soundcloudLink",e.soundcloudLink?e.soundcloudLink:"")):a.append("isMusician",!1),s.token&&a.append("token",s.token),oe.a.post("".concat(pe,"/createExpert"),a).then((function(e){e.error&&t.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e.error+"</div>"}),e.data.success&&(t.setState({responseMsg:"<div class='alert alert-success text-center'>"+e.data.message+". Sit tight, you will be redirected to secure area of site.</div>"}),window.$(".form-control").val(""),window.$("form").each((function(){this.reset()})),t.props.cookies.set("token",e.data.token,{path:"/",secure:!1,sameSite:"Lax"}),t.props.cookies.set("user",e.data.user,{path:"/",secure:!1,sameSite:"Lax"}),window.location.href="".concat(me),setTimeout((function(){}),1500))})).catch((function(e){console.log(e),t.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e+"</div>"})}))}this.setState({imageselect:!0})}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return Object(re.jsx)("div",{children:Object(re.jsxs)("span",{children:[Object(re.jsx)("strong",{children:"Error!"})," ",this.props.errorMessage]})})}},{key:"render",value:function(){var e=this,t=this.props.handleSubmit;return Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"col-sm-8 col-sm-offset-2",show:this.state.show_form,children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"Expert Join"})}),Object(re.jsx)("p",{className:"text-center",children:"Please fill in your details to join Donnie's List as an Expert"}),this.state.errorMessage&&null!==this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage}),Object(re.jsxs)("form",{id:"expert_signup_form",onSubmit:t(this.handleFormSubmit.bind(this)),children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseMsg}}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"First Name"}),Object(re.jsx)(Ee.a,{name:"firstName",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"Last Name"}),Object(re.jsx)(Ee.a,{name:"lastName",component:pa,type:"text"})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)(Ee.a,{name:"email",component:ja,type:"email"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Password"}),Object(re.jsx)(Ee.a,{name:"password",component:pa,type:"password"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Profile Picture"}),Object(re.jsx)("input",{id:"profile",accept:"image/tiff, image/png",type:"file",name:"profile",onChange:function(t){return e.onChange(t)}}),this.state.imageselect&&Object(re.jsx)("div",{className:"error",children:"This field is require."})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Upload Resume"}),Object(re.jsx)("input",{id:"resume",type:"file",name:"resume",onChange:function(t){return e.onChange(t)}}),this.state.imageselect&&Object(re.jsx)("div",{className:"error",children:"This field is require."})]})}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"University"}),Object(re.jsx)(Ee.a,{name:"university",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Categories"}),Object(re.jsx)(Ee.a,{name:"expertCategories",component:function(t){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"expertCategories",className:"form-control"},t.input),{},{onChange:e.getsubcategories,children:[Object(re.jsx)("option",{value:"",children:"Select Categories"}),e.state.categories.map((function(e,t){return Object(re.jsx)(ga,{cats:e},"CAT_".concat(t))}))]})),t.touched&&0===e.state.select_category.length&&Object(re.jsx)("div",{className:"error",children:"Categoy should not be empty"})]})},type:"select"})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Country Code"}),Object(re.jsx)(Ee.a,{name:"expertContactCC",component:function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("select",Object(g.a)(Object(g.a)({name:"expertContactCC",className:"form-control"},e.input),{},{children:ha.map((function(e,t){return Object(re.jsx)("option",{value:e.code,children:e.country+" "+e.code},"COUNTRY_KEY_".concat(t))}))})),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},type:"number"})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Contact Number"}),Object(re.jsx)(Ee.a,{name:"expertContact",component:pa,type:"number"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Focus of Expertise"}),Object(re.jsx)(Ee.a,{name:"expertFocusExpertise",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Years of Expertise"}),Object(re.jsx)(Ee.a,{name:"yearsexpertise",component:ba,type:"select"})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Facebook Url"}),Object(re.jsx)(Ee.a,{name:"facebook",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Twitter Url"}),Object(re.jsx)(Ee.a,{name:"twitter",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Linkedin Url"}),Object(re.jsx)(Ee.a,{name:"linkdin",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Google Url"}),Object(re.jsx)(Ee.a,{name:"google",component:pa,type:"text"})]}),this.state.isMusician&&Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Youtube Url"}),Object(re.jsx)(Ee.a,{name:"youtubeLink",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Instagram Url"}),Object(re.jsx)(Ee.a,{name:"instagramLink",component:pa,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"SoundCoud Url"}),Object(re.jsx)(Ee.a,{name:"soundcloudLink",component:pa,type:"text"})]})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})})]})]})})}}]),s}(i.Component);xa.contextTypes={router:la.a.object};var ga=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("optgroup",{label:this.props.cats.name,children:this.props.cats.subcategory.map((function(e,t){return Object(re.jsx)(fa,{subcat:e})}))})}}]),s}(n.a.Component),fa=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("option",{value:this.props.subcat.name,children:[this.props.subcat.name," "]})}}]),s}(n.a.Component);var Oa=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}}),{createExpert:et,getExpertEmailFromToken:function(e){var t=e.token;return console.log("token: ",t),function(e){return oe.a.get("".concat(pe,"/getExpertEmailFromToken/").concat(t)).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}})(Object(Q.g)(Object(ue.a)(ma(xa)))),va=function(e){return Object(re.jsxs)("div",{children:[e.type&&"password"===e.type&&Object(re.jsx)("input",Object(g.a)({type:"password",className:"form-control"},e.input)),e.type&&"password"!==e.type&&Object(re.jsx)("input",Object(g.a)({type:"text",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},ya=Object(Ue.a)({form:"register"})((function(e){var t=Object(i.useState)({errorMessage:"",message:""}),s=Object(d.a)(t,2),a=s[0],r=s[1],n=Object(m.a)(),c=Object(d.a)(n,2),o=(c[0],c[1]),l=Object(u.c)(),h=Object(Q.f)(),p=e.handleSubmit;Object(i.useEffect)((function(){window.$(document).ready((function(){window.$("#signup_form").validate({rules:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0},password:{required:!0,minlength:6},password1:{required:!0,equalTo:"#password"},confirm_joining:{required:!0},confirm_age:{required:!0}},messages:{firstName:{required:"Please enter this field"},lastName:{required:"Please enter this field"},username:{remote:"Sorry, our system has detected that an account with this username already exists!"},email:{required:"Please enter this field",remote:"Sorry, our system has detected that an account with this email address already exists!"},password:{required:"Please enter this field"},password1:{equalTo:"Password and Confirm Password must be same!"}}})}))}),[]);var j=function(e){if(!/^(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[a-zA-Z!#$%&? "])[a-zA-Z0-9!#$%&?]{8,20}$/.test(e.password)){window.$("#password_error").css("display","block");return r(Object(g.a)(Object(g.a)({},a),{},{errorMessage:"Password must be in rage of 8-20 characters and contain over 1 uppercase."})),!1}window.$("#password_error").css("display","none"),window.$("#signup_form").valid()&&l(function(e){var t=e.email,s=e.firstName,a=e.lastName,r=e.password;return function(e){return oe.a.post("".concat(pe,"/auth/register"),{email:t,firstName:s,lastName:a,password:r}).then((function(e){return!0===e.data.success&&(Te.set("token",e.data.token,{path:"/",secure:!1,sameSite:"Lax"}),Te.set("user",e.data.user,{path:"/",secure:!1,sameSite:"Lax"})),e}),(function(e){console.log(e)})).catch((function(t){$e(e,t.response,v)}))}}(e)).then((function(t){t.data.error&&null!==t.data.error&&void 0!==t.data.error&&""!==t.data.error&&r(Object(g.a)(Object(g.a)({},a),{},{errorMessage:t.data.error})),t.data.success&&!0===t.data.success&&(r(Object(g.a)(Object(g.a)({},a),{},{successMessage:"Successfully Created Account. You Will be redirected to profile in 4 seconds."})),localStorage.setItem("editable","true"),setTimeout((function(){var s;o("token",t.data.token,{path:"/",secure:!1,sameSite:"Lax"}),o("user",t.data.user,{path:"/",secure:!1,sameSite:"Lax"}),s=e.email,oe.a.get("".concat(pe,"/getExpert/").concat(s)).then((function(e){var t=e.data[0].slug,s=e.data[0].expertCategories[0];localStorage.setItem("slug",t),localStorage.setItem("category",s),localStorage.setItem("editable","true"),void 0!==s&&""!==s&&null!==s?h.push("/edit/expert/"+s+"/"+t):h.push("/edit/expert/new_category/"+t)})).catch((function(e){console.error(e)}))}),4e3))}))};return Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"col-sm-6 col-sm-offset-3",children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"Join the list"})}),Object(re.jsx)("p",{className:"text-center",children:"Sign up to start a session."}),Object(re.jsxs)("form",{id:"signup_form",onSubmit:p((function(e){return j(e)})),children:[a.errorMessage&&null!==a.errorMessage&&void 0!==a.errorMessage&&""!==a.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:a.errorMessage}),a.successMessage&&null!==a.successMessage&&void 0!==a.successMessage&&""!==a.successMessage&&Object(re.jsx)("div",{className:"alert alert-success",children:a.successMessage}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"First Name"}),Object(re.jsx)(Ee.a,{name:"firstName",className:"form-control",required:!0,component:va,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"Last Name"}),Object(re.jsx)(Ee.a,{name:"lastName",className:"form-control",required:!0,component:va,type:"text"})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)(Ee.a,{name:"email",className:"form-control",required:!0,component:va,type:"text"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Password"}),Object(re.jsx)(Ee.a,{name:"password",type:"password",className:"form-control",required:!0,component:va})]})}),Object(re.jsx)("div",{className:"form-group text-center",children:Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Register"})})]})]})})})),Na=Object(Ue.a)({form:"login"})((function(e){var t=Object(i.useState)({errorMessage:"",message:""}),s=Object(d.a)(t,2),a=s[0],r=s[1],n=Object(u.c)(),c=Object(m.a)(),o=Object(d.a)(c,1)[0],l=e.handleSubmit,p=Object(Q.f)(),j=function(e){window.$("#login_form").valid()&&n(function(e,t){var s=e.email,a=e.password;return function(e){return void 0!==s&&void 0!==a?oe.a.post("".concat(pe,"/auth/login"),{email:s,password:a}).then((function(a){return a.status>=400?a.data:(Te.set("token",a.data.token,{path:"/",secure:!1,sameSite:"Lax"}),Te.set("user",a.data.user,{path:"/",secure:!1,sameSite:"Lax"}),oe.a.get("".concat(pe,"/getExpert/").concat(s)).then((function(e){var t=e.data[0].slug,s=e.data[0].expertCategories[0];localStorage.setItem("slug",t),localStorage.setItem("category",s)})).catch((function(e){console.error(e)})),e({type:f}),t.push("/profile"),a)})).catch((function(e){return{errorMessage:"Alas, You have entered incorrect Email/Password!"}})):"empty_parameters"}}(e,p)).then((function(e){e.errorMessage&&null!==e.errorMessage&&void 0!==e.errorMessage&&""!==e.errorMessage&&r(Object(g.a)(Object(g.a)({},a),{},{errorMessage:e.errorMessage}))})).catch((function(e){console.log("[ERROR]:",e)}))};Object(i.useEffect)((function(){window.$(document).ready((function(){window.$("#login_form").validate({rules:{email:{required:!0,email:!0},password:{required:!0}},messages:{email:{required:"Please enter this field"},password:{required:"Please enter this field"}}})}))}),[]),Object(i.useEffect)((function(){o.user&&p.push("/")}),[o,p]);return Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"col-sm-6 col-sm-offset-3",children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"Login"})}),o.requiredLogin_for_session?function(){var e=o.requiredLogin_for_session;return o.removeCookie("requireLogin_for_session",{path:"/"}),Object(re.jsxs)("div",{className:"alert alert-warning",children:[Object(re.jsx)("strong",{children:e}),Object(re.jsx)("a",{className:"close","data-dismiss":"alert","aria-label":"close",title:"close",children:"x"})]})}():"",Object(re.jsx)("p",{className:"text-center",children:"Welcome back members."}),a.errorMessage&&null!==a.errorMessage&&void 0!==a.errorMessage&&""!==a.errorMessage&&Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("i",{className:"fa fa-exclamation-circle","aria-hidden":"true"}),a.errorMessage]}),Object(re.jsxs)("form",{id:"login_form",onSubmit:l((function(e){return j(e)})),children:[Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)(Ee.a,{name:"email",className:"form-control",required:!0,component:"input",type:"text"})]}),Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("label",{children:"Password"}),Object(re.jsx)(Ee.a,{name:"password",className:"form-control",required:!0,component:"input",type:"password"})]}),Object(re.jsx)("div",{className:"form-group text-center",children:Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})})]}),Object(re.jsx)("div",{className:"form-group text-center",children:Object(re.jsx)(h.b,{to:"/forgot-password",children:"Forgot Password?"})})]})})})),wa=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("div",{className:"col-sm-6 col-sm-offset-3",children:[Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:"loader center"}),Object(re.jsx)("h3",{className:"text-center",children:"Logging you in..."})]})}}]),s}(i.Component);var Sa=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}}))(Object(ue.a)(wa)),_a=function(e){var t=Object(u.c)(),s=Object(Q.f)();return Object(i.useEffect)((function(){var e;t((e=s,function(t){var s=Te.get("user")._id;oe.a.post("".concat(pe,"/auth/logout/").concat(s)),t({type:O,payload:""}),Te.remove("token",{path:"/"}),Te.remove("user",{path:"/"}),Te.remove("token",{path:"/"}),e.push("/")}))}),[t,s]),Object(re.jsx)("div",{className:"col-sm-6 mtop100 col-sm-offset-3",children:Object(re.jsx)("div",{className:"page-title text-center",children:"Sorry to see you go!"})})},ka=s(886),Ca=Object(Ue.a)({form:"forgotPassword"}),Ra=function(){console.log("Done!!!!")},Ma=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).verifyCallback=function(e){console.log("verifyCallback "+e),window.$("#hiddenRecaptcha").val(e);var t=e;this.setState({recaptcha_value:t,responseEmailMsg:""})},r.state={recaptcha_value:""},r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){window.$(document).ready((function(){window.$("#forgot_form").validate({rules:{email:{required:!0,email:!0},hiddenRecaptcha:{required:!0}},messages:{email:{required:"Please enter this field"},hiddenRecaptcha:{required:"Please enter this field"}}})}))}},{key:"UNSAFE_componentWillMount",value:function(){this.props.authenticated&&this.context.router.push("/dashboard")}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.authenticated&&this.context.router.push("/dashboard")}},{key:"handleFormSubmit",value:function(e){var t=this;if(window.$("#forgot_form").valid())try{this.props.getForgotPasswordToken(e).then((function(e){console.log("response: "+e),t.setState({responseEmailMsg:"<div class='alert alert-success text-center'>"+e.message+"</div>"})}),(function(e){return e.response.json().then((function(e){var s=e.errors;t.setState({responseEmailMsg:"<div class='alert alert-danger text-center'>"+s+"</div>"})}))}))}catch(s){}}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return Object(re.jsx)("div",{children:Object(re.jsxs)("span",{children:[Object(re.jsx)("strong",{children:"Error!"})," ",this.props.errorMessage]})})}},{key:"render",value:function(){var e=this.props.handleSubmit;return Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"col-sm-6 col-sm-offset-3",children:[Object(re.jsx)("div",{className:"page-title text-center",children:Object(re.jsx)("h2",{children:"Forget Password"})}),Object(re.jsx)("p",{className:"text-center",children:"Please enter your email to get new password."}),Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseEmailMsg}}),Object(re.jsxs)("form",{id:"forgot_form",onSubmit:e(this.handleFormSubmit.bind(this)),children:[Object(re.jsxs)("div",{className:"form-group",children:[this.renderAlert(),Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)(Ee.a,{name:"email",className:"form-control",component:"input",type:"text"})]}),Object(re.jsxs)("div",{className:"form-group text-center",children:[Object(re.jsx)(ka,{sitekey:"6LeMERsUAAAAACSYqxDZEOOicHM8pG023iDHZiH5",render:"explicit",onloadCallback:Ra,verifyCallback:this.verifyCallback.bind(this)}),Object(re.jsx)("div",{children:Object(re.jsx)("input",{type:"text",class:"form-control g-recaptcha",id:"hiddenRecaptcha",name:"hiddenRecaptcha",value:this.state.recaptcha_value})})]}),Object(re.jsx)("div",{className:"form-group text-center",children:Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Reset Password"})})]})]})})}}]),s}(i.Component);Ma.contextTypes={router:la.a.object};var La=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}}),{getForgotPasswordToken:function(e){var t=e.email;return function(e){oe.a.post("".concat(pe,"/auth/forgot-password"),{email:t}).then((function(t){e({type:y,payload:t.data.message})})).catch((function(t){$e(e,t.response,v)}))}}})(Ca(Ma)),Ua=Object(Ue.a)({form:"resetPassword"}),Ea=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Ia=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){this.props.authenticated&&this.context.router.push("/dashboard")}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.authenticated&&this.context.router.push("/dashboard")}},{key:"handleFormSubmit",value:function(e){var t=e.password,s=this.props.match.params.resetToken;this.props.resetPassword(s,{password:t})}},{key:"renderAlert",value:function(){return this.props.errorMessage?Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("strong",{children:"Oops!"})," ",this.props.errorMessage]}):this.props.message?Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Success!"})," ",this.props.message]}):void 0}},{key:"render",value:function(){var e=this.props.handleSubmit;return Object(re.jsxs)("form",{id:"reset_form",onSubmit:e(this.handleFormSubmit.bind(this)),children:[Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"New Password:"}),Object(re.jsx)(Ee.a,{name:"password",component:Ea,type:"password"})]}),Object(re.jsxs)("fieldset",{className:"form-group",children:[Object(re.jsx)("label",{children:"Confirm New Password:"}),Object(re.jsx)(Ee.a,{name:"passwordConfirm",component:Ea,type:"password"})]}),this.renderAlert(),Object(re.jsx)("button",{action:"submit",className:"btn btn-primary",children:"Change Password"})]})}}]),s}(i.Component);Ia.contextTypes={router:la.a.object};var Aa=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.resetMessage}}),{resetPassword:function(e,t){var s=t.password;return function(t){oe.a.post("".concat(pe,"/auth/reset-password/").concat(e),{password:s}).then((function(e){t({type:N,payload:e.data.message}),console.log("reset"),window.location.href="/login"})).catch((function(e){console.log(e)}))}}})(Object(Q.g)(Ua(Ia))),Ta=function(e){return Object(re.jsxs)("form",{onSubmit:function(t){e.onSubmit(t)},children:[Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-9",children:[Object(re.jsx)("label",{children:"Card Number"}),Object(re.jsx)("input",{id:"cardNumber",className:"form-control",onChange:function(t){e.handleChange(t)},value:e.formState.cardNumber,autoComplete:"off"})]}),Object(re.jsxs)("div",{className:"col-md-3",children:[Object(re.jsx)("label",{children:"CVC"}),Object(re.jsx)("input",{id:"cvc",className:"form-control",onChange:function(t){e.handleChange(t)},value:e.formState.cvc,autoComplete:"off"})]})]}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-6",children:[Object(re.jsx)("label",{children:"Expiration Month (MM)"}),Object(re.jsx)("input",{id:"expMonth",className:"form-control",onChange:function(t){e.handleChange(t)},value:e.formState.expMonth,autoComplete:"off"})]}),Object(re.jsxs)("div",{className:"col-md-6",children:[Object(re.jsx)("label",{children:"Expiration Year (YYYY)"}),Object(re.jsx)("input",{id:"expYear",className:"form-control",onChange:function(t){e.handleChange(t)},value:e.formState.expYear,autoComplete:"off"})]})]}),Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Get Started!"})]})},Da=s(296),Fa=s.n(Da);function Pa(e,t,s){var a={stripeToken:e,plan:t,lastFour:s};return function(e){return ze(A,P,!0,"/pay/customer",e,a)}}function Ba(){return function(e){return qe(T,P,!0,"/pay/customer",e)}}function $a(){return function(e){return qe(D,P,!0,"/pay/customer",e)}}function za(e){var t={newPlan:e};return function(e){return He(B,P,!0,"/pay/subscription",e,t)}}function qa(e){var t={stripeToken:e};return function(e){return He(F,P,!0,"/pay/customer",e,t)}}var Ha=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={stripePublicKey:"pk_test_s744wYvqQUrpqsXGLnUBUFRw",cardNumber:"",expMonth:"",expYear:"",cvc:"",error:""},a}return Object(te.a)(s,[{key:"UNSAFE_UNSAFE_componentWillMount",value:function(){this.loadStripe()}},{key:"loadStripe",value:function(){if(!document.getElementById("stripe-import")){var e=document.createElement("script");e.id="stripe-import",e.src="https://js.stripe.com/v2/",e.type="text/javascript",e.async=!0,document.body.appendChild(e)}}},{key:"handleFormChange",value:function(e){switch(e.preventDefault(),e.target.id){case"cardNumber":return this.setState({cardNumber:e.target.value});case"cvc":return this.setState({cvc:e.target.value});case"expMonth":return this.setState({expMonth:e.target.value});case"expYear":return this.setState({expYear:e.target.value});default:return}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;t.setState({error:""}),Fa.a.setPublishableKey(this.state.stripePublicKey),Fa.a.card.createToken({number:this.state.cardNumber,cvc:this.state.cvc,exp_month:this.state.expMonth,exp_year:this.state.expYear},(function(e,s){if(s.error)t.setState({error:s.error});else{var a=t.props.plan,r=s.id,i=s.card.last4;a?t.props.createCustomer(r,a,i):t.props.updateBilling(r)}}))}},{key:"render",value:function(){return Object(re.jsxs)("div",{className:"checkout-form",children:[this.state.error.message,Object(re.jsx)(Ta,{handleChange:this.handleFormChange.bind(this),onSubmit:this.handleSubmit.bind(this),formState:this.state})]})}}]),s}(i.Component),Ya=Object(u.b)(null,r)(Ha),Wa=function(e){var t=Object(i.useState)({cancelConfirm:!1,changeSubscription:!1,updateBilling:!1,newPlan:""}),s=Object(d.a)(t,2),a=s[0],r=s[1],n=Object(u.d)((function(e){return e.customer.customer})).customer;Object(i.useEffect)((function(){e.fetchCustomer()}),[e]);var c=function(){return a.cancelConfirm?Object(re.jsxs)("div",{className:"cancel-confirm",children:[Object(re.jsx)("p",{children:"Do you really want to cancel your membership to ImproveFit?"}),Object(re.jsxs)("div",{className:"action-buttons",children:[Object(re.jsx)("button",{className:"btn btn-danger",onClick:function(){e.cancelSubscription()},children:"Yes"}),Object(re.jsx)("button",{className:"btn btn-primary",onClick:function(){l()},children:"No"})]})]}):a.changeSubscription?Object(re.jsxs)("div",{className:"action-buttons",children:[Object(re.jsxs)("select",{className:"form-control",name:"newPlan",value:a.newPlan,onChange:function(e){var t;t=e.target.value,r(Object(g.a)(Object(g.a)({},a),{},{newPlan:t}))},children:[Object(re.jsx)("option",{value:"bronze",children:"Bronze"}),Object(re.jsx)("option",{value:"silver",children:"Silver"}),Object(re.jsx)("option",{value:"gold",children:"Gold"})]}),Object(re.jsx)("button",{className:"btn btn-primary",onClick:function(){e.updateSubscription(a.newPlan)},children:"Change"}),Object(re.jsx)("button",{className:"btn btn-primary",onClick:function(){o()},children:"Cancel"})]}):a.updateBilling?Object(re.jsxs)("div",{className:"action-buttons",children:[Object(re.jsx)(Ya,{}),Object(re.jsx)("button",{className:"btn btn-danger",onClick:function(){h()},children:"Cancel"})]}):Object(re.jsxs)("div",{className:"action-buttons",children:[Object(re.jsx)("button",{className:"btn btn-primary",onClick:function(e){o()},children:"Change Subscription"}),Object(re.jsx)("button",{className:"btn btn-info",onClick:function(){h()},children:"Update Billing Information"}),Object(re.jsx)("button",{className:"btn btn-danger",onClick:function(){l()},children:"Cancel Subscription"})]})},o=function(){a.changeSubscription?r(Object(g.a)(Object(g.a)({},a),{},{changeSubscription:!1})):r(Object(g.a)(Object(g.a)({},a),{},{changeSubscription:!0}))},l=function(){a.cancelConfirm?r(Object(g.a)(Object(g.a)({},a),{},{cancelConfirm:!1})):r(Object(g.a)(Object(g.a)({},a),{},{cancelConfirm:!0}))},h=function(){a.updateBilling?r(Object(g.a)(Object(g.a)({},a),{},{updateBilling:!1})):r(Object(g.a)(Object(g.a)({},a),{},{updateBilling:!0}))};return Object(re.jsxs)("div",{className:"user-subscription",children:[e.errorMessage?Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("strong",{children:"Oops!"})," ",e.errorMessage]}):e.message?Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Success!"})," ",e.message]}):void 0,function(){if(n.subscriptions){var e=n.subscriptions.total_count-1,t=n.sources.total_count-1,s=n.subscriptions.data[e].plan.id,a=n.sources.data[t].last4,r=(n.subscriptions.data[e].plan.amount/100).toFixed(2),i=yt.a.unix(n.subscriptions.data[e].current_period_end).format("dddd, MMMM Do YYYY").toString();return n.subscriptions.data[e].cancel_at_period_end?Object(re.jsxs)("div",{className:"active-subscription",children:["Your ",s," plan will expire on ",i,". You will not be charged again."]}):Object(re.jsxs)("div",{className:"active-subscription",children:["You are subscribed to the ",s," plan. Your credit card ending in ",a," will be charged $",r," on ",i,".",c()]})}return Object(re.jsx)("div",{className:"loading",children:"Loading..."})}()]})},Va=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={firstName:"",lastName:"",expertEmail:"",onlineStatus:"",expert:"",loading:!1,university:"",RelatedImages1:[],successMessage:"",errorMessage:"",role:"",resume_path:"",Image_other_UrlContain:!1,currentUser:a.props.cookies.get("user")},a.onDrop=a.onDrop.bind(Object(we.a)(a)),a.uploadImage=a.uploadImage.bind(Object(we.a)(a)),a._isMounted=!1,a}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.state.currentUser.role;this._isMounted&&this.props.fetchUser(this.state.currentUser._id).then((function(s){new RegExp("^(https?://)?((([a-zd]([a-zd-]*[a-zd])*).)+[a-z]{2,}|((d{1,3}.){3}d{1,3}))").test(s.data.user.profileImage)&&e.setState({Image_other_UrlContain:!0});var a=s.data.user;e.setState({firstName:s.data.user.firstName}),e.setState({lastName:s.data.user.lastName}),e.setState({expertEmail:s.data.user.email}),e.setState({onlineStatus:s.data.user.onlineStatus}),e.setState({profileImage:s.data.user.profileImage}),e.setState({role:t}),e.setState({university:s.data.user.university}),e.setState({resume_path:s.data.user.resume_path}),e.setState({expert:a,loading:!1,error:null})}),(function(e){}))}},{key:"onDrop",value:function(e){this.setState({RelatedImages1:e})}},{key:"uploadImage",value:function(){var e=this,t=new FormData,s=this.state;return Object.keys(s).forEach((function(e){"RelatedImages1"===e?t.append(e,s[e][0]):"expertEmail"===e&&t.append(e,s[e])})),fetch("".concat(pe,"/user/update/profile"),{method:"POST",body:t}).then((function(e){return e.json()}),(function(e){console.log("ERR")})).then((function(t){t&&null!=t&&void 0!==t&&t.SuccessMessage&&null!=t.SuccessMessage&&void 0!==t.SuccessMessage&&""!==t.SuccessMessage?(e.setState({successMessage:t.SuccessMessage,RelatedImages1:""}),e.props.fetchUser(e.state.currentUser._id).then((function(t){e.setState({profileImage:t.data.user.profileImage})}),(function(e){}))):t&&null!=t&&void 0!==t&&t.errorMessage&&e.setState({errorMessage:t.errorMessage})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=Object(re.jsx)("img",{className:"loader-center",src:"/img/ajax-loader.gif",alt:"loader gif"}),t=Object(re.jsxs)("div",{id:"view-experts",className:"view-experts",children:[Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Profile"})]})})}),Object(re.jsx)("div",{className:"expert-list-wrap",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"expert-list-inner-wrap",children:Object(re.jsx)("div",{className:"col-sm-12",children:Object(re.jsx)("div",{className:"expert-detail-wrap",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-3 col-sm-4",children:[this.state.Image_other_UrlContain&&this.state.profileImage&&null!=this.state.profileImage&&void 0!==this.state.profileImage&&""!==this.state.profileImage?Object(re.jsxs)("div",{className:"expert-img",children:[Object(re.jsx)("img",{src:this.state.profileImage,alt:""}),Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online fa fa-circle","aria-hidden":"true"})]}):"",!this.state.Image_other_UrlContain&&this.state.profileImage&&null!=this.state.profileImage&&void 0!==this.state.profileImage&&""!==this.state.profileImage?Object(re.jsxs)("div",{className:"expert-img",children:[Object(re.jsx)("img",{src:"".concat(je,"/")+this.state.profileImage,alt:""}),Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online fa fa-circle","aria-hidden":"true"})]}):"",null==this.state.profileImage||void 0===this.state.profileImage||""===this.state.profileImage?Object(re.jsxs)("div",{className:"expert-img",children:[Object(re.jsx)("img",{src:"/img/profile.png",alt:""}),Object(re.jsx)("i",{"data-toggle":"title",title:"Online",className:"user-online fa fa-circle","aria-hidden":"true"})]}):""]}),Object(re.jsx)("div",{className:"col-md-9 col-sm-8",children:Object(re.jsx)("div",{className:"profile-detail",children:Object(re.jsx)("div",{className:"name",children:Object(re.jsxs)("dl",{className:"dl-horizontal",children:[this.state.successMessage&&""!==this.state.successMessage&&Object(re.jsx)("div",{className:"alert alert-success",children:this.state.successMessage}),this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Name"}),Object(re.jsxs)("dd",{children:[Object(re.jsxs)("div",{className:"text-left-detail",children:[this.state.firstName," ",this.state.lastName]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{style:{float:"right",textTransform:"capitalize"},className:"text-right label label-primary",children:[Object(re.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"}),this.state.expert.expertCategories]})]})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Area of expertise"}),Object(re.jsx)("dd",{children:this.state.expert.expertCategories})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Years of expertise"}),Object(re.jsx)("dd",{children:this.state.expert.yearsexpertise})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Focus of expertise"}),Object(re.jsx)("dd",{children:this.state.expert.expertFocusExpertise})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Rating"}),Object(re.jsxs)("dd",{children:[this.state.expert.expertRating,Object(re.jsx)("i",{className:"fa fa-star","aria-hidden":"true"})]})]}),this.state.role&&("Admin"===this.state.role||"User"===this.state.role)&&Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"About"}),Object(re.jsx)("dd",{children:this.state.expert.userBio&&null!=this.state.expert.userBio&&void 0!==this.state.expert.userBio&&""!==this.state.expert.userBio?this.state.expert.userBio:"-"})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Country "}),Object(re.jsx)("dd",{children:this.state.expert.locationCountry&&null!=this.state.expert.locationCountry&&void 0!==this.state.expert.locationCountry&&""!==this.state.expert.locationCountry?this.state.expert.locationCountry:"-"})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"State "}),Object(re.jsx)("dd",{children:this.state.expert.locationState&&null!=this.state.expert.locationState&&void 0!==this.state.expert.locationState&&""!==this.state.expert.locationState?this.state.expert.locationState:"-"})]}),Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"City "}),Object(re.jsx)("dd",{children:this.state.expert.locationCity&&null!=this.state.expert.locationCity&&void 0!==this.state.expert.locationCity&&""!==this.state.expert.locationCity?this.state.expert.locationCity:"-"})]})]}),"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail expert-social-links",children:[Object(re.jsx)("dt",{children:"Social link "}),Object(re.jsxs)("dd",{children:[this.state.expert.facebookURL&&null!=this.state.expert.facebookURL&&void 0!==this.state.expert.facebookURL&&""!==this.state.expert.facebookURL&&Object(re.jsx)("a",{target:"_blank",rel:"noreferrer",href:this.state.expert.facebookURL?this.state.expert.facebookURL:"#",title:"facebook",children:Object(re.jsx)("i",{className:"fa fa-facebook-official","aria-hidden":"true"})}),this.state.expert.twitterURL&&null!=this.state.expert.twitterURL&&void 0!==this.state.expert.twitterURL&&""!==this.state.expert.twitterURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.twitterURL?this.state.expert.twitterURL:"#",title:"twitter",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-twitter","aria-hidden":"true"})}),this.state.expert.linkedinURL&&null!=this.state.expert.linkedinURL&&void 0!==this.state.expert.linkedinURL&&""!==this.state.expert.linkedinURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.linkedinURL?this.state.expert.linkedinURL:"#",title:"linkedin",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-linkedin","aria-hidden":"true"})}),this.state.expert.instagramURL&&null!=this.state.expert.instagramURL&&void 0!==this.state.expert.instagramURL&&""!==this.state.expert.instagramURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.instagramURL?this.state.expert.instagramURL:"#",title:"instagram",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-instagram","aria-hidden":"true"})}),this.state.expert.snapchatURL&&null!=this.state.expert.snapchatURL&&void 0!==this.state.expert.snapchatURL&&""!==this.state.expert.snapchatURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.snapchatURL?this.state.expert.snapchatURL:"#",title:"snapchat",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-snapchat","aria-hidden":"true"})}),this.state.expert.websiteURL&&null!=this.state.expert.websiteURL&&void 0!==this.state.expert.websiteURL&&""!==this.state.expert.websiteURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.websiteURL?this.state.expert.websiteURL:"#",title:"website",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-anchor","aria-hidden":"true"})}),this.state.expert.googleURL&&null!=this.state.expert.googleURL&&void 0!==this.state.expert.googleURL&&""!==this.state.expert.googleURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.googleURL?this.state.expert.googleURL:"#",title:"google",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-google","aria-hidden":"true"})}),this.state.expert.soundcloudURL&&null!=this.state.expert.soundcloudURL&&void 0!==this.state.expert.soundcloudURL&&""!==this.state.expert.soundcloudURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.soundcloudURL?this.state.expert.soundcloudURL:"#",title:"soundcloud",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-soundcloud","aria-hidden":"true"})}),this.state.expert.youtubeURL&&null!=this.state.expert.youtubeURL&&void 0!==this.state.expert.youtubeURL&&""!==this.state.expert.youtubeURL&&Object(re.jsx)("a",{target:"_blank",href:this.state.expert.youtubeURL?this.state.expert.youtubeURL:"#",title:"youtube",rel:"noreferrer",children:Object(re.jsx)("i",{className:"fa fa-youtube","aria-hidden":"true"})}),""===this.state.expert.facebookURL&&""===this.state.expert.twitterURL&&""===this.state.expert.linkedinURL&&""===this.state.expert.instagramURL&&""===this.state.expert.snapchatURL&&""===this.state.expert.websiteURL&&""===this.state.expert.googleUrl&&"No Links Added yet"]})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"University"}),Object(re.jsx)("dd",{children:this.state.university})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"profile-bor-detail",children:[Object(re.jsx)("dt",{children:"Download Resume"}),Object(re.jsx)("dd",{children:Object(re.jsx)("a",{href:"".concat(je)+this.state.resume_path,title:"Download",download:!0,className:"fa fa-file-pdf-o"})})]})]})})})})]})})})})})})})]});return Object(re.jsx)("div",{children:Object(re.jsx)("div",{children:this.state.loading?e:t})})}}]),s}(i.Component);var Ja=Object(u.b)((function(e){return{profile:e.user.profile}}),{fetchUser:function(e){var t=Be.get("token");return function(s){return oe.a.get("".concat(pe,"/user/").concat(e),{headers:{Authorization:t}}).then((function(e){return s({type:_,payload:e.data.user}),e})).catch((function(e){return s($e(e.data.error))}))}},uploadImage:function(e){var t=Be.get("token");return function(s){return oe.a.post("".concat(pe,"/user/update/profile"),{headers:{Authorization:t},data:e}).then((function(e){return e})).catch((function(e){return s($e(e.data.error))}))}}})(Object(ue.a)(Va)),Ga=new Ae.a;var Ka=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:[Object(re.jsx)("span",{className:"sidebar-caption",children:"User Controls"}),Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/update-profile",children:[Object(re.jsx)("i",{className:"fa fa-pencil"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Update Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/account-info",children:[Object(re.jsx)("i",{className:"fa fa-suitcase"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:"Account Information"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/profile",children:[Object(re.jsx)("i",{className:"fa fa-user"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/my-reviews",children:[Object(re.jsx)("i",{className:"fa fa-commenting-o"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" My Reviews"})]})})]})]})}}]),s}(i.Component),Za=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).handleChange=function(e){if(a.state.errors[e.target.name]){var t,s=Object.assign({},a.state.errors);delete s[e.target.name],a.setState((t={},Object(gs.a)(t,e.target.name,e.target.value),Object(gs.a)(t,"errors",s),t))}else a.setState(Object(gs.a)({},e.target.name,e.target.value))},a.state={successmessage:"",errorMessage:"",role:"",emailId:"",exp_year:"",exp_month:"",car_number:"",address_country:"",address_state:"",address_city:"",address_zip:"",car_holder_name:"",cvc:"",address_line1:"",address_line2:"",errors:{},showClickButton:!1,years:[]},a.handleChange=a.handleChange.bind(Object(we.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(we.a)(a)),a.clearInput=a.clearInput.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user"),s=t.email,a=t.role;this.setState({emailId:s,role:a}),"User"!==a&&this.setState({errorMessage:"Sorry you are not authorized to view this page"}),"User"===a&&this.props.FetchAccountInfo({emailId:s}).then((function(t){var s=t.user.cardInfo;t&&null!==t&&void 0!==t&&0===t.status?e.setState({errorMessage:t.message}):t&&null!==t&&void 0!==t&&t.user&&null!==t.user&&void 0!==t.user&&e.setState({exp_year:s.exp_year,exp_month:s.exp_month,car_number:s.number,address_country:s.address_country,address_state:s.address_state,address_city:s.address_city,address_zip:s.address_zip,car_holder_name:s.name,cvc:s.cvc,address_line1:s.address_line1,address_line2:s.address_line2})}));for(var r=(new Date).getFullYear(),i=[],n=r;n<=r+10;n++){var c=n+1;i.push(c)}this.setState({years:i})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var s={};console.log("****"),""!==this.state.emailId&&void 0!==this.state.emailId||(s.this.state.emailId="Email cannot be empty"),""!==this.state.exp_month&&void 0!==this.state.exp_month||(s.exp_month="Expiry month cannot be empty"),""!==this.state.exp_year&&void 0!==this.state.exp_year||(s.exp_year="Expiry year cannot be empty"),""!==this.state.cvc&&void 0!==this.state.cvc||(s.cvc="CVC cannot be empty"),""===this.state.car_number||void 0===this.state.car_number?s.car_number="Card number cannot be empty":""===this.state.car_number||this.state.car_number.length>16?s.car_number="Length cannot be more than 16":(""===this.state.car_number||this.state.car_number.length<16)&&(s.car_number="Length cannot be less than 16"),""!==this.state.car_holder_name&&void 0!==this.state.car_holder_name&&""!==this.state.car_holder_name.trim()||(s.car_holder_name="Card holder name cannot be empty"),""!==this.state.address_country&&void 0!==this.state.address_country&&""!==this.state.address_country.trim()||(s.address_country="Country name cannot be empty"),""!==this.state.address_state&&void 0!==this.state.address_state&&""!==this.state.address_state.trim()||(s.address_state="State name cannot be empty"),""!==this.state.address_city&&void 0!==this.state.address_city&&""!==this.state.address_city.trim()||(s.address_city="City name cannot be empty"),""!==this.state.address_zip&&void 0!==this.state.address_zip&&""!==this.state.address_zip.trim()||(s.address_zip="Zip code cannot be empty"),""!==this.state.address_line1&&void 0!==this.state.address_line1&&""!==this.state.address_line1.trim()||(s.address_line1="Address line 1  cannot be empty"),this.setState({errors:s});var a=0===Object.keys(s).length;if(console.log("**** out: "+JSON.stringify(s)),a){var r=this.state,i=r.emailId,n=r.exp_month,c=r.exp_year,o=r.cvc,l=r.car_number,d=r.car_holder_name,u=r.address_country,h=r.address_state,m=r.address_city,p=r.address_zip,j=r.address_line1,b=r.address_line2;this.props.UpdateAccountInfo({emailId:i,exp_month:n,exp_year:c,cvc:o,car_number:l,car_holder_name:d,address_country:u,address_state:h,address_city:m,address_zip:p,address_line1:j,address_line2:b}).then((function(e){e&&null!==e&&void 0!==e&&e.status&&null!==e.status&&1===e.status?t.setState({successmessage:"Successfully added the payement configuration details",errorMessage:""}):t.setState({errorMessage:e.message,successmessage:""})}))}else console.log("**** else: "+a)}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"userMenu",value:function(){return Object(re.jsx)(Ka,{})}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Update Account Info"})]})}},{key:"clearInput",value:function(e){e.preventDefault(),this.setState({exp_year:"",exp_month:"",car_number:"",address_country:"",address_state:"",address_city:"",address_zip:"",car_holder_name:"",cvc:"",address_line1:"",errors:{}})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("User",this.userMenu()),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsxs)("div",{id:"pageTitle",children:[this.state.successmessage&&null!==this.state.successmessage&&void 0!==this.state.successmessage&&""!==this.state.successmessage&&Object(re.jsx)("div",{className:"alert alert-success",children:this.state.successmessage}),this.state.errorMessage&&null!==this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage})]}),this.state.role&&null!==this.state.role&&void 0!==this.state.role&&"User"===this.state.role&&Object(re.jsxs)("form",{id:"",onSubmit:this.handleSubmit,children:[Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)("input",{name:"emailId",readOnly:!0,className:"form-control",value:this.state.emailId,type:"email"})]})}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Expiry Month"}),Object(re.jsxs)("select",{name:"exp_month",className:"form-control",value:this.state.exp_month,onChange:this.handleChange,children:[Object(re.jsx)("option",{value:"",children:"Select"}),Object(re.jsx)("option",{value:"1",children:"01 (Jan)"}),Object(re.jsx)("option",{value:"2",children:"02 (Feb)"}),Object(re.jsx)("option",{value:"3",children:"03 (March)"}),Object(re.jsx)("option",{value:"4",children:"04 (April)"}),Object(re.jsx)("option",{value:"5",children:"05 (May)"}),Object(re.jsx)("option",{value:"6",children:"06 (June)"}),Object(re.jsx)("option",{value:"7",children:"07 (July)"}),Object(re.jsx)("option",{value:"8",children:"08 (Aug)"}),Object(re.jsx)("option",{value:"9",children:"09 (Sep)"}),Object(re.jsx)("option",{value:"10",children:"10 (Oct)"}),Object(re.jsx)("option",{value:"11",children:"11 (Nov)"}),Object(re.jsx)("option",{value:"12",children:"12 (Dec)"})]}),Object(re.jsx)("span",{className:"error",children:this.state.errors.exp_month})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Expiry Year"}),Object(re.jsx)("select",{name:"exp_year",className:"form-control",value:this.state.exp_year,onChange:this.handleChange,children:this.state.years.map((function(e,t){return Object(re.jsx)("option",{value:e,children:e},t)}))}),Object(re.jsx)("span",{className:"error",children:this.state.errors.exp_year})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"CVC"}),Object(re.jsx)("input",{name:"cvc",className:"form-control",value:this.state.cvc,onChange:this.handleChange,type:"number"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.cvc})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"Card Number"}),Object(re.jsx)("input",{name:"car_number",className:"form-control",value:this.state.car_number,onChange:this.handleChange,type:"number",min:"0"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.car_number})]}),Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"Card Holder Name"}),Object(re.jsx)("input",{name:"car_holder_name",className:"form-control",value:this.state.car_holder_name,onChange:this.handleChange,type:"text",min:"1",max:"10"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.car_holder_name})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Country"}),Object(re.jsx)("input",{name:"address_country",className:"form-control",value:this.state.address_country,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.address_country})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"State"}),Object(re.jsx)("input",{name:"address_state",className:"form-control",value:this.state.address_state,onChange:this.handleChange,type:"select"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.address_state})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"City"}),Object(re.jsx)("input",{name:"address_city",className:"form-control",value:this.state.address_city,onChange:this.handleChange,type:"select"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.address_city})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Zip Code"}),Object(re.jsx)("input",{name:"address_zip",className:"form-control",value:this.state.address_zip,onChange:this.handleChange,type:"select"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.address_zip})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Address Line 1"}),Object(re.jsx)("textarea",{name:"address_line1",className:"form-control",rows:"3",value:this.state.address_line1,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.address_line1})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Address Line 2"}),Object(re.jsx)("textarea",{name:"address_line2",className:"form-control",rows:"3",value:this.state.address_line2,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.address_line2})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),"\xa0",Object(re.jsx)("button",{className:"btn btn-default",onClick:this.clearInput,children:"Reset"})]})})]})]})]})})]})})})})}}]),s}(i.Component),Xa=Object(u.b)(null,{UpdateAccountInfo:function(e){var t=Ga.get("token");return function(s){return oe.a.post("".concat(pe,"/user/add-account-info"),{headers:{Authorization:t},body:e}).then((function(e){return e.data})).catch((function(e){console.log("error: "+e),$e(s,e.response,v)}))}},FetchAccountInfo:function(e){var t=Ga.get("token");return function(s){return oe.a.post("".concat(pe,"/user/fetch-account-info"),{headers:{Authorization:t},body:e}).then((function(e){return e.data})).catch((function(e){console.log("error: "+e),$e(s,e.response,v)}))}}})(Object(ue.a)(Za)),Qa=s(17),er=s.n(Qa),tr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:[Object(re.jsx)("span",{className:"sidebar-caption",children:"Admin Controls"}),Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsxs)("li",{children:[Object(re.jsxs)("a",{href:"#!","data-target":"#item1","data-toggle":"collapse",children:[Object(re.jsx)("i",{className:"fa fa-list"}),Object(re.jsxs)("span",{className:"collapse in hidden-xs",children:["Users Management ",Object(re.jsx)("span",{className:"caret"})]})]}),Object(re.jsxs)("ul",{className:"nav nav-stacked collapse",id:"item1",children:[Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{to:"/dashboard/userslist",children:"List Users"})}),Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{to:"/dashboard/create-expert",children:"Create Expert"})})]})]}),Object(re.jsxs)("li",{children:[Object(re.jsxs)("a",{href:"#!","data-target":"#item2","data-toggle":"collapse",children:[Object(re.jsx)("i",{className:"fa fa-list"}),Object(re.jsxs)("span",{className:"collapse in hidden-xs",children:["Session Management ",Object(re.jsx)("span",{className:"caret"})]})]}),Object(re.jsx)("ul",{className:"nav nav-stacked collapse",id:"item2",children:Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{to:"/dashboard/sessionsList",children:"List Active Sessions"})})})]}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/update-profile",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Edit Profile"})]})})]})]})}}]),s}(i.Component),sr=function(){var e=Object(Q.f)();return Object(re.jsxs)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:[Object(re.jsx)("span",{className:"sidebar-caption",children:"Expert Controls"}),Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{onClick:function(){var t=localStorage.category,s=localStorage.slug;void 0!==t&&""!==t&&null!==t?e.push("/edit/expert/"+t+"/"+s):e.push("/edit/expert/new_category/"+s)},children:Object(re.jsxs)(h.b,{children:[Object(re.jsx)("i",{className:"fa fa-user"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Update Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/session-reviews",children:[Object(re.jsx)("i",{className:"fa fa-commenting-o","aria-hidden":"true"})," Session Reviews"]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/mysession-list",children:[Object(re.jsx)("i",{className:"fa fa-desktop"})," Sessions History"]})})]})]})},ar=s(469),rr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).keyPress=function(e){8===e.keyCode&&a.setState({password:""})},a.handleChange=function(e){if("expertCategories"===e.target.name)for(var t=0;t<a.state.musicCategories.subcategory.length;t++){if(e.target.value.match(new RegExp(a.state.musicCategories.subcategory[t].name,"i"))){a.setState({isMusician:!0});break}a.setState({isMusician:!1})}if(a.state.errors[e.target.name]){var s,r=Object.assign({},a.state.errors);delete r[e.target.name],a.setState((s={},Object(gs.a)(s,e.target.name,e.target.value),Object(gs.a)(s,"errors",r),s))}else a.setState(Object(gs.a)({},e.target.name,e.target.value))},a.onChange=function(e){switch(e.target.name){case"resume":a.setState({update_resume:e.target.files}),a.setState({uploadResume:!0})}},a.social_modal=function(e){switch(e){case"facebook":a.setState({social_link:"Facebook"}),a.setState({facebookURL:a.state.facebookURL}),a.handleShow();break;case"twitter":a.setState({social_link:"Twitter"}),a.setState({twitterURL:a.state.twitterURL}),a.handleShow();break;case"google":a.setState({social_link:"Google"}),a.setState({googleURL:a.state.googleURL}),a.handleShow();break;case"linkdin":a.setState({social_link:"Linkdin"}),a.setState({linkedinURL:a.state.linkedinURL}),a.handleShow();break;case"soundcloud":a.setState({social_link:"Soundcloud"}),a.setState({soundcloudURL:a.state.soundcloudURL}),a.handleShow();break;case"instagram":a.setState({social_link:"Instagram"}),a.setState({instagramURL:a.state.instagramURL}),a.handleShow();break;case"youtube":a.setState({social_link:"Youtube"}),a.setState({youtubeURL:a.state.youtubeURL}),a.handleShow()}},a.setSocialLink=function(e){switch(a.state.social_link){case"Facebook":a.setState({facebookURL:e.target.value});break;case"Twitter":a.setState({twitterURL:e.target.value});break;case"Google":a.setState({googleURL:e.target.value});break;case"Linkdin":a.setState({linkedinURL:e.target.value});break;case"Soundcloud":a.setState({soundcloudURL:e.target.value});break;case"Instagram":a.setState({instagramURL:e.target.value});break;case"Youtube":a.setState({youtubeURL:e.target.value})}},a.state={successmessage:"",errorMessage:"",firstName:"",lastName:"",categories:[],musicCategories:[],profileImage:"",RelatedImages1:[],email:"",password:"",userBio:"",expertRates:"",expertContactCC:"",expertCategories:"",expertContact:"",expertRating:"",expertFocusExpertise:"",yearsexpertise:"",locationCountry:"",locationState:"",locationCity:"",errors:{},showClickButton:!1,university:"",resume:"",role:"",facebookURL:"",googleURL:"",twitterURL:"",instagramURL:"",linkedinURL:"",snapchatURL:"",websiteURL:"",show:!1,social_link:"",soc_link:!1,link_soc:"",uploadResume:!1,update_resume:"",Image_other_UrlContain:!1,soundcloudURL:"",isMusician:!1,youtubeURL:"",confirm_password:"",passwordMatcherror:!1},a.handleChange=a.handleChange.bind(Object(we.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(we.a)(a)),a.onDrop=a.onDrop.bind(Object(we.a)(a)),a.uploadImage=a.uploadImage.bind(Object(we.a)(a)),a.clearInput=a.clearInput.bind(Object(we.a)(a)),a.handleShow=a.handleShow.bind(Object(we.a)(a)),a.handleClose=a.handleClose.bind(Object(we.a)(a)),a.submitLink=a.submitLink.bind(Object(we.a)(a)),a.upload_resume=a.upload_resume.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user");if(oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){e.setState({categories:t.data});var s,a=Object(jt.a)(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;"Music Lessons"===r.name&&e.setState({musicCategories:r})}}catch(i){a.e(i)}finally{a.f()}})),t&&null!==t&&void 0!==t&&""!==t){var s=t._id;this.props.fetchMyProfile(s).then((function(t){if("Expert"===t.data.user.role){var s,a=Object(jt.a)(e.state.categories);try{for(a.s();!(s=a.n()).done;){var r=s.value;if("Music Lessons"===r.name){var i,n=Object(jt.a)(r.subcategory);try{for(n.s();!(i=n.n()).done;){var c=i.value;console.log(c);var o=c.name;t.data.user.expertCategories[0].match(new RegExp(o,"i"))&&e.setState({isMusician:!0})}}catch(l){n.e(l)}finally{n.f()}}}}catch(l){a.e(l)}finally{a.f()}}new RegExp("^(https?://)?((([a-zd]([a-zd-]*[a-zd])*).)+[a-z]{2,}|((d{1,3}.){3}d{1,3}))").test(t.data.user.profileImage)&&e.setState({Image_other_UrlContain:!0}),e.setState({profileImage:t.data.user.profileImage,role:t.data.user.role}),e.setState({firstName:t.data.user.profile.firstName,lastName:t.data.user.profile.lastName,email:t.data.user.email}),e.setState({userBio:t.data.user.userBio,expertRates:t.data.user.expertRates,expertCategories:t.data.user.expertCategories[0]}),e.setState({expertContact:t.data.user.contact,expertRating:t.data.user.expertRating,expertFocusExpertise:t.data.user.expertFocusExpertise}),e.setState({yearsexpertise:t.data.user.yearsexpertise,password:t.data.user.password}),e.setState({locationCountry:t.data.user.locationCountry,locationState:t.data.user.locationState,locationCity:t.data.user.locationCity}),e.setState({facebookURL:t.data.user.facebookURL}),e.setState({soundcloudURL:t.data.user.soundcloudURL?t.data.user.soundcloudURL:""}),e.setState({password:t.data.user.password}),e.setState({twitterURL:t.data.user.twitterURL}),e.setState({googleURL:t.data.user.googleURL}),e.setState({instagramURL:t.data.user.instagramURL}),e.setState({linkedinURL:t.data.user.linkedinURL}),e.setState({snapchatURL:t.data.user.snapchatURL}),e.setState({websiteURL:t.data.user.websiteURL}),e.setState({university:t.data.user.university}),e.setState({resume:t.data.user.resume_path}),e.setState({expertContactCC:t.data.user.expertContactCC}),e.setState({contact:t.data.user.contact}),e.setState({youtubeURL:t.data.user.youtubeURL})}),(function(t){e.setState({errorMessage:"Sorry Couldn't get Information"})}))}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var s={};if(""!==this.state.firstName&&void 0!==this.state.firstName&&""!==this.state.firstName.trim()||(s.firstName="First Name cant be empty"),""!==this.state.lastName&&void 0!==this.state.lastName&&""!==this.state.lastName.trim()||(s.lastName="Last Name cant be empty"),""!==this.state.email&&void 0!==this.state.email||(s.this.state.firstName="Email cant be empty"),""!==this.state.password&&void 0!==this.state.password&&""!==this.state.password.trim()||(s.password="Password cant be empty"),"Expert"!==this.state.role||""!==this.state.expertCategories&&void 0!==this.state.expertCategories||(s.expertCategories="Categories cant be empty"),"Expert"!==this.state.role||""!==this.state.resume&&void 0!==this.state.resume||(s.resume="Resume cant be empty"),""!==this.state.expertContact&&void 0!==this.state.expertContact||(s.expertContact="Contact cant be empty"),"Expert"!==this.state.role||""!==this.state.expertFocusExpertise&&void 0!==this.state.expertFocusExpertise&&""!==this.state.expertFocusExpertise.trim()||(s.expertFocusExpertise="Focus Expertise cant be empty"),"Expert"!==this.state.role||""!==this.state.yearsexpertise&&void 0!==this.state.yearsexpertise&&""!==this.state.yearsexpertise.trim()||(s.yearsexpertise="Experience cant be empty"),"Expert"===!this.state.role&&(""!==this.state.userBio&&void 0!==this.state.userBio&&""!==this.state.userBio.trim()||(s.userBio="User Bio cant be empty"),""!==this.state.locationCountry&&void 0!==this.state.locationCountry&&""!==this.state.locationCountry.trim()||(s.locationCountry="Country Name cant be empty"),""!==this.state.locationState&&void 0!==this.state.locationState&&""!==this.state.locationState.trim()||(s.locationState="State Name cant be empty"),("Expert"===this.state.role&&""===this.state.locationCity||void 0===this.state.locationCity||""===this.state.locationCity.trim())&&(s.locationCity="City Name cant be empty")),this.state.password.length>0&&this.state.confirm_password.length>0&&this.state.password!==this.state.confirm_password&&(s.confirm_password="Password not match"),this.setState({errors:s}),0===Object.keys(s).length)if(this.state.isMusician){var a=this.state,r=a.email,i=a.university,n=a.firstName,c=a.lastName,o=a.password,l=a.confirm_password,d=a.userBio,u=a.isMusician,h=a.expertRates,m=a.expertCategories,p=a.expertContact,j=a.expertRating,b=a.expertFocusExpertise,x=a.yearsexpertise,g=a.locationCountry,f=a.locationState,O=a.locationCity,v=a.facebookURL,y=a.twitterURL,N=a.instagramURL,w=a.soundcloudURL,S=a.youtubeURL,_=a.linkedinURL,k=a.snapchatURL,C=a.websiteURL,R=a.googleURL;this.props.UpdateMyProfile({email:r,university:i,firstName:n,lastName:c,isMusician:u,password:o,confirm_password:l,userBio:d,expertRates:h,expertCategories:m,expertContact:p,expertRating:j,expertFocusExpertise:b,yearsexpertise:x,locationCountry:g,locationState:f,locationCity:O,facebookURL:v,twitterURL:y,instagramURL:N,soundcloudURL:w,youtubeURL:S,linkedinURL:_,snapchatURL:k,websiteURL:C,googleURL:R}).then((function(e){e.success&&(t.setState({successmessage:"Your profile successfully updated"}),window.$("html, body").animate({scrollTop:window.$("#main").offset().top-5},1e3),e.passchange&&setTimeout((function(){this.props.history.push("/logout")}),1500)),e.success||(t.setState({errorMessage:"Something went wrong!"}),window.$("html, body").animate({scrollTop:window.$("#main").offset().top-5},1e3))}),(function(e){console.log("Failure")}))}else{var M=this.state,L=M.email,U=M.university,E=M.firstName,I=M.lastName,A=M.password,T=M.confirm_password,D=M.userBio,F=M.isMusician,P=M.expertRates,B=M.expertCategories,$=M.expertContact,z=M.expertRating,q=M.expertFocusExpertise,H=M.yearsexpertise,Y=M.locationCountry,W=M.locationState,V=M.locationCity,J=M.facebookURL,G=M.twitterURL,K=M.linkedinURL,Z=M.snapchatURL,X=M.websiteURL,Q=M.googleURL;this.props.UpdateMyProfile({email:L,university:U,firstName:E,lastName:I,isMusician:F,password:A,confirm_password:T,userBio:D,expertRates:P,expertCategories:B,expertContact:$,expertRating:z,expertFocusExpertise:q,yearsexpertise:H,locationCountry:Y,locationState:W,locationCity:V,facebookURL:J,twitterURL:G,linkedinURL:K,snapchatURL:Z,websiteURL:X,googleURL:Q}).then((function(e){e.success&&(t.setState({successmessage:"Your profile successfully updated"}),window.$("html, body").animate({scrollTop:window.$("#main").offset().top-5},1e3),e.passchange&&setTimeout((function(){this.props.history.push("/logout")}),1500)),e.success||(t.setState({errorMessage:"Something went wrong!"}),window.$("html, body").animate({scrollTop:window.$("#main").offset().top-5},1e3))}),(function(e){console.log("Failure")}))}}},{key:"onDrop",value:function(e){console.log(e),this.setState({RelatedImages1:e,showClickButton:!0})}},{key:"upload_resume",value:function(){var e=this,t=new FormData;return t.append("expertEmail",this.state.email),t.append("resume",this.state.update_resume[0],this.state.update_resume[0].name),oe()({method:"POST",url:"".concat(pe,"/user/update/resume"),data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.success&&(e.setState({successMessage:"Successfully Uploaded Resume"}),e.props.location.reload()),t.data.success||e.setState({errorMessage:"Something went wrong"})}))}},{key:"uploadImage",value:function(){var e=this,t=this.state.RelatedImages1,s=new FormData,a=this.state;return Object.keys(a).forEach((function(e){"RelatedImages1"===e||"email"===e&&s.append("expertEmail",a[e])})),s.append("profileImage",t[0],t[0].name),oe()({method:"POST",url:"".concat(pe,"/user/update/profile"),data:s,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.success&&(e.setState({successMessage:"Successfully Uploaded Profile Image"}),e.props.location.reload()),t.data.success||e.setState({errorMessage:"Something went wrong"})})).then((function(e){return e.json()}),(function(e){console.log("ERR")})).then((function(t){if(t&&null!==t&&void 0!==t&&t.SuccessMessage&&null!=t.SuccessMessage&&void 0!==t.SuccessMessage&&""!==t.SuccessMessage){e.setState({successMessage:"Successfully Uploaded Profile Image",RelatedImages1:"",showClickButton:!1});var s=e.props.cookies.get("user");if(s&&null!==s&&void 0!==s&&""!==s){var a=s._id;e.props.fetchMyProfile(a).then((function(t){e.setState({profileImage:t.data.user.profileImage})}),(function(t){e.setState({errorMessage:"Sorry Couldn't get Information"})}))}}else t&&null!=t&&void 0!==t&&t.errorMessage&&e.setState({errorMessage:t.errorMessage})}))}},{key:"submitLink",value:function(){this.handleClose()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Update MyProfile"})]})}},{key:"adminMenu",value:function(){return Object(re.jsx)(tr,{})}},{key:"expertMenu",value:function(){return Object(re.jsx)(sr,{})}},{key:"userMenu",value:function(){return Object(re.jsx)(Ka,{})}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"clearInput",value:function(e){e.preventDefault(),this.setState({profileImage:"",firstName:"",lastName:"",password:"",userBio:"",expertContact:"",expertCategories:"",yearsexpertise:"",locationCountry:"",university:"",resume:"",facebookURL:"",twitterURL:"",instagramURL:"",linkedinURL:"",snapchatURL:"",websiteURL:"",clearInput:"",errors:{}})}},{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("Admin",this.adminMenu()),this.isRole("Expert",this.expertMenu()),this.isRole("User",this.userMenu()),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsxs)("div",{id:"pageTitle",children:[this.state.successmessage&&null!==this.state.successmessage&&void 0!==this.state.successmessage&&""!==this.state.successmessage&&Object(re.jsx)("div",{className:"alert alert-success",children:this.state.successmessage}),this.state.errorMessage&&null!==this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage})]}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[this.state.Image_other_UrlContain&&this.state.profileImage&&null!=this.state.profileImage&&""!==this.state.profileImage?Object(re.jsx)("div",{children:Object(re.jsx)("img",{height:"120",width:"160",src:this.state.profileImage,alt:""})}):"",!this.state.Image_other_UrlContain&&this.state.profileImage&&null!=this.state.profileImage&&""!==this.state.profileImage?Object(re.jsx)("div",{children:Object(re.jsx)("img",{height:"120",width:"160",alt:"",src:"".concat(je)+this.state.profileImage})}):"",null==this.state.profileImage||void 0===this.state.profileImage||""===this.state.profileImage?Object(re.jsx)("div",{children:Object(re.jsx)("img",{height:"120",width:"160",src:"/img/profile.png",alt:""})}):"",Object(re.jsx)("br",{}),this.state.RelatedImages1.length>0?Object(re.jsx)("div",{className:"img_preview_main",children:this.state.RelatedImages1.map((function(e,t){return Object(re.jsx)("div",{className:"img_preview",children:Object(re.jsx)("img",{src:e.preview,alt:"Preview Not Available",width:160,height:90})},t)}))}):null,Object(re.jsx)(ar,{className:"upload_footer icon",accept:"image/*",ref:function(t){e.dropzone=t},onDrop:this.onDrop,children:Object(re.jsx)("i",{className:"fa fa-camera"})}),!0===this.state.showClickButton&&Object(re.jsx)("div",{className:"upload_footer Upload-button",children:Object(re.jsxs)("button",{onClick:this.uploadImage,className:"btn Btn_common",style:{"padding-top":"15px","padding-bottom":"15px"},children:[Object(re.jsx)("i",{className:"fa fa-paper-plane-o","aria-hidden":"true"}),"Update Photo"]})})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Upload Resume"}),Object(re.jsx)("input",{name:"resume",className:"form-control",type:"file",id:"resume",onChange:function(t){return e.onChange(t)}}),this.state.uploadResume&&Object(re.jsx)("button",{className:"btn btn-default",onClick:this.upload_resume,children:"Update Resume"}),!this.state.uploadResume&&Object(re.jsx)("span",{className:"success",children:this.state.resume.slice(9)}),Object(re.jsx)("a",{href:"".concat(je)+this.state.resume,title:"Download",download:!0,className:"fa fa-file-pdf-o",children:" "}),Object(re.jsx)("span",{className:"error",children:this.state.errors.resume})]})]}),Object(re.jsxs)("form",{id:"create_expert",onSubmit:this.handleSubmit,children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseMsg}}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:er()("col-md-6 form-group",{"has-error":!!this.state.errors.semail}),children:[Object(re.jsx)("label",{children:"First Name"}),Object(re.jsx)("input",{name:"firstName",className:"form-control",value:this.state.firstName,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.firstName})]}),Object(re.jsxs)("div",{className:er()("col-md-6 form-group",{"has-error":!!this.state.errors.semail}),children:[Object(re.jsx)("label",{children:"Last Name"}),Object(re.jsx)("input",{name:"lastName",className:"form-control",value:this.state.lastName,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.lastName})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)("input",{name:"email",readOnly:!0,className:"form-control",value:this.state.email,type:"email"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Password"}),Object(re.jsx)("input",{name:"password",className:"form-control",onKeyDown:this.keyPress,onChange:this.handleChange,value:this.state.password,type:"password"})]})}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Confirm Password"}),Object(re.jsx)("input",{name:"confirm_password",className:"form-control",value:this.state.confirm_password,onChange:this.handleChange,type:"password"})]}),Object(re.jsx)("span",{className:"error",children:this.state.errors.confirm_password})]}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"University"}),Object(re.jsx)("input",{name:"university",value:this.state.university,onChange:this.handleChange,className:"form-control",type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.university})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Categories"}),Object(re.jsxs)("select",{name:"expertCategories",className:"form-control",onChange:this.handleChange,children:[Object(re.jsx)("option",{value:"",children:"Select Categories"}),this.state.categories.map((function(t,s){return Object(re.jsx)("optgroup",{label:t.name,children:t.subcategory.map((function(t,s){return Object(re.jsx)("option",{selected:e.state.expertCategories===t.name,value:t.name,children:t.name},s)}))},s)}))]})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Country Code"}),Object(re.jsx)("input",{name:"locationState",className:"form-control",value:this.state.expertContactCC,onChange:this.handleChange,type:"text",min:"1",max:"10"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.locationState})]})]}),this.state.role&&("Admin"===this.state.role||"User"===this.state.role)&&Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Bio"}),Object(re.jsx)("textarea",{name:"userBio",className:"form-control",rows:"5",value:this.state.userBio,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.userBio})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Country"}),Object(re.jsx)("input",{name:"locationCountry",className:"form-control",value:this.state.locationCountry,onChange:this.handleChange,type:"text",min:"1",max:"10"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.locationCountry})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"State"}),Object(re.jsx)("input",{name:"locationState",className:"form-control",value:this.state.locationState,onChange:this.handleChange,type:"text",min:"1",max:"10"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.locationState})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"City"}),Object(re.jsx)("input",{name:"locationCity",className:"form-control",value:this.state.locationCity,onChange:this.handleChange,type:"text",min:"1",max:"10"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.locationCity})]})]})]}),this.state.role&&("Admin"===this.state.role||"User"===this.state.role)&&Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Contact Number"}),Object(re.jsx)("input",{name:"expertContact",className:"form-control",value:this.state.expertContact,onChange:this.handleChange,type:"number"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.expertContact})]})}),this.state.role&&"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Contact Number"}),Object(re.jsx)("input",{name:"locationCity",className:"form-control",value:this.state.expertContact,onChange:this.handleChange,type:"text",min:"1",max:"10"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.locationCity})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Focus of Expertise"}),Object(re.jsx)("input",{name:"expertFocusExpertise",className:"form-control",value:this.state.expertFocusExpertise,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.expertFocusExpertise})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Years of Expertise"}),Object(re.jsx)("input",{name:"yearsexpertise",className:"form-control",value:this.state.yearsexpertise,onChange:this.handleChange,type:"select"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.yearsexpertise})]})]}),"Expert"===this.state.role&&Object(re.jsx)("div",{className:"row form-group"}),"Expert"===this.state.role&&Object(re.jsxs)("div",{className:"row ",children:[Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-facebook",onClick:function(t){return e.social_modal("facebook")},children:Object(re.jsx)("span",{className:"fa fa-facebook"})}),Object(re.jsx)("input",{name:"facebook",type:"hidden",value:this.state.facebookURL}),Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-linkedin",onClick:function(t){return e.social_modal("linkdin")},children:Object(re.jsx)("span",{className:"fa fa-linkedin"})}),Object(re.jsx)("input",{name:"linkdin",type:"hidden",value:this.state.linkedinURL}),Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-google",onClick:function(t){return e.social_modal("google")},children:Object(re.jsx)("span",{className:"fa fa-google"})}),Object(re.jsx)("input",{name:"google",type:"hidden",value:this.state.googleURL}),Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-twitter",onClick:function(t){return e.social_modal("twitter")},children:Object(re.jsx)("span",{className:"fa fa-twitter"})}),Object(re.jsx)("input",{name:"twitter",type:"hidden",value:this.state.twitterURL}),this.state.isMusician&&Object(re.jsxs)("div",{children:[Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-soundcloud",onClick:function(t){return e.social_modal("soundcloud")},children:Object(re.jsx)("span",{className:"fa fa-soundcloud"})}),Object(re.jsx)("input",{name:"soundcloud",type:"hidden",value:this.state.soundcloudURL}),Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-soundcloud",onClick:function(t){return e.social_modal("instagram")},children:Object(re.jsx)("span",{className:"fa fa-instagram"})}),Object(re.jsx)("input",{name:"instagram",type:"hidden",value:this.state.instagramURL}),Object(re.jsx)("a",{href:"#!",className:"btn btn-social-icon btn-youtube",onClick:function(t){return e.social_modal("youtube")},children:Object(re.jsx)("span",{className:"fa fa-youtube"})}),Object(re.jsx)("input",{name:"youtube",type:"hidden",value:this.state.youtubeURL})]}),this.state.soc_link&&Object(re.jsx)("div",{className:"error",children:"This field is require."})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),"\xa0",Object(re.jsx)("button",{className:"btn btn-default",onClick:this.clearInput,children:"Reset"})]})})]}),Object(re.jsxs)(gt.a,{show:this.state.show,onHide:this.handleClose,dialogClassName:"custom-modal text-center",bsSize:"small",children:[Object(re.jsxs)(gt.a.Body,{children:[Object(re.jsx)("h5",{children:this.state.social_link}),Object(re.jsx)("p",{children:"Link"}),"Facebook"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.facebookURL,onChange:this.setSocialLink.bind(this)}),"Google"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.googleURL,onChange:this.setSocialLink.bind(this)}),"Twitter"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.twitterURL,onChange:this.setSocialLink.bind(this)}),"Linkdin"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.linkedinURL,onChange:this.setSocialLink.bind(this)}),this.state.isMusician&&"Soundcloud"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.soundcloudURL,onChange:this.setSocialLink.bind(this)}),this.state.isMusician&&"Instagram"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.instagramURL,onChange:this.setSocialLink.bind(this)}),this.state.isMusician&&"Youtube"===this.state.social_link&&Object(re.jsx)("input",{className:"form-control",type:"text",value:this.state.youtubeURL,onChange:this.setSocialLink.bind(this)})]}),Object(re.jsx)(gt.a.Footer,{children:Object(re.jsxs)("div",{className:"pull-right",children:[Object(re.jsx)(ft.a,{className:"btn btn-default",onClick:this.handleClose,children:"Close"}),Object(re.jsx)(ft.a,{className:"btn btn-primary",onClick:this.submitLink,children:"Submit"})]})})]})]})]})})]})})})})}}]),s}(i.Component),ir=Object(u.b)(null,{fetchMyProfile:function(e){var t=Be.get("token");return function(s){return oe.a.get("".concat(pe,"/myuserprofile/").concat(e),{headers:{Authorization:t}}).then((function(e){return e})).catch((function(e){return s($e(e.data.error))}))}},UpdateMyProfile:function(e){var t=Ga.get("token");return function(s){return oe.a.post("".concat(pe,"/user/update"),{headers:{Authorization:t},body:e}).then((function(e){return e.data})).catch((function(e){console.log("error: "+e),$e(s,e.response,v)}))}},logoutUser:De})(Object(Q.g)(Object(ue.a)(rr))),nr=function(e){return Object(re.jsx)(Ya,{plan:e.params.plan})},cr=function(){return Object(re.jsx)("div",{children:"Admin navigation goes here."})},or=function(e){return function(t){var s=Object(u.d)((function(e){return e.auth})).authenticated,a=Object(Q.f)();return Object(i.useEffect)((function(){s||a.push("/login")}),[s,a]),Object(re.jsx)(re.Fragment,{children:Object(re.jsx)(e,{})})}},lr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("div",{className:"mysession-list",children:[Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"My Sessions"})]})})}),Object(re.jsx)("div",{className:"expert-list-wrap",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"expert-list-inner-wrap",children:Object(re.jsx)("div",{className:"col-sm-12",children:"Session list comes here."})})})})})]})}}]),s}(i.Component),dr=s(105),ur=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={recordings:[],currentUser:a.props.cookies.get("user"),showRecordingDeleteModal:!1},a}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.state.currentUser.email;this.props.getExpertRecordings({expertEmail:t}).then((function(t){e.setState({recordings:t.recordings}),console.log("**** getExpertRecordings success  ****"+JSON.stringify(e.state.recordings))}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** getExpertRecordings error ****"+JSON.stringify(t))}))}))}},{key:"openRecordingDeleteModal",value:function(){this.setState({showRecordingDeleteModal:!0})}},{key:"closeRecordingDeleteModal",value:function(){this.setState({showRecordingDeleteModal:!1})}},{key:"playRecordedAudio",value:function(e){this.props.playRecordedAudio({archiveId:e}).then((function(e){console.log("**** playRecordedAudio success  ****"+e.archive_url);var t=e.archive_url;window.open(t,"_blank").focus()}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** playRecordedAudio error ****"+JSON.stringify(t))}))}))}},{key:"deleteRecordedAudio",value:function(e,t,s){var a=this,r=Object(dr.a)(this.state.recordings);r.splice(e,1),this.setState({recordings:r}),this.props.deleteRecordedAudio({archiveId:t,id:s}).then((function(e){console.log("**** deleteRecordedAudio success  ****"+JSON.stringify(e)),a.closeRecordingDeleteModal()}),(function(e){return e.response.json().then((function(e){var t=e.errors;console.log("**** deleteRecordedAudio error ****"+JSON.stringify(t))}))}))}},{key:"recordingsList",value:function(){var e=this;return 0===this.state.recordings.length?Object(re.jsxs)("table",{className:"table",children:[Object(re.jsx)("thead",{children:Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{children:"#"}),Object(re.jsx)("th",{children:"Sent by "}),Object(re.jsx)("th",{children:"Duration"}),Object(re.jsx)("th",{children:"Sent at"}),Object(re.jsx)("th",{children:"Action"})]})}),Object(re.jsx)("tbody",{children:Object(re.jsx)("tr",{children:Object(re.jsx)("td",{colSpan:"5",children:"No Recordings Found"})})})]}):Object(re.jsxs)("table",{className:"table",children:[Object(re.jsx)("thead",{children:Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{children:"#"}),Object(re.jsx)("th",{children:"Sent by "}),Object(re.jsx)("th",{children:"Duration"}),Object(re.jsx)("th",{children:"Sent at"}),Object(re.jsx)("th",{children:"Action"})]})}),Object(re.jsx)("tbody",{children:this.state.recordings.map((function(t,s){return Object(re.jsxs)("tr",{children:[Object(re.jsx)("td",{children:s+1}),Object(re.jsx)("td",{children:t.senderName}),Object(re.jsx)("td",{children:t.duration+" seconds"}),Object(re.jsx)("td",{children:new Date(Number(t.updatedAt)).toUTCString()}),Object(re.jsxs)("td",{children:[Object(re.jsx)("button",{type:"button",onClick:e.playRecordedAudio.bind(e,t.archiveId),className:"btn btn-info btn-sm",title:"play",children:Object(re.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})}),Object(re.jsx)("button",{type:"button",onClick:e.openRecordingDeleteModal.bind(e),className:"btn btn-danger btn-sm",children:Object(re.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})}),Object(re.jsxs)(gt.a,{bsSize:"small",show:e.state.showRecordingDeleteModal,onHide:e.closeRecordingDeleteModal.bind(e),children:[Object(re.jsx)(gt.a.Header,{closeButton:!0,children:Object(re.jsx)(gt.a.Title,{children:"Recording Delete"})}),Object(re.jsx)(gt.a.Body,{children:Object(re.jsx)("strong",{children:"Are you sure to delete ?"})}),Object(re.jsxs)(gt.a.Footer,{children:[Object(re.jsx)(ft.a,{bsStyle:"danger",onClick:e.deleteRecordedAudio.bind(e,s,t.archiveId,t._id),children:"Delete"}),Object(re.jsx)(ft.a,{onClick:e.closeRecordingDeleteModal.bind(e),children:"Close"})]})]})]})]},"TR_".concat(s))}))})]})}},{key:"render",value:function(){return Object(re.jsxs)("div",{className:"recordings-wrapper",children:[Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Recordings"})]})})}),Object(re.jsx)("div",{className:"expert-list-wrap",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsx)("div",{className:"row",children:Object(re.jsx)("div",{className:"expert-list-inner-wrap",children:Object(re.jsx)("div",{className:"col-sm-12",children:Object(re.jsx)(St.a,{header:"Recordings",bsStyle:"primary",children:this.recordingsList()})})})})})})]})}}]),s}(i.Component),hr=Object(u.b)(null,{getExpertRecordings:function(e){var t=e.expertEmail;return function(e){return oe.a.post("".concat(pe,"/getExpertRecordings"),{expertEmail:t}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}},playRecordedAudio:function(e){var t=e.archiveId;return function(e){return oe.a.post("".concat(pe,"/playRecordedAudio"),{archiveId:t}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}},deleteRecordedAudio:function(e){var t=e.archiveId,s=e.id;return function(e){return oe.a.post("".concat(pe,"/deleteRecordedAudio"),{archiveId:t,id:s}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}})(Object(ue.a)(ur)),mr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).props.protectedTest(),a}return Object(te.a)(s,[{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Dashboard"})]})}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"adminMenu",value:function(){return Object(re.jsx)(tr,{})}},{key:"expertMenu",value:function(){return Object(re.jsx)(sr,{})}},{key:"userMenu",value:function(){return Object(re.jsx)(Ka,{})}},{key:"render",value:function(){return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("Admin",this.adminMenu()),this.isRole("Expert",this.expertMenu()),this.isRole("User",this.userMenu()),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsx)("div",{id:"pageTitle",children:Object(re.jsx)("div",{className:"title",children:"Dashboard"})}),Object(re.jsx)("p",{children:this.props.content})]})]})})]})})})}}]),s}(i.Component);var pr=Object(u.b)((function(e){return{content:e.auth.content}}),{protectedTest:Fe})(Object(ue.a)(mr)),jr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("a",{href:"/dashboard/conversation/view/".concat(this.props.conversationId),className:"list-group-item list-group-item-action flex-column align-items-start",children:[Object(re.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(re.jsx)("h5",{className:"mb-1",children:this.props.author}),Object(re.jsx)("small",{children:this.props.timestamp})]}),Object(re.jsx)("p",{className:"mb-1",children:this.props.message})]})}}]),s}(i.Component),br=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).userCookie=a.props.cookies.get("user"),a}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("div",{children:this.props.conversations.map((function(e){return e.map((function(e){return Object(re.jsx)(jr,{message:e.body,authorId:e.author._id,conversationId:e.conversationId,author:"".concat(e.author.profile.firstName," ").concat(e.author.profile.lastName.substring(0,1),"."),timestamp:yt()(e.createdAt).from(yt()())},e._id)}))}))})}}]),s}(i.Component),xr=Object(ue.a)(br),gr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"UNSAFE_UNSAFE_componentWillMount",value:function(){this.props.fetchConversations()}},{key:"renderInbox",value:function(){return this.props.conversations&&this.props.conversations.length>0?Object(re.jsx)(xr,{conversations:this.props.conversations}):Object(re.jsx)("div",{className:"alert alert-danger",children:"You do not have any active conversations."})}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Inbox"})]})}},{key:"userMenu",value:function(){return Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/profile/edit",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Edit Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/inbox",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Inbox"})]})})]})}},{key:"render",value:function(){return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:this.userMenu()}),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsx)("div",{id:"pageTitle",children:Object(re.jsxs)("div",{className:"title",children:["Inbox",Object(re.jsx)(h.b,{className:"btn btn-primary right",to:"/dashboard/conversation/new",children:"Compose Message"})]})}),Object(re.jsx)("div",{className:"list-group",children:this.renderInbox()})]})]})})]})})})}}]),s}(i.Component);var fr=Object(u.b)((function(e){return{conversations:e.communication.conversations}}),{fetchConversations:Jt})(gr),Or=Pe;Or.on("disconnect",(function(){Or.disconnect()}));var vr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={users:[],SuccessMessage:"",errorMessage:"",role:""},a.props.protectedTest(),a.BanMe=a.BanMe.bind(Object(we.a)(a)),a.UnBanMe=a.UnBanMe.bind(Object(we.a)(a)),a.deleteMe=a.deleteMe.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"adminMenu",value:function(){return Object(re.jsx)(tr,{})}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Users List"})]})}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"UNSAFE_componentWillMount",value:function(){this.getList()}},{key:"getList",value:function(){var e=this;try{this.props.getUsersList().then((function(t){var s=e.props.cookies.get("user").role;e.setState({role:s}),"Admin"===s?e.setState({users:t.user}):(e.setState({users:[]}),e.setState({errorMessage:"Sorry You Are Not Authorized To See This List"}))}),(function(e){return e.response.json().then((function(e){e.errors}))}))}catch(t){console.log("exception "+t)}}},{key:"deleteMe",value:function(e){var t=this;e.preventDefault(),this.props.deleteMe(e.target.value).then((function(e){e.SuccessMessage&&null!==e.SuccessMessage&&void 0!==e.SuccessMessage&&(e.state&&null!==e.state&&void 0!==e.state&&"Deleted"===e.state?(t.setState({SuccessMessage:e.SuccessMessage}),t.getList()):t.setState({SuccessMessage:e.SuccessMessage}))}))}},{key:"BanMe",value:function(e){var t=this;e.preventDefault();var s=e.target.value,a=!1,r=!1;null==s||void 0===s||""===s?(s=e.target.parentNode.value,r=!0):a=!0,this.props.BanMe(s).then((function(e){e.SuccessMessage&&null!==e.SuccessMessage&&void 0!==e.SuccessMessage&&(e.state&&null!==e.state&&void 0!==e.state&&e.state,t.setState({SuccessMessage:e.SuccessMessage}))})),a&&null!=a&&void 0!==a&&!0===a&&""!==a&&(console.log("Confirm 1"),"red"===e.target.children[0].style.color?(console.log("Confirm 1.a"),console.log(e.target),e.target.children[0].style.color="green",e.target.children[0].title="Enable It",e.target.title="Enable It",e.target.parentNode.parentNode.children[4].children[0].innerHTML="No"):(console.log("Confirm 1.b"),console.log(e.target),e.target.children[0].style.color="red",e.target.children[0].title="Disable It",e.target.title="Disable It",e.target.parentNode.parentNode.children[4].children[0].innerHTML="Yes")),r&&null!=r&&void 0!==r&&!0===r&&""!==r&&(console.log("Confirm2"),"red"===e.target.style.color?(console.log("Confirm 2.a"),console.log(e.target),e.target.title="Enable It",e.target.parentNode.title="Enable It",e.target.style.color="green",e.target.parentNode.parentNode.parentNode.children[4].children[0].innerHTML="No"):(console.log("Confirm 2.b"),console.log(e.target),e.target.title="Disable It",e.target.parentNode.title="Disable It",e.target.style.color="red",e.target.title="Disable",e.target.parentNode.parentNode.parentNode.children[4].children[0].innerHTML="Yes"))}},{key:"UnBanMe",value:function(e){var t=this;e.preventDefault();var s=e.target.value;null!==s&&void 0!==s&&""!==s||(s=e.target.parentNode.value),this.props.UnBanMe(s).then((function(e){e.SuccessMessage&&null!==e.SuccessMessage&&void 0!==e.SuccessMessage&&t.setState({SuccessMessage:"Successfully Un-Baned The User"})}))}},{key:"render",value:function(){var e=this,t=Object(re.jsx)("div",{className:"alert alert-success",children:this.state.SuccessMessage}),s=Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage});return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("Admin",this.adminMenu()),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:"User List"}),this.state.SuccessMessage&&null!=this.state.SuccessMessage&&void 0!==this.state.SuccessMessage&&""!==this.state.SuccessMessage?t:"",this.state.errorMessage&&null!=this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage?s:""]}),Object(re.jsx)("p",{children:this.props.content}),Object(re.jsx)("div",{children:"Admin"===this.state.role&&Object(re.jsxs)("table",{children:[Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{style:{width:"20%",paddingLeft:"10px"},children:"First Name"}),Object(re.jsx)("th",{style:{width:"20%"},children:"Second Name"}),Object(re.jsx)("th",{style:{width:"40%"},children:"Email"}),Object(re.jsx)("th",{style:{width:"10%"},children:"Role"}),Object(re.jsx)("th",{style:{width:"50%"},children:"Enabled"}),Object(re.jsx)("th",{style:{width:"50%"},children:"Action"})]}),this.state.users&&null!==this.state.users&&void 0!==this.state.users?this.state.users.map((function(t,s){return Object(re.jsx)(yr,{index:s,data:t,BanMe:e.BanMe,UnBanMe:e.UnBanMe,deleteMe:e.deleteMe},s)})):"y"]})})]})]})})]})})})}}]),s}(i.Component),yr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("tr",{style:{background:(e=this.props.index,e&&null!==e&&e%2===0?"#c6c6c6":"white")},children:[Object(re.jsx)("td",{children:Object(re.jsx)("h4",{style:{paddingLeft:"10px"},children:this.props.data.profile.firstName})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:this.props.data.role&&null!=this.props.data.role&&void 0!==this.props.data.role&&"Expert"===this.props.data.role?Object(re.jsx)("a",{href:"/dashboard/userslist/"+this.props.data._id,children:this.props.data.profile.lastName}):this.props.data.profile.lastName})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:this.props.data.email})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:this.props.data.role})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:!0===this.props.data.enableAccount?"Yes":"No"})}),Object(re.jsx)("td",{children:!0===this.props.data.enableAccount?Object(re.jsx)("button",{className:"btn ",dataToggle:"tooltip",title:"Disable",style:{borderColor:"white",height:"50px",width:"72px"},onClick:this.props.BanMe,value:this.props.data._id,children:Object(re.jsx)("h4",{value:this.props.data._id,style:{color:"red"},children:"X"})}):Object(re.jsx)("button",{className:"btn ",dataToggle:"tooltip",title:"Enable",style:{borderColor:"white",height:"50px",width:"72px"},onClick:this.props.BanMe,value:this.props.data._id,children:Object(re.jsx)("h4",{style:{color:"green"},children:"X"})})}),Object(re.jsx)("td",{title:"Delete",children:Object(re.jsx)("button",{className:"btn btn-danger",onClick:this.props.deleteMe,value:this.props.data._id,children:"Delete"})})]});var e}}]),s}(n.a.Component);var Nr=Object(u.b)((function(e){return{content:e.auth.content}}),{protectedTest:Fe,getUsersList:function(){return function(e){return fetch("".concat(pe,"/getUsersList"),{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))}},BanMe:function(e){return function(t){return fetch("".concat(pe,"/BanHim"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then((function(e){return e.json()})).then((function(e){return e}))}},UnBanMe:function(e){return console.log("HIIIII"+e),function(t){return fetch("".concat(pe,"/UnBanHim"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))}},deleteMe:function(e){return function(t){return fetch("".concat(pe,"/deleteHim"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e}).then((function(e){return e.json()})).then((function(e){return e}))}}})(Object(ue.a)(vr)),wr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).onChange=function(e){switch(e.target.name){case"profile":a.setState({profile:e.target.files});break;case"resume":a.setState({update_resume:e.target.files})}},a.keyPress=function(e){8===e.keyCode&&a.setState({password:""})},a.handleChange=function(e){if("expertCategories"===e.target.name)for(var t=0;t<a.state.musicCategories.subcategory.length;t++){if(e.target.value.match(new RegExp(a.state.musicCategories.subcategory[t].name,"i"))){a.setState({isMusician:!0});break}a.setState({isMusician:!1})}if(a.state.errors[e.target.name]){var s,r=Object.assign({},a.state.errors);delete r[e.target.name],a.setState((s={},Object(gs.a)(s,e.target.name,e.target.value),Object(gs.a)(s,"errors",r),s))}else a.setState(Object(gs.a)({},e.target.name,e.target.value))},a.state={successmessage:"",errorMessage:"",categories:[],role:"",firstName:"",lastName:"",email:"",password:"",userBio:"",profile:"",expertRates:"",expertCategories:"",profileImage:"",expertContact:"",expertContactCC:"",university:"",expertRating:"",expertFocusExpertise:"",yearsexpertise:"",errors:{},resume:"",update_resume:"",image_select:!1,twitterURL:"",googleURL:"",linkedinURL:"",facebookURL:"",youtubeURL:"",soundcloudURL:"",instagramURL:"",isMusician:!1,musicCategories:[],confirm_password:"",passwordMatcherror:!1},a.handleChange=a.handleChange.bind(Object(we.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user").role;if(this.setState({role:t}),"Admin"===t){if(this.props&&null!==this.props&&void 0!==this.props&&this.props.params&&null!==this.props.params&&void 0!==this.props.params&&""!==this.props.params){var s=this.props.params;this.props.getTheUserInformation(s).then((function(t){e.setState({firstName:t.user.profile.firstName,lastName:t.user.profile.lastName,email:t.user.email}),e.setState({userBio:t.user.userBio,expertRates:t.user.expertRates,expertCategories:t.user.expertCategories}),e.setState({expertContact:t.user.contact,expertRating:t.user.expertRating,expertFocusExpertise:t.user.expertFocusExpertise}),e.setState({yearsexpertise:t.user.yearsexpertise,password:t.user.password,expertContactCC:t.user.expertContactCC}),e.setState({profileImage:t.user.profileImage}),e.setState({university:t.user.university}),e.setState({resume:t.user.resume_path}),e.setState({facebookURL:t.user.facebookURL}),e.setState({twitterURL:t.user.twitterURL}),e.setState({googleURL:t.user.googleURL}),e.setState({linkedinURL:t.user.linkedinURL}),e.setState({youtubeURL:t.user.youtubeURL}),e.setState({instagramURL:t.user.instagramURL}),e.setState({soundcloudURL:t.user.linkedinURL}),e.setState({isMusician:t.user.isMusician})}),(function(t){e.setState({errorMessage:"Sorry Couldn't get Information"})}))}}else this.setState({errorMessage:"Sorry You Are Not Authorized"});oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){e.setState({categories:t.data});var s,a=Object(jt.a)(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;"Music Lessons"===r.name&&e.setState({musicCategories:r})}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var s={};if(""!==this.state.firstName&&void 0!==this.state.firstName&&""!==this.state.firstName.trim()||(s.firstName="First Name cant be empty"),""!==this.state.lastName&&void 0!==this.state.lastName&&""!==this.state.lastName.trim()||(s.lastName="Last Name cant be empty"),""!==this.state.email&&void 0!==this.state.email||(s.this.state.firstName="Email cant be empty"),""!==this.state.password&&void 0!==this.state.password&&""!==this.state.password.trim()||(s.password="Password cant be empty"),""!==this.state.expertCategories&&void 0!==this.state.expertCategories||(s.expertCategories="Categories cant be empty"),""!==this.state.expertContact&&void 0!==this.state.expertContact||(s.expertContact="Contact cant be empty"),""!==this.state.expertContactCC&&void 0!==this.state.expertContactCC||(s.expertContactCC="County Code cant be empty"),""!==this.state.university&&void 0!==this.state.university&&""!==this.state.university.trim()||(s.university="university cant be empty"),this.state.password.length>0&&this.state.confirm_password.length>0&&this.state.password!==this.state.confirm_password&&(s.confirm_password="Password not match"),this.setState({errors:s}),0===Object.keys(s).length){var a=new FormData(this.state);return a.append("email",this.state.email),a.append("expertCategories",this.state.expertCategories),a.append("expertContact",this.state.expertContact),a.append("expertContactCC",this.state.expertContactCC),a.append("expertFocusExpertise",this.state.expertFocusExpertise),this.state.confirm_password.length>0&&a.append("password",this.state.password),a.append("firstName",this.state.firstName),a.append("lastName",this.state.lastName),a.append("university",this.state.university),a.append("yearsexpertise",this.state.yearsexpertise),a.append("profile",this.state.profile.length>0?this.state.profile[0]:"",this.state.profile.length>0?this.state.profile[0].name:""),a.append("resume",this.state.update_resume.length>0?this.state.update_resume[0]:"",this.state.update_resume.length>0?this.state.update_resume[0].name:""),a.append("facebookLink",this.state.facebookURL),a.append("twitterLink",this.state.twitterURL),a.append("linkedinLink",this.state.linkedinURL),a.append("googleLink",this.state.googleURL),this.state.isMusician?(a.append("instagramLink",this.state.instagramURL),a.append("youtubeLink",this.state.youtubeURL),a.append("soundcloudLink",this.state.soundcloudURL),a.append("isMusician",!0)):a.append("isMusician",!1),oe.a.post("".concat(pe,"/UpdateUserInfo"),a,{}).then((function(e){e.passchange&&setTimeout((function(){this.props.history.push("/logout")}),1500),e.data.success&&t.props.location.reload()})).catch((function(e){console.log(e)}))}}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Update This Expert"})]})}},{key:"adminMenu",value:function(){return Object(re.jsx)(tr,{})}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"render",value:function(){var e=this;return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("Admin",this.adminMenu()),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:"Update Expert"}),this.state.successmessage&&null!==this.state.successmessage&&void 0!==this.state.successmessage&&""!==this.state.successmessage&&Object(re.jsx)("div",{className:"alert alert-success",children:this.state.successmessage}),this.state.errorMessage&&null!==this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage})]}),this.state.role&&"Admin"===this.state.role&&Object(re.jsxs)("form",{id:"create_expert",onSubmit:this.handleSubmit,children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseMsg}}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{children:Object(re.jsx)("img",{height:"120",width:"160",alt:"profile",src:"".concat(je)+this.state.profileImage})}),Object(re.jsxs)("span",{children:["selected file ",this.state.profileImage.slice(9)]}),Object(re.jsxs)("div",{className:er()("col-md-6 form-group",{"has-error":!!this.state.errors.profile}),children:[Object(re.jsx)("label",{children:"Profile Picture"}),Object(re.jsx)("input",{type:"file",name:"profile",onChange:function(t){return e.onChange(t)}})]}),Object(re.jsxs)("div",{className:er()("col-md-6 form-group",{"has-error":!!this.state.errors.resume}),children:[Object(re.jsx)("label",{children:"Resume"}),Object(re.jsx)("input",{type:"file",name:"resume",onChange:function(t){return e.onChange(t)}}),Object(re.jsxs)("span",{children:["selected file ",this.state.resume.slice(9)]}),Object(re.jsx)("span",{className:"error",children:this.state.errors.resume})]}),Object(re.jsxs)("div",{className:er()("col-md-6 form-group",{"has-error":!!this.state.errors.semail}),children:[Object(re.jsx)("label",{children:"First Name"}),Object(re.jsx)("input",{name:"firstName",className:"form-control",value:this.state.firstName,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.firstName})]}),Object(re.jsxs)("div",{className:er()("col-md-6 form-group",{"has-error":!!this.state.errors.semail}),children:[Object(re.jsx)("label",{children:"Last Name"}),Object(re.jsx)("input",{name:"lastName",className:"form-control",value:this.state.lastName,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.lastName})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Email"}),Object(re.jsx)("input",{name:"email",readOnly:!0,className:"form-control",value:this.state.email,type:"email"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Password"}),Object(re.jsx)("input",{name:"password",className:"form-control",onKeyDown:this.keyPress,value:this.state.password,onChange:this.handleChange,type:"password"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.password})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Confirm Password"}),Object(re.jsx)("input",{name:"confirm_password",className:"form-control",value:this.state.confirm_password,onChange:this.handleChange,type:"password"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.confirm_password})]})}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Categories"}),Object(re.jsxs)("select",{name:"expertCategories",className:"form-control",value:this.state.expertCategories,onChange:this.handleChange,children:[Object(re.jsx)("option",{value:"",children:"Select"}),Object(re.jsx)("option",{value:"accounting",children:"Accounting"}),Object(re.jsx)("option",{value:"accounting-finance",children:"Accounting-finance"}),Object(re.jsx)("option",{value:"blogging",children:"Blogging"}),Object(re.jsx)("option",{value:"graphic-design",children:"Graphic-design"}),Object(re.jsx)("option",{value:"bass",children:"bass"}),"*/",this.state.categories.map((function(e,t){return Object(re.jsx)(Sr,{cats:e},t)}))]}),Object(re.jsx)("span",{className:"error",children:this.state.errors.expertCategories})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Country-Code"}),Object(re.jsx)("select",{name:"expertContactCC",className:"form-control",value:this.state.expertContactCC,onChange:this.handleChange,children:ha.map((function(e,t){return Object(re.jsx)("option",{value:e.code,children:e.country+" "+e.code})}))}),Object(re.jsx)("span",{className:"error",children:this.state.errors.expertContactCC})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Contact Number"}),Object(re.jsx)("input",{name:"expertContact",className:"form-control",value:this.state.expertContact,onChange:this.handleChange,type:"number"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.expertContact})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Focus of Expertise"}),Object(re.jsx)("input",{name:"expertFocusExpertise",className:"form-control",value:this.state.expertFocusExpertise,onChange:this.handleChange,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Years of Expertise"}),Object(re.jsx)("input",{name:"yearsexpertise",className:"form-control",value:this.state.yearsexpertise,onChange:this.handleChange,type:"select"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"University"}),Object(re.jsx)("input",{name:"university",className:"form-control",value:this.state.university,onChange:this.handleChange,type:"text"}),Object(re.jsx)("span",{className:"error",children:this.state.errors.university})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Facebook Url"}),Object(re.jsx)("input",{name:"facebookURL",className:"form-control",value:this.state.facebookURL,onChange:this.handleChange,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Twitter Url"}),Object(re.jsx)("input",{name:"twitterURL",className:"form-control",value:this.state.twitterURL,onChange:this.handleChange,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Linkedin Url"}),Object(re.jsx)("input",{name:"linkedinURL",className:"form-control",value:this.state.linkedinURL,onChange:this.handleChange,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Google Url"}),Object(re.jsx)("input",{name:"googleURL",className:"form-control",value:this.state.googleURL,onChange:this.handleChange,type:"text"})]}),this.state.isMusician&&Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Youtube Url"}),Object(re.jsx)("input",{name:"youtubeURL",className:"form-control",value:this.state.youtubeURL,onChange:this.handleChange,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"SoundCloud Url"}),Object(re.jsx)("input",{name:"soundcloudURL",className:"form-control",value:this.state.soundcloudURL,onChange:this.handleChange,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Instagram Url"}),Object(re.jsx)("input",{name:"instagramURL",className:"form-control",value:this.state.instagramURL,onChange:this.handleChange,type:"text"})]})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),"\xa0",Object(re.jsx)("button",{className:"btn btn-default",onClick:this.clearInput,children:"Reset"})]})})]})]})]})})]})})})}}]),s}(i.Component),Sr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("optgroup",{label:this.props.cats.name,children:this.props.cats.subcategory.map((function(e,t){return Object(re.jsx)(_r,{subcat:e},t)}))})}}]),s}(n.a.Component),_r=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("option",{value:this.props.subcat.name,children:[this.props.subcat.name," "]})}}]),s}(n.a.Component);var kr=Object(u.b)((function(e){return{content:e.auth.content}}),{getTheUserInformation:function(e){return function(t){return fetch("".concat(pe,"/getuserInfo/")+e.id,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id="+e.id}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))}},AdminUpdateExpert:function(e){return function(t){return fetch("".concat(pe,"/UpdateUserInfo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))}}})(Object(Q.g)(Object(ue.a)(wr))),Cr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={responseMsg:"",role:"",errorMessage:"",successMessage:"",info:""},a.props.protectedTest(),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user");console.log(t.role),console.log("cu");var s=t._id,a=this;this.setState({role:t.role}),oe.a.get("".concat(pe,"/myuserprofile/").concat(s),{headers:{Authorization:this.props.cookies.get("token")}}).then((function(s){var r=s.data.user.role,i=s.data.user.stripeId;if(t&&null!==t.role&&"Expert"===t.role&&s&&null!==s&&s.data&&null!==s.data&&s.data.user&&null!==s.data.user&&void 0!==s.data.user&&"Expert"===r&&""===i)e.setState({errorMessage:"Your Payment Configuration Is Not Set. Please Configure It To Access Session Page"});else if(t&&null!==t.role&&"Expert"===t.role&&s&&null!==s&&s.data&&null!==s.data&&s.data.user&&null!=s.data.user&&void 0!==s.data.user&&"Expert"===r&&""!==i){a.setState({successMessage:"You have already filled the required information",errorMessage:"",info:"You will be redirected to dashboard."});var n=4,c=setInterval((function(){a.setState({info:"Redirecting in "+n+" Seconds."}),0===(n-=1)&&(clearInterval(c),window.location.href="/dashboard")}),1e3)}else"Expert"!==t.role&&(console.log("==========================="),console.log(t.role),console.log("Expert"!==t.role),e.setState({errorMessage:"You are not authorized to view this page",info:"You will be redirected to dashboard."}),setInterval((function(){a.setState({info:"Redirecting in "+n+" Seconds."}),0===(n-=1)&&(clearInterval(c),window.location.href="/dashboard")}),1e3))}))}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Confirm Payements Configuration Page"})]})}},{key:"userMenu",value:function(){return Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/profile/edit",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Edit Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/inbox",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Inbox"})]})})]})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:this.userMenu()}),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsx)("div",{id:"pageTitle",children:Object(re.jsx)("div",{className:"title",children:"Confirm Payments Configuration"})}),this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage}),this.state.errorMessage&&""!==this.state.errorMessage&&"Expert"===this.state.role&&Object(re.jsx)("a",{href:"https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_AO6OL4V0irBbASlFy9dnrWoNYVgJC5Ru&scope=read_write",className:"btn btn-danger",children:"Stripe"}),this.state.successMessage&&""!==this.state.successMessage&&Object(re.jsx)("div",{className:"alert alert-success",children:this.state.successMessage}),this.state.info&&""!==this.state.info&&Object(re.jsx)("div",{className:"alert alert-info",children:this.state.info})]})]})})]})})})}}]),s}(i.Component),Rr=Object(u.b)(null,{protectedTest:Fe})(Object(ue.a)(Cr)),Mr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={responseMsg:"",role:"",errorMessage:"",info:""},a.props.protectedTest(),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user"),s=t._id,a=t.slug,r=this.props.location.query.code,i=this;oe.a.get("".concat(pe,"/myuserprofile/").concat(s,"/").concat(r),{headers:{Authorization:this.props.cookies.get("token")}}).then((function(t){if(console.log("*****************"),console.log(t),t&&t.data&&null!==t.data&&void 0!==t.data&&t.data.status&&null!==t.data.status&&void 0!==t.data.status&&"success"===t.data.status){e.setState({successMessage:t.data.SuccessMessage,errorMessage:"",info:"Redirecting in 5 Seconds"}),setTimeout((function(){window.location.href="/mysession/"+a}),5e3);var s=4,r=setInterval((function(){i.setState({successMessage:t.data.SuccessMessage,errorMessage:"",info:"Redirecting in "+s+" Seconds"}),0===(s-=1)&&clearInterval(r)}),1e3)}else e.setState({errorMessage:t.data.error,successMessage:""})}))}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Confirm Payements Configuration Page"})]})}},{key:"userMenu",value:function(){return Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/profile/edit",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Edit Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/inbox",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Inbox"})]})})]})}},{key:"render",value:function(){return Object(re.jsx)("div",{children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:this.userMenu()}),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsx)("div",{id:"pageTitle",children:Object(re.jsx)("div",{className:"title",children:"Confirm Payments Configuration"})}),this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage}),this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("a",{href:"https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_AO6OL4V0irBbASlFy9dnrWoNYVgJC5Ru&scope=read_write",className:"btn btn-danger",children:"Stripe"}),this.state.successMessage&&""!==this.state.successMessage&&Object(re.jsx)("div",{className:"alert alert-success",children:this.state.successMessage}),this.state.info&&""!==this.state.info&&Object(re.jsx)("div",{className:"alert alert-info",children:this.state.info})]})]})})]})})})}}]),s}(i.Component),Lr=Object(u.b)(null,{protectedTest:Fe})(Object(ue.a)(Mr)),Ur=Object(Ue.a)({form:"register"}),Er=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"text",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Ir=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("input",Object(g.a)({type:"email",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Ar=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"yearsexpertise",className:"form-control"},e.input),{},{children:[Object(re.jsx)("option",{value:"",children:"Select"}),ua.a.range(0,41).map((function(e){return Object(re.jsx)("option",{value:e.toString(),children:e},"OPTION_".concat(e))}))]})),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Tr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).social_modal=function(e){switch(e){case"facebook":a.setState({social_link:"Facebook"}),a.handleShow();break;case"twitter":a.setState({social_link:"Twitter"}),a.handleShow();break;case"google":a.setState({social_link:"Google"}),a.handleShow();break;case"linkdin":a.setState({social_link:"Linkdin"}),a.handleShow()}},a.getsubcategories=function(e){a.setState({select_category:e.target.value});for(var t=0;t<a.state.musicCategories.subcategory.length;t++){if(e.target.value.match(new RegExp(a.state.musicCategories.subcategory[t].name,"i"))){a.setState({isMusician:!0});break}a.setState({isMusician:!1})}},a.setSocialLink=function(e){switch(a.state.social_link){case"Facebook":a.setState({facebookLink:e.target.value});break;case"Twitter":a.setState({twitterLink:e.target.value});break;case"Google":a.setState({googleLink:e.target.value});break;case"Linkdin":a.setState({linkdinLink:e.target.value})}},a.onChange=function(e){switch(e.target.name){case"profile":a.setState({profile:e.target.files}),a.setState({imageselect:!1});break;case"resume":a.setState({resume:e.target.files}),a.setState({resumeselect:!1})}},a.state={responseMsg:"",categories:[],musicCategories:[],role:"",profile:[],resume:[],imageselect:!1,resumeselect:!1,facebookLink:"",linkdinLink:"",googleLink:"",twitterLink:"",show:!1,social_link:"",isMusician:!1,select_category:""},a.props.protectedTest(),a.handleShow=a.handleShow.bind(Object(we.a)(a)),a.handleClose=a.handleClose.bind(Object(we.a)(a)),a.submitLink=a.submitLink.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user").role;this.setState({role:t}),"Admin"!==t&&this.setState({errorMessage:"Sorry You Are Not Authorized"}),oe.a.get("".concat(pe,"/getExpertsCategoryList")).then((function(t){e.setState({categories:t.data});var s,a=Object(jt.a)(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;"Music Lessons"===r.name&&e.setState({musicCategories:r})}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"componentDidMount",value:function(){window.$(document).ready((function(){window.$("#create_expert").validate({rules:{},messages:{}})}))}},{key:"submitLink",value:function(){this.handleClose()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"clearInput",value:function(){this.props.location.reload()}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Create Expert"})]})}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"adminMenu",value:function(){return Object(re.jsx)(tr,{})}},{key:"handleFormSubmit",value:function(e){var t=this;if(this.state.profile.length>0&&this.setState({imageselect:!1}),this.state.resume.length>0&&this.setState({resumeselect:!1}),0!==this.state.profile.length&&0!==this.state.resume.length){var s=new FormData(e);return s.append("email",e.email),s.append("expertCategories",this.state.select_category?this.state.select_category:""),s.append("expertContact",e.expertContact),s.append("expertContactCC",e.expertContactCC),s.append("expertFocusExpertise",e.expertFocusExpertise?e.expertFocusExpertise:""),s.append("firstName",e.firstName),s.append("lastName",e.lastName),s.append("password",e.password),s.append("university",e.university),s.append("yearsexpertise",e.yearsexpertise?e.yearsexpertise:""),s.append("profile",this.state.profile.length>0?this.state.profile[0]:"",this.state.profile.length>0?this.state.profile[0].name:""),s.append("resume",this.state.resume.length>0?this.state.resume[0]:"",this.state.resume.length>0?this.state.resume[0].name:""),s.append("facebookLink",e.facebookLink?e.facebookLink:""),s.append("twitterLink",e.twitterLink?e.twitterLink:""),s.append("linkedinLink",e.linkdinLink?e.linkdinLink:""),s.append("googleLink",e.googleLink?e.googleLink:""),this.state.isMusician?(s.append("isMusician",!0),s.append("youtubeLink",e.youtubeLink?e.youtubeLink:""),s.append("instagramLink",e.instagramLink?e.instagramLink:""),s.append("soundcloudLink",e.soundcloudLink?e.soundcloudLink:""),console.log(e)):s.append("isMusician",!1),oe.a.post("".concat(pe,"/createExpert"),s,{headers:{Authorization:this.props.cookies.get("token")}}).then((function(e){console.log(e),e.data.success||(t.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e.data.error+"</div>"}),window.$(".form-control").val(""),window.$("form").each((function(){this.reset()}))),e.data.success&&t.setState({responseMsg:"<div class='alert alert-success text-center'>"+e.data.message+"</div>"})})).catch((function(e){console.log(e),t.setState({responseMsg:"<div class='alert alert-danger text-center'>"+e+"</div>"})}))}this.setState({imageselect:!0})}},{key:"render",value:function(){var e=this,t=this.props.handleSubmit;return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("Admin",this.adminMenu()),Object(re.jsx)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar"}),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:"Create Expert"}),this.state.errorMessage&&null!==this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage})]}),this.state.role&&"Admin"===this.state.role&&Object(re.jsxs)("div",{children:[Object(re.jsxs)("form",{id:"create_expert",enctype:"multipart/form-data",onSubmit:t(this.handleFormSubmit.bind(this)),children:[Object(re.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.responseMsg}}),Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"First Name*"}),Object(re.jsx)(Ee.a,{name:"firstName",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-6 form-group",children:[Object(re.jsx)("label",{children:"Last Name*"}),Object(re.jsx)(Ee.a,{name:"lastName",component:Er,type:"text"})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Email*"}),Object(re.jsx)(Ee.a,{name:"email",component:Ir,type:"email"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Password*"}),Object(re.jsx)(Ee.a,{name:"password",component:Er,type:"password"})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Profile Picture*"}),Object(re.jsx)("input",{type:"file",name:"profile",className:"form-control",onChange:function(t){return e.onChange(t)}}),this.state.imageselect&&Object(re.jsx)("div",{className:"error",children:"This field is require."})]})}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsxs)("div",{className:"col-md-12",children:[Object(re.jsx)("label",{children:"Upload Resume*"}),Object(re.jsx)("input",{type:"file",className:"form-control",name:"resume",onChange:function(t){return e.onChange(t)}}),this.state.resumeselect&&Object(re.jsx)("div",{className:"error",children:"This field is require."})]})}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"University*"}),Object(re.jsx)(Ee.a,{name:"university",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Categories*"}),Object(re.jsx)(Ee.a,{name:"expertCategories",component:function(t){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"expertCategories",className:"form-control"},t.input),{},{onChange:e.getsubcategories,children:[Object(re.jsx)("option",{value:"",children:"Select"}),e.state.categories.map((function(e,t){return Object(re.jsx)(Dr,{cats:e})}))]})),t.touched&&t.error&&Object(re.jsx)("div",{className:"error",children:t.error})]})},type:"select"})]}),Object(re.jsxs)("div",{className:"col-md-3 form-group",children:[Object(re.jsx)("label",{children:"Country Code*"}),Object(re.jsx)(Ee.a,{name:"expertContactCC",component:function(e){return Object(re.jsxs)("div",{children:[Object(re.jsxs)("select",Object(g.a)(Object(g.a)({name:"expertContactCC",className:"form-control"},e.input),{},{children:[Object(re.jsx)("option",{value:"",children:"Select"}),ha.map((function(e,t){return Object(re.jsx)("option",{value:e.code,children:e.country+" "+e.code},"COUNTRY_KEY_".concat(t))}))]})),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},type:"number"})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Contact Number*"}),Object(re.jsx)(Ee.a,{name:"expertContact",component:Er,type:"number"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Focus of Expertise"}),Object(re.jsx)(Ee.a,{name:"expertFocusExpertise",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Years of Expertise"}),Object(re.jsx)(Ee.a,{name:"yearsexpertise",component:Ar,type:"select"})]})]}),Object(re.jsxs)("div",{className:"row form-group",children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Facebook Url"}),Object(re.jsx)(Ee.a,{name:"facebookLink",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Twitter Url"}),Object(re.jsx)(Ee.a,{name:"twitterLink",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Linkedin Url"}),Object(re.jsx)(Ee.a,{name:"linkdinLink",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Google Url"}),Object(re.jsx)(Ee.a,{name:"googleLink",component:Er,type:"text"})]}),this.state.isMusician&&Object(re.jsxs)("div",{children:[Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Youtube Url"}),Object(re.jsx)(Ee.a,{name:"youtubeLink",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"Instagram Url"}),Object(re.jsx)(Ee.a,{name:"instagramLink",component:Er,type:"text"})]}),Object(re.jsxs)("div",{className:"col-md-4 form-group",children:[Object(re.jsx)("label",{children:"SoundCoud Url"}),Object(re.jsx)(Ee.a,{name:"soundcloudLink",component:Er,type:"text"})]})]})]}),Object(re.jsx)("div",{className:"row form-group",children:Object(re.jsx)("div",{className:"col-md-12",children:Object(re.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})})]}),Object(re.jsx)("button",{className:"btn btn-default",onClick:this.clearInput,children:"Reset"})]})]})]})})]})})})}}]),s}(i.Component),Dr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("optgroup",{label:this.props.cats.name,children:this.props.cats.subcategory.map((function(e,t){return Object(re.jsx)(Fr,{subcat:e},t)}))})}}]),s}(n.a.Component),Fr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsxs)("option",{value:this.props.subcat.name,children:[this.props.subcat.name," "]})}}]),s}(n.a.Component);var Pr=Object(u.b)((function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}}),{protectedTest:Fe,createExpert:et})(Object(ue.a)(Ur(Tr))),Br=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){var e=this.props.cookies.get("user");return Object(re.jsxs)("div",{className:e===this.props.author._id?"message current-user":"message",children:[Object(re.jsx)("span",{className:"message-body",children:this.props.message}),Object(re.jsx)("br",{}),Object(re.jsxs)("span",{className:"message-byline",children:["From ",this.props.author.profile.firstName,this.props.author.profile.lastName," | ",this.props.timestamp]})]})}}]),s}(i.Component),$r=Object(ue.a)(Br),zr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){return Object(re.jsx)("div",{className:"messages",children:this.props.displayMessages.map((function(e){return Object(re.jsx)($r,{message:e.body,author:e.author,timestamp:yt()(e.createdAt).from(yt()())},e._id)}))})}}]),s}(i.Component),qr=Object(Ue.a)({form:"replyMessage"}),Hr=function(e){return Object(re.jsx)("div",{children:Object(re.jsx)("textarea",Object(g.a)({required:!0,rows:"3",autoComplete:"off",placeholder:"Your message here",className:"form-control"},e.input))})},Yr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"handleFormSubmit",value:function(e){this.props.sendReply(this.props.replyTo,e)}},{key:"renderAlert",value:function(){return this.props.errorMessage?Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("strong",{children:"Oops!"})," ",this.props.errorMessage]}):this.props.message?Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Success!"})," ",this.props.message]}):void 0}},{key:"render",value:function(){var e=this.props.handleSubmit;return Object(re.jsxs)("form",{onSubmit:e(this.handleFormSubmit.bind(this)),children:[this.renderAlert(),Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)(Ee.a,{name:"composedMessage",className:"form-control",component:Hr,type:"text",placeholder:"Type here to chat..."})}),Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)("button",{action:"submit",className:"btn btn-primary",children:"Send"})})]})}}]),s}(i.Component);var Wr=Object(u.b)((function(e){return{recipients:e.communication.recipients,errorMessage:e.communication.error}}),{sendReply:Xt})(qr(Yr)),Vr=Vt,Jr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;Object(ee.a)(this,s);var r=(a=t.call(this,e)).props,i=r.params,n=r.fetchConversation;return n(i.conversationId),Vr.emit("enter conversation",i.conversationId),Vr.on("refresh messages",(function(e){console.log("refresh messages called"),n(i.conversationId)})),a}return Object(te.a)(s,[{key:"componentWillUnmount",value:function(){Vr.emit("leave conversation",this.props.match.params.conversationId)}},{key:"renderInbox",value:function(){if(this.props.messages)return Object(re.jsx)(zr,{displayMessages:this.props.messages})}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Inbox"})]})}},{key:"userMenu",value:function(){return Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/profile/edit",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Edit Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/inbox",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Inbox"})]})})]})}},{key:"render",value:function(){return Object(re.jsx)("div",{className:"conversation-list-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:this.userMenu()}),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsx)("div",{id:"pageTitle",children:Object(re.jsxs)("div",{className:"title",children:["Conversation with ",this.props.match.params.conversationId]})}),Object(re.jsx)("div",{className:"conversation-list-section",children:this.renderInbox()}),Object(re.jsx)("div",{className:"conversation-reply-section",children:Object(re.jsx)(Wr,{replyTo:this.props.match.params.conversationId})})]})]})})]})})})}}]),s}(i.Component);var Gr=Object(u.b)((function(e){return{messages:e.communication.messages}}),a)(Object(Q.g)(Jr)),Kr=Object(Ue.a)({form:"composeMessage",validate:function(e){var t={};e.composedMessage||(t.password="Please enter a message");return t}});var Zr=function(e){return Object(re.jsxs)("div",{children:[Object(re.jsx)("textarea",Object(g.a)({required:!0,rows:"3",placeholder:"Your message here",className:"form-control"},e.input)),e.touched&&e.error&&Object(re.jsx)("div",{className:"error",children:e.error})]})},Xr=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).props.fetchRecipients(),a}return Object(te.a)(s,[{key:"handleFormSubmit",value:function(e){this.props.startConversation(e)}},{key:"renderRecipients",value:function(){if(this.props.recipients)return this.props.recipients.map((function(e){return Object(re.jsxs)("option",{value:e._id,children:[e.profile.firstName," ",e.profile.lastName]},e._id)}))}},{key:"renderAlert",value:function(){return this.props.errorMessage?Object(re.jsxs)("div",{className:"alert alert-danger",children:[Object(re.jsx)("strong",{children:"Oops!"})," ",this.props.errorMessage]}):this.props.message?Object(re.jsxs)("div",{className:"alert alert-success",children:[Object(re.jsx)("strong",{children:"Success!"})," ",this.props.message]}):void 0}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.b,{to:"/dashboard",children:"Dashboard"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Inbox"})]})}},{key:"userMenu",value:function(){return Object(re.jsxs)("ul",{className:"nav nav-sidebar",id:"menu",children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/profile/edit",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Edit Profile"})]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{to:"/dashboard/inbox",children:[Object(re.jsx)("i",{className:"glyphicon glyphicon-list-alt"}),Object(re.jsx)("span",{className:"collapse in hidden-xs",children:" Inbox"})]})})]})}},{key:"render",value:function(){var e=this.props.handleSubmit;return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)("div",{className:"column col-sm-3 col-xs-1 sidebar-offcanvas",id:"sidebar",children:this.userMenu()}),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsx)("div",{id:"pageTitle",children:Object(re.jsx)("div",{className:"title",children:"Start New Conversation"})}),Object(re.jsx)("div",{className:"compose-msg-form",children:Object(re.jsxs)("form",{onSubmit:e(this.handleFormSubmit.bind(this)),children:[Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("label",{children:"Choose Recipent"}),Object(re.jsxs)(Ee.a,{className:"form-control",required:!0,name:"recipient",component:"select",children:[Object(re.jsx)("option",{}),this.renderRecipients()]})]}),Object(re.jsxs)("div",{className:"form-group",children:[Object(re.jsx)("label",{children:"Enter your message below"}),this.renderAlert(),Object(re.jsx)(Ee.a,{name:"composedMessage",required:!0,rows:"3",component:Zr,type:"text",placeholder:"Type here to chat..."})]}),Object(re.jsx)("div",{className:"form-group",children:Object(re.jsx)("button",{action:"submit",className:"btn btn-primary",children:"Send"})})]})})]})]})})]})})})}}]),s}(i.Component);var Qr=Object(u.b)((function(e){return{recipients:e.communication.recipients,errorMessage:e.communication.error}}),{fetchRecipients:Zt,startConversation:Kt})(Kr(Xr)),ei=Or,ti=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;Object(ee.a)(this,s),(a=t.call(this,e)).state={users:[],role:"",errorMessage:""},a.props.GetActiveSessions();var r=Object(we.a)(a);return ei.on("Update Expert Session List",(function(){console.log("Working"),r.props.GetActiveSessions().then((function(e){r.setState({users:e.AllUsers}),console.log("Success")}),(function(e){console.log("Failure")}))})),a}return Object(te.a)(s,[{key:"adminMenu",value:function(){return Object(re.jsx)(tr,{})}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"Users List"})]})}},{key:"isRole",value:function(e,t){return this.props.cookies.get("user").role===e&&t}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.cookies.get("user").role;this.setState({role:t}),"Admin"===t?this.props.GetActiveSessions().then((function(t){e.setState({users:t.AllUsers})}),(function(e){console.log("Failure")})):this.setState({users:[],errorMessage:"Sorry You Are Not Authorized"})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=Object(re.jsx)("div",{children:Object(re.jsxs)("table",{children:[Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{style:{width:"20%",paddingLeft:"10px"},children:"First Name"}),Object(re.jsx)("th",{style:{width:"20%"},children:"Second Name"}),Object(re.jsx)("th",{style:{width:"40%"},children:"Email"}),Object(re.jsx)("th",{style:{width:"10%"},children:"Role"}),Object(re.jsx)("th",{style:{width:"50%"},children:"Enabled"}),Object(re.jsx)("th",{style:{width:"50%"},children:"Action"})]}),this.state.users.map((function(t,s){return Object(re.jsx)(si,{index:s,data:t,s:e.state},"TABLE_ROW_".concat(s))}))]})});return Object(re.jsx)("div",{className:"session-page",children:Object(re.jsx)("div",{className:"container",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[this.isRole("Admin",this.adminMenu()),Object(re.jsxs)("div",{className:"column col-sm-9 col-xs-11",id:"main",children:[Object(re.jsxs)("div",{id:"pageTitle",children:[Object(re.jsx)("div",{className:"title",children:"Session List"}),this.state.errorMessage&&null!==this.state.errorMessage&&void 0!==this.state.errorMessage&&""!==this.state.errorMessage&&Object(re.jsx)("div",{className:"alert alert-danger",children:this.state.errorMessage})]}),Object(re.jsx)("p",{children:this.props.content}),"Admin"===this.state.role&&this.state.users&&null!==this.state.users&&void 0!==this.state.users?t:""]})]})})]})})})}}]),s}(i.Component),si=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(){return Object(ee.a)(this,s),t.apply(this,arguments)}return Object(te.a)(s,[{key:"render",value:function(){var e;return Object(re.jsxs)("tr",{style:{background:(e=this.props.index,e&&null!==e&&e%2===0?"#c6c6c6":"white")},children:[Object(re.jsx)("td",{children:Object(re.jsx)("h4",{style:{paddingLeft:"10px"},children:this.props.data.profile.firstName})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:this.props.data.role&&null!==this.props.data.role&&void 0!==this.props.data.role&&"Expert"===this.props.data.role?Object(re.jsx)("a",{href:"/dashboard/userslist/"+this.props.data._id,children:this.props.data.profile.lastName}):this.props.data.profile.lastName})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:this.props.data.email})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:this.props.data.role})}),Object(re.jsx)("td",{children:Object(re.jsx)("h4",{children:!0===this.props.data.enableAccount?"Yes":"No"})}),Object(re.jsx)("td",{children:!0===this.props.data.enableAccount?Object(re.jsx)("button",{className:"btn ",disabled:!0,style:{borderColor:"white",height:"50px",width:"72px"},onClick:this.props.BanMe,value:this.props.data._id,children:Object(re.jsx)("h4",{value:this.props.data._id,style:{color:"red"},children:"X"})}):Object(re.jsx)("button",{className:"btn ",style:{borderColor:"white",height:"50px",width:"72px"},onClick:this.props.BanMe,value:this.props.data._id,children:Object(re.jsx)("h4",{style:{color:"green"},children:"X"})})})]})}}]),s}(n.a.Component);var ai=Object(u.b)((function(e){return{content:e.auth.content}}),{protectedTest:Fe,GetActiveSessions:function(e){return function(e){return fetch("".concat(pe,"/GetActiveSessions"),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))}}})(Object(ue.a)(ti)),ri=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).handleChange=function(e){console.log("HI "+e.target.value),a.setState(Object(gs.a)({},e.target.name,e.target.value))},a.state={data:"",SuccessMessage:"",composedMessage:"",errors:{}},a.handleChange=a.handleChange.bind(Object(we.a)(a)),a}return Object(te.a)(s,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;console.log("SELF IN COMPONENT WILL MOUNT"),console.log(e),window.$(document).ready((function(){window.$("#composedMessage").emojioneArea({pickerPosition:"left",tonesStyle:"bullet",events:{change:function(e,t){console.log("event:click")},keypress:function(t,s){console.log("__________________________"),console.log(s),13===s.keyCode&&(console.log("ENTER PRESSED"),console.log(this),console.log("%%%%%%%%%"),console.log(e),e.setState({})),console.log("event:keypress")}}})}))}},{key:"render",value:function(){return Object(re.jsxs)("div",{children:["HI",Object(re.jsxs)("div",{className:"row",children:[Object(re.jsx)("div",{className:"span6",style:{float:"left",width:"48%",padding:"1%"},children:Object(re.jsx)("textarea",{name:"composedMessage",id:"composedMessage",value:this.state.composedMessage,onChange:this.handleChange,children:"Default :smile:"})}),Object(re.jsx)("div",{className:"span6",style:{float:"left",width:"48%",padding:"1%"},children:Object(re.jsx)("input",{type:"text",id:"emojionearea2",value:"inline :+1:"})})]})]})}}]),s}(i.Component),ii=Object(u.b)(null,{})(ri),ni=s(1079),ci=!1,oi=function(e){var t=Object(u.c)(),s=Object(i.useState)({sessionReviews:[],role:""}),a=Object(d.a)(s,2),r=a[0],n=a[1],c=Object(m.a)(),o=Object(d.a)(c,1)[0];return Object(i.useEffect)((function(){ci=!0;var e=o.user.slug;return ci&&t(ct({expertSlug:e})).then((function(e){n(Object(g.a)(Object(g.a)({},r),{},{sessionReviews:e.reviews}))})).catch((function(e){console.log(e)})),function(){ci=!1}}),[]),Object(re.jsx)("div",{className:"container my-reviews-wrapper",children:Object(re.jsxs)("div",{className:"row",children:[Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"My reviews"})]}),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)(sr,{}),Object(re.jsx)("div",{className:"column col-sm-9 col-xs-11",children:Object(re.jsx)(St.a,{header:Object(re.jsx)("h3",{children:"Session reviews"}),bsStyle:"primary",children:Object(re.jsxs)(ni.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:[Object(re.jsx)("thead",{children:Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{width:"6%",children:"#"}),Object(re.jsx)("th",{width:"15%",children:"User Name"}),Object(re.jsx)("th",{width:"15%",children:"Title"}),Object(re.jsx)("th",{width:"60%",children:"Review"}),Object(re.jsx)("th",{width:"4%",children:"Rating"})]})}),Object(re.jsx)("tbody",{children:0===r.sessionReviews.length?Object(re.jsx)("tr",{children:Object(re.jsx)("td",{colSpan:"5",className:"text-center",children:"No reviews found!"})}):Object(re.jsx)(re.Fragment,{children:r.sessionReviews.map((function(e,t){return Object(re.jsxs)("tr",{children:[Object(re.jsx)("td",{children:t+1}),Object(re.jsx)("td",{children:e.userFullName}),Object(re.jsx)("td",{children:e.title}),Object(re.jsx)("td",{children:e.review}),Object(re.jsx)("td",{children:e.rating})]},"TR_".concat(t))}))})})]})})})]})})]})})},li=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e){var a;return Object(ee.a)(this,s),(a=t.call(this,e)).state={userReviews:[]},a}return Object(te.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.cookies.get("user").email;this.props.getUserReviews({userEmail:t}).then((function(t){var s=t.userReviews;e.setState({userReviews:s})}),(function(e){return e.response.json().then((function(e){e.errors}))}))}},{key:"breadcrumb",value:function(){return Object(re.jsxs)("ol",{className:"breadcrumb",children:[Object(re.jsx)("li",{className:"breadcrumb-item",children:Object(re.jsx)(h.c,{to:"/",children:"Home"})}),Object(re.jsx)("li",{className:"breadcrumb-item",children:"My reviews"})]})}},{key:"renderUserReview",value:function(){var e=this.state.userReviews;if(void 0!==e&&""!==e)return 0===e.length?Object(re.jsx)("tr",{children:Object(re.jsx)("td",{colSpan:"5",className:"text-center",children:"No reviews found!"})}):e.map((function(e,t){return Object(re.jsxs)("tr",{children:[Object(re.jsx)("td",{children:t+1}),Object(re.jsx)("td",{children:e.expertFullName}),Object(re.jsx)("td",{children:e.title}),Object(re.jsx)("td",{children:e.review}),Object(re.jsx)("td",{children:e.rating})]},"TR_".concat(t))}))}},{key:"render",value:function(){return Object(re.jsx)("div",{className:"container my-reviews-wrapper",children:Object(re.jsxs)("div",{className:"row",children:[this.breadcrumb(),Object(re.jsx)("div",{className:"wrapper-sidebar-page",children:Object(re.jsxs)("div",{className:"row row-offcanvas row-offcanvas-left",children:[Object(re.jsx)(Ka,{}),Object(re.jsx)("div",{className:"column col-sm-9 col-xs-11",children:Object(re.jsx)(St.a,{header:Object(re.jsx)("h3",{children:"My reviews"}),bsStyle:"primary",children:Object(re.jsxs)(ni.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:[Object(re.jsx)("thead",{children:Object(re.jsxs)("tr",{children:[Object(re.jsx)("th",{width:"6%",children:"#"}),Object(re.jsx)("th",{width:"15%",children:"Expert Name"}),Object(re.jsx)("th",{width:"15%",children:"Title"}),Object(re.jsx)("th",{width:"60%",children:"Review"}),Object(re.jsx)("th",{width:"4%",children:"Rating"})]})}),Object(re.jsx)("tbody",{children:this.renderUserReview()})]})})})]})})]})})}}]),s}(i.Component),di=Object(u.b)(null,{getUserReviews:function(e){var t=e.userEmail;return function(e){return oe.a.get("".concat(pe,"/user/getUserReviews/").concat(t)).then((function(e){return e.data})).catch((function(t){console.log("error: "+t),$e(e,t.response,v)}))}}})(Object(ue.a)(li)),ui=function(e){var t=e.match;return Object(re.jsxs)(Q.c,{children:[Object(re.jsx)(Q.a,{exact:!0,path:t.path,component:or(pr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/inbox"),component:or(fr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/userslist"),component:or(Nr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/userslist/:id"),component:or(kr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/create-expert"),component:or(Pr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/conversation/new"),component:or(Qr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/conversation/view/:conversationId"),component:or(Gr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/sessionsList"),component:or(ai)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/my-reviews"),component:or(di)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/session-reviews"),component:or(oi)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/confirm-payments"),component:or(Rr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/confirm-payments-done"),component:or(Lr)}),Object(re.jsx)(Q.a,{exact:!0,path:"".concat(t.path,"/example-tobebgnoredlater"),component:or(ii)})]})},hi=function(){return Object(re.jsxs)(Q.c,{children:[Object(re.jsx)(Q.a,{exact:!0,path:"/",component:fe}),Object(re.jsx)(Q.a,{path:"/how-it-works",component:aa}),Object(re.jsx)(Q.a,{path:"/map",component:Ne}),Object(re.jsx)(Q.a,{path:"/community-news/:value",component:ca}),Object(re.jsx)(Q.a,{path:"/testpage",component:ke}),Object(re.jsx)(Q.a,{path:"/forum",component:Ce}),Object(re.jsx)(Q.a,{path:"/privacy-policy",component:Le}),Object(re.jsx)(Q.a,{path:"/list/:category",component:pt}),Object(re.jsx)(Q.a,{path:"/expert-signup/:token",component:Oa}),Object(re.jsx)(Q.a,{path:"/contact-us",component:Ke}),Object(re.jsx)(Q.a,{path:"/register",component:ya}),Object(re.jsx)(Q.a,{path:"/login",component:Na}),Object(re.jsx)(Q.a,{path:"/login-social",component:Sa}),Object(re.jsx)(Q.a,{path:"/logout",component:_a}),Object(re.jsx)(Q.a,{path:"/forgot-password",component:La}),Object(re.jsx)(Q.a,{path:"/reset-password/:resetToken",component:Aa}),Object(re.jsx)(Q.a,{path:"/tokbox/:slug",component:Ys}),Object(re.jsx)(Q.a,{path:"/tokbox/join/:slug",component:Ys}),Object(re.jsx)(Q.a,{path:"/mysession-list",component:lr}),Object(re.jsx)(Q.a,{path:"/component-samples",component:or(sa)}),Object(re.jsx)(Q.a,{path:"/checkout/:plan",component:or(nr)}),Object(re.jsx)(Q.a,{path:"/billing/settings",component:or(Wa)}),Object(re.jsx)(Q.a,{path:"/profile",component:or(Ja)}),Object(re.jsx)(Q.a,{path:"/update-profile",component:or(ir)}),Object(re.jsx)(Q.a,{path:"/expert/:category/:slug",component:ls}),Object(re.jsx)(Q.a,{path:"/edit/expert/:category/:slug",component:xs}),Object(re.jsx)(Q.a,{path:"/session/:slug",component:or(_s)}),Object(re.jsx)(Q.a,{path:"/mysession/:slug",component:or(zs)}),Object(re.jsx)(Q.a,{path:"/recordings",component:or(hr)}),Object(re.jsx)(Q.a,{path:"/admin",component:or(cr)}),Object(re.jsx)(Q.a,{path:"/account-info",component:or(Xa)}),Object(re.jsx)(Q.a,{path:"/dashboard",component:ui}),Object(re.jsx)(Q.a,{path:"/test",component:ne}),Object(re.jsx)(Q.a,{path:"*",component:ie})]})},mi=s(99),pi=function(e){var t={showModal:!1,audioCallFrom:"",email:e.email,sessionId:"",apiToken:"",pubOptions:{width:100,height:75,insertMode:"append"},publisherObj:"",sessionObj:"",newConAudioId:"",userAudioCallSokcetname:"",totalSeconds:0,refreshIntervalId:""},s=Object(i.useState)(t),a=Object(d.a)(s,2),r=a[0],n=a[1],c=Object(u.c)(),o=Object(m.a)(),l=Object(d.a)(o,1)[0],h=Vt;Object(i.useEffect)((function(){var e=l.user;if(e&&"Expert"===e.role){var t=e.slug;h.emit("expert audio call session","expert-audio-session-"+t)}}),[l.user,h]),Object(i.useEffect)((function(){h.on("audio call to expert",(function(e){n(Object(g.a)(Object(g.a)({},r),{},{audioCallFrom:e.audioCallFrom,newConAudioId:e.newConAudioId,userAudioCallSokcetname:e.userAudioCallSokcetname,userConnectionId:e.userConnectionId})),n(Object(g.a)(Object(g.a)({},r),{},{showModal:!0})),window.$(".incomingAudioCall_main").css("right",0),console.log("*** socket on audio call to expert ***"+r.userAudioCallSokcetname)}))}),[r,h]);var p=function(){var e=r.totalSeconds;++e,n(Object(g.a)(Object(g.a)({},r),{},{totalSeconds:e}));var t=j(e%60),s=j(parseInt(e/60));window.$("#expert_audio_call_seconds").html(t),window.$("#expert_audio_call_minutes").html(s)},j=function(e){var t=e+"";return t.length<2?"0"+t:t},b=function(){n(Object(g.a)(Object(g.a)({},r),{},{showModal:!1})),window.$(".incomingAudioCall_main").css("right","-300px");var e=r.email,t=r.newConAudioId;c(function(e){var t=e.email,s=e.newConAudioId;return function(e){return oe.a.post("".concat(pe,"/requestForToken"),{email:t,newConAudioId:s}).then((function(e){return e.data})).catch((function(t){$e(e,t.response,v)}))}}({email:e,newConAudioId:t}).then((function(e){var t,s=mi.initSession(he,e.sessionId);n({sessionObj:s,userAudioCallSokcetname:"user-audio-session-"+e.username,sessionId:e.sessionId,apiToken:e.token}),s.on("streamCreated",(function(e){console.log("streamCreated");var t=s.subscribe(e.stream,"userSubscriberAudio",{width:100,height:75,insertMode:"append"});console.log(t),window.$("#expert-audio-call-interface-wrapper").fadeIn();var a=setInterval(p,1e3);n(Object(g.a)(Object(g.a)({},r),{},{refreshIntervalId:a}))})),s.on("connectionCreated",(function(e){console.log("connectionCreated")})),s.on("connectionDestroyed",(function(e){console.log("connectionDestroyed"),s.disconnect(),window.$("#expert-audio-call-interface-wrapper").fadeOut();var t=r.refreshIntervalId;clearInterval(t),n(Object(g.a)(Object(g.a)({},r),{},{totalSeconds:0,refreshIntervalId:""}))})),s.on("sessionDisconnected",(function(e){console.log("sessionDisconnected"),window.$("#expert-audio-call-interface-wrapper").fadeOut();var t=r.refreshIntervalId;clearInterval(t),n(Object(g.a)(Object(g.a)({},r),{},{totalSeconds:0,refreshIntervalId:""}))})),s.on("streamDestroyed",(function(e){console.log("streamDestroyed"),window.$("#expert-audio-call-interface-wrapper").fadeOut()})),s.connect(r.apiToken,(function(e){if(e)console.log("session connection error");else{t=mi.initPublisher("expertPublisherAudio",{videoSource:null,width:100,height:75,insertMode:"append"}),s.publish(t)}}))}),(function(e){return e.response.json().then((function(e){e.errors}))})))};return Object(re.jsxs)("div",{children:[Object(re.jsx)("div",{className:"incomingAudioCall_main",children:Object(re.jsxs)("div",{className:"incomingAudioCall_popup",children:[Object(re.jsx)("div",{className:"modal-header",children:Object(re.jsx)("h4",{className:"modal-title",children:" Incoming Call... "})}),Object(re.jsx)("div",{className:"modal-body",children:Object(re.jsxs)("div",{className:"userDetail",children:[Object(re.jsx)("div",{className:"user_img",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})}),Object(re.jsxs)("h3",{children:[" ",r.audioCallFrom," "]})]})}),Object(re.jsxs)("div",{className:"modal-footer",children:[Object(re.jsx)(ft.a,{bsStyle:"danger",onClick:function(){!function(){console.log("*** disconnect call ****"),n(Object(g.a)(Object(g.a)({},r),{},{showModal:!1,audioCalling:!1})),window.$(".incomingAudioCall_main").css("right","-300px");var e={userAudioCallSokcetname:r.userAudioCallSokcetname};h.emit("disconnect incoming audio call to user",e)}()},children:Object(re.jsx)("img",{className:"incoming_call disconnect_call",src:"/img/call_cancel.png",alt:""})}),Object(re.jsx)(ft.a,{bsStyle:"success",onClick:function(){b()},children:Object(re.jsx)("img",{className:"incoming_call receive_call",src:"/img/call_pick_up.png",alt:""})})]})]})}),Object(re.jsx)("div",{id:"expert-audio-call-interface-wrapper",className:"expert-audio-call-interface-wrapper conn3 audio-call-interface-wrapper ",children:Object(re.jsxs)("div",{className:"panel panel-primary",children:[Object(re.jsx)("div",{className:"panel-heading",children:"Audio Calling..."}),Object(re.jsxs)("div",{className:"panel-body audio_call_body",children:[Object(re.jsx)("div",{className:"audio_user_call_img",children:Object(re.jsx)("img",{src:"/img/Client-img.png",alt:""})}),Object(re.jsxs)("div",{className:"audio_userrgt_content",children:[Object(re.jsx)("div",{id:"expertPublisherAudio"}),Object(re.jsx)("div",{id:"userSubscriberAudio"}),Object(re.jsx)("h3",{children:r.audioCallFrom}),Object(re.jsxs)("h5",{children:[Object(re.jsx)("label",{id:"expert_audio_call_minutes",children:"00"}),":",Object(re.jsx)("label",{id:"expert_audio_call_seconds",children:"00"})]})]}),Object(re.jsx)("button",{onClick:function(){r.sessionObj.disconnect()},className:"btn btn-danger",children:Object(re.jsx)("img",{className:"incoming_call disconnect_call",src:"/img/call_cancel.png",alt:""})})]})]})})]})};var ji=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;return Object(ee.a)(this,s),(r=t.call(this,e,a)).updateProfile=function(){var e=r.state.currentUser.email;oe.a.get("".concat(pe,"/getExpert/").concat(e)).then((function(e){r.setState({logged_in_user:e.data[0],slug:e.data[0].slug,category:e.data[0].expertCategories[0]});var t=e.data[0].slug,s=e.data[0].expertCategories[0];localStorage.setItem("slug",t),localStorage.setItem("category",s),localStorage.setItem("editable","true"),void 0!==s&&""!==s&&null!==s?r.props.history.push("/edit/expert/"+s+"/"+t):r.props.history.push("/edit/expert/new_category/"+t)})).catch((function(e){console.error(e)}))},r.state={redirect:!1,logged_in_user:[],slug:"",category:"",searchres:[],currentUser:r.props.cookies.get("user")},r.searchInvoke=r.searchInvoke.bind(Object(we.a)(r)),r.getPlaceHolder=r.getPlaceHolder.bind(Object(we.a)(r)),r}return Object(te.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,s;this.state.currentUser&&(null===(t=this.state.currentUser)||void 0===t?void 0:t.firstName)===(null===(s=e.cookies.get("user"))||void 0===s?void 0:s.firstName)||this.setState({currentUser:e.cookies.get("user")})}},{key:"hideSearch",value:function(){return"0"!==this.props.posts&&(this.props.posts,!0)}},{key:"renderLinks",value:function(){var e=this;return this.props.authenticated?Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/",children:[Object(re.jsx)("i",{className:"fa fa-home"})," Home"]})},"".concat(1,"header")),Object(re.jsx)("li",{children:Object(re.jsxs)("div",{className:"dropdown",children:[Object(re.jsxs)("a",{"data-toggle":"dropdown",className:"dropdown-toggle","aria-expanded":"true",children:[Object(re.jsxs)("span",{className:"name",children:[Object(re.jsx)("i",{className:"fa fa-user"}),this.state.currentUser.firstName,this.state.currentUser.lastName,"(",this.state.currentUser.role,")"]}),Object(re.jsx)("b",{className:"caret"})]}),Object(re.jsxs)("ul",{className:"dropdown-menu",children:[Object(re.jsx)("div",{className:"log-arrow-up"}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/profile",children:[Object(re.jsx)("i",{className:"fa fa-user",title:"Update Profile"})," ","profile"]})}),"Admin"===this.state.currentUser.role?Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/update-profile",children:[Object(re.jsx)("i",{className:"fa fa-pencil",title:"Update Profile"}),"update profile"]})}):Object(re.jsx)("li",{children:Object(re.jsxs)("a",{onClick:function(){e.updateProfile()},style:{cursor:"pointer"},children:[Object(re.jsx)("i",{className:"fa fa-pencil",title:"Update Profile"}),"Update profile"]})}),"User"===this.state.currentUser.role&&Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/dashboard/my-reviews",children:[Object(re.jsx)("i",{className:"fa fa-commenting-o","aria-hidden":"true"})," ","my reviews"]})}),"Expert"===this.state.currentUser.role&&Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/dashboard/session-reviews",children:[Object(re.jsx)("i",{className:"fa fa-commenting-o","aria-hidden":"true"}),"session reviews"]})}),"Expert"===this.state.currentUser.role&&Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/recordings",children:[Object(re.jsx)("i",{className:"fa fa-microphone"})," recordings"]})}),Object(re.jsx)("li",{children:Object(re.jsxs)(h.b,{onClick:this.handleOnClick,to:"/logout",children:[Object(re.jsx)("i",{className:"fa fa-key"})," logout"]})})]})]})},"".concat(2,"header"))]}):Object(re.jsx)(re.Fragment,{children:Object(re.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{onClick:this.handleOnClick,to:"/",children:"Home"})},1),Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{onClick:this.handleOnClick,to:"/login",children:"Login"})},2),Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{onClick:this.handleOnClick,to:"/register",children:"Join"})},3),Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{onClick:this.handleOnClick,to:"/map",children:"Map"})},4),Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{onClick:this.handleOnClick,to:"/how-it-works",children:"How it works"})},5),Object(re.jsx)("li",{children:Object(re.jsx)(h.b,{onClick:this.handleOnClick,to:"/contact-us",children:"Contact"})},6)]})})}},{key:"handleOnClick",value:function(){document.querySelector("#nav-collapse").classList.remove("in")}},{key:"displayPendingAccountAlert",value:function(){if(this.state.currentUser&&"User"===this.state.currentUser.role&&!this.state.currentUser.customerId)return Object(re.jsxs)("div",{className:"user-pending-account-alert alert alert-danger",children:["You are pending with your account setup for placing session with any expert, please fill in your information",Object(re.jsx)(h.b,{to:"/account-info",children:" here "})]})}},{key:"getPlaceHolder",value:function(){return"HOME"===this.props.posts||void 0===this.props.posts?"Search":"0"===this.props.posts?"":"Search ".concat(this.props.posts)}},{key:"searchInvoke",value:function(e){var t=this;oe.a.get("".concat(pe,"/getExpertsListingByKeyword/&").concat(e.target.value)).then((function(e){var s=e.data;t.setState({searchres:s,error:null}),t.state.searchres.length>0?t.props.setSearch(t.state.searchres):t.props.setSearch([])})).catch((function(e){t.setState({category:"",error:e})}))}},{key:"render",value:function(){var e=this;return Object(re.jsxs)("div",{children:[Object(re.jsx)("nav",{className:"navbar navbar-default navbar-fixed-top",children:Object(re.jsxs)("div",{className:"container",children:[Object(re.jsxs)("div",{className:"navbar-header",children:[Object(re.jsxs)("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#nav-collapse",children:[Object(re.jsx)("span",{className:"icon-bar"}),Object(re.jsx)("span",{className:"icon-bar"}),Object(re.jsx)("span",{className:"icon-bar"})]}),Object(re.jsx)("div",{className:"logo-tag",children:Object(re.jsx)(h.c,{className:"navbar-brand",to:"/",children:"donnie's list"})})]}),Object(re.jsx)("div",{className:"collapse navbar-collapse",id:"nav-collapse",children:Object(re.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[this.hideSearch()&&Object(re.jsx)("li",{children:Object(re.jsxs)("div",{className:"search",children:[Object(re.jsx)("i",{className:"fa fa-search"}),Object(re.jsx)("input",{className:"test",placeholder:this.getPlaceHolder(),type:"text",onChange:function(t){return e.searchInvoke(t)}})]})}),this.renderLinks()]})})]})}),Object(re.jsx)(pi,{email:this.state.currentUser?this.state.currentUser.email:""})]})}}]),s}(i.Component);var bi=Object(u.b)((function(e){return{authenticated:e.auth.authenticated}}),{setPage:be,setSearch:function(e){return function(t){t({type:"UPDATE",payload:e})}}})(Object(Q.g)(Object(ue.a)(ji))),xi=Object(Ue.a)({form:"email-form"}),gi=function(e){Object(se.a)(s,e);var t=Object(ae.a)(s);function s(e,a){var r;Object(ee.a)(this,s),(r=t.call(this,e,a)).handleShow=r.handleShow.bind(Object(we.a)(r)),r.handleClose=r.handleClose.bind(Object(we.a)(r)),r.handleFormSubmit=r.handleFormSubmit.bind(Object(we.a)(r));var i=r.props.cookies.get("user");return r.state=i?{show:!1}:{show:!0},r}return Object(te.a)(s,[{key:"componentDidMount",value:function(){"expert-signup/"===window.location.pathname.substring(1,15)&&this.setState({show:!1})}},{key:"handleFormSubmit",value:function(e){var t=this;try{this.props.signupExpertSendSignupLink(e).then((function(e){console.log("response: ",e),e.error?t.setState({responseTextMsg:"<div class='val-error'>"+e.error+"</div>"}):e.message&&t.setState({responseTextMsg:"<div class='val-success'>"+e.message+"</div>"})}),(function(e){return e.response.json().then((function(e){var s=e.errors;console.log("errors: ",s),t.setState({responseTextMsg:"<div class='val-error'>"+s+"</div>"})}))}))}catch(s){}}},{key:"renderLinks",value:function(){return this.props.authenticated,[]}},{key:"handleOnClick",value:function(){document.querySelector("#nav-collapse").classList.remove("in")}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this.props;e.handleSubmit,e.pristine,e.submitting;return Object(re.jsx)("footer",{className:"footer",children:Object(re.jsx)("center",{children:"A Donny Dey Production"})})}}]),s}(i.Component);var fi=Object(u.b)((function(e){return{authenticated:e.auth.authenticated}}),{signupExpertSendSignupLink:function(e){var t=e.email;return function(e){if(void 0!==t)return oe.a.post("".concat(pe,"/auth/signupExpertSendSignupLink"),{email:t,expertEmail:"ermohit400@yahoo.com"}).then((function(t){return e({type:S,payload:t.data}),t.data})).catch((function(t){$e(e,t.response,v)}))}}})(Object(ue.a)(xi(gi))),Oi=function(){var e=Object(m.a)(),t=Object(d.a)(e,1)[0];return Object(i.useEffect)((function(){t.token&&X.dispatch({type:f})}),[t]),Object(re.jsx)(u.a,{store:X,children:Object(re.jsxs)(h.a,{children:[Object(re.jsx)(bi,{logo:"Donnie's List"}),Object(re.jsx)(hi,{}),Object(re.jsx)(fi,{})]})})};o.a.render(Object(re.jsx)(l.a,{children:Object(re.jsx)(Oi,{})}),document.querySelector(".wrapper"))},890:function(e,t){},892:function(e,t){},916:function(e,t){},919:function(e,t){},921:function(e,t){},954:function(e,t){},955:function(e,t){},960:function(e,t){},962:function(e,t){},969:function(e,t){},988:function(e,t){}},[[1073,1,2]]]);
//# sourceMappingURL=main.fc82a42f.chunk.js.map